TDAT: public double modularity ( ) {  <NL> double q = 0 ;  <NL> double m2 = ( double ) graph . get total _ weight ( ) ;  <NL> for ( int i = 0 ; i < this . network _ size ; i + + ) {  <NL> if ( tot . get ( i ) > 0 ) {  <NL> q + = ( double ) in . get ( i ) / m2 - ( ( double ) tot . get ( i ) / m2 ) * ( ( double ) tot . get ( i ) / m2 ) ;  <NL>  }  <NL>  }  <NL> return q ;  <NL>  }  COM: <s> calculates the modularity of the community graph </s>