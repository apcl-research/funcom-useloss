TDAT: public void handle message ( connection connection , linked list < percept > percepts ) {  <NL>  <NL> for ( entry < string , connection > e : this . entities to connections . entry set ( ) ) {  <NL>  <NL>  / / look up entity <NL> if ( connection . equals ( e . get value ( ) ) ) {  <NL>  <NL> string entity = e . get key ( ) ;  <NL>  <NL>  / / store last percept <NL> enqueue percepts ( entity , percepts ) ;  <NL>  <NL>  / / notify agents <NL> for ( percept p : percepts )  <NL> try {  <NL> this . notify agents via entity ( p , entity ) ;  <NL>  } catch ( environment interface exception e1 ) {  <NL> e1 . print stack trace ( ) ;  <NL>  }  <NL>  <NL>  }  <NL>  <NL>  }  <NL>  <NL>  <NL>  / / system . out . println ( container ) ;  <NL>  <NL>  }  COM: <s> handles an incoming message </s>