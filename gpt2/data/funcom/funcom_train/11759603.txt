TDAT: protected agent id spawn agent ( string name , string template name , agent config config ) throws simpa exception {  <NL> boolean failed = false ;  <NL> agent id id = null ;  <NL> sensor id sid = null ;  <NL> try {  <NL> sid = link default sensor ( ) ;  <NL> use ( agent _ factory , new op ( " spawn agent " , name , template name , config ) , sid ) ;  <NL> perception p = sense ( sid , " spawn _ succeeded|spawn _ failed " , integer . max _ value ) ;  <NL> this . unlink sensor ( sid ) ;  <NL> if ( p . get label ( ) . equals ( " spawn _ succeeded " ) ) {  <NL> id = ( agent id ) p . get content ( 0 ) ;  <NL>  } else {  <NL> failed = true ;  <NL>  }  <NL>  } catch ( exception ex ) {  <NL> ex . print stack trace ( ) ;  <NL> failed = true ;  <NL>  }  <NL> if ( failed ) {  <NL> throw new simpa exception ( " spawn _ failed " ) ;  <NL>  } else {  <NL> return id ;  <NL>  }  <NL>  }  COM: <s> auxiliary action to spawn a new agent </s>