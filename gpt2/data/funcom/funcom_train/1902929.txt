TDAT: public long perform count ( ) {  <NL>  <NL> string count query string = base query . to string ( false , false ) ;  <NL> map < string , object > parameters = base query . get parameter map ( ) ;  <NL>  <NL> if ( logger . is loggable ( level . fine ) )  <NL> logger . info ( " executing count query : " + count query string + " "  <NL>  + parameters ) ;  <NL>  <NL> query count query = manager . new query ( count query string ) ;  <NL> count query . set class ( base query . get kind ( ) ) ;  <NL> count query . set result ( " count ( this ) " ) ;  <NL>  <NL> number count = ( number ) count query . execute with map ( parameters ) ;  <NL> return count . long value ( ) ;  <NL>  }  COM: <s> perform the count query </s>