TDAT: public void fire after transition ( int before state , int after state ) {  <NL> if ( after state ! = current mode ) {  <NL> cycles [ current mode ] + = clock . get count ( ) - last change ;  <NL> old mode = current mode ;  <NL> current mode = after state ;  <NL> last change = clock . get count ( ) ;  <NL>  / / notify the energy control that i am now in a new state <NL> energy control . state change ( this ) ;  <NL>  }  <NL>  }  COM: <s> the code fire after transition code method allows the probe to gain control </s>