TDAT: private void close all ( ) {  <NL> try {  <NL> if ( ! socket . is closed ( ) ) {  <NL> socket . close ( ) ;  <NL>  }  <NL>  } catch ( io exception ex ) {  <NL> logger . debug ( " exception while closing socket " , ex ) ;  <NL>  }  <NL> synchronized ( connections ) {  <NL> while ( connections . size ( ) > 0 ) {  <NL> connections . remove ( connections . key set ( ) . iterator ( ) . next ( ) ) . close connection ( ) ;  <NL>  }  <NL>  <NL>  }  <NL>  }  COM: <s> internal cleanup method </s>