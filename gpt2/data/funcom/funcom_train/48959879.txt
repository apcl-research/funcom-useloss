TDAT: @ override public domain entity update ( domain entity entity ) {  <NL> domain entity updated = super . update ( entity ) ;  <NL> if ( updated instanceof activity holder ) {  <NL> flush ( ) ;  <NL> activity holder < ? , ? > holder = ( activity holder < ? , ? > ) updated ;  <NL> for ( recorded activity activity : holder . get performed activities ( ) ) {  <NL> create ( activity , false ) ;  <NL>  }  <NL> flush ( ) ;  <NL> holder . clear ( ) ;  <NL>  }  <NL> return updated ;  <NL>  }  COM: <s> intercepts updates to domain entities checking for stored activities </s>