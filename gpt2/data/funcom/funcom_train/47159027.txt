TDAT: public void toggle selection ( figure figure ) {  <NL> set < figure > old selection = new hash set < figure > ( selected figures ) ;  <NL> if ( selected figures . contains ( figure ) ) {  <NL> selected figures . remove ( figure ) ;  <NL>  } else {  <NL> selected figures . add ( figure ) ;  <NL>  }  <NL> set < figure > new selection = new hash set < figure > ( selected figures ) ;  <NL> fire selection changed ( old selection , new selection ) ;  <NL> invalidate handles ( ) ;  <NL> repaint ( ) ;  <NL>  }  COM: <s> if a figure isnt selected it is added to the selection </s>