TDAT: private void add presence subscriptions ( ) {  <NL> for ( node affiliate affiliate : affiliates ) {  <NL> if ( affiliate . get affiliation ( ) ! = node affiliate . affiliation . outcast & &  <NL>  ( is presence based delivery ( ) || ( ! affiliate . get subscriptions ( ) . is empty ( ) ) ) ) {  <NL> service . presence subscription required ( this , affiliate . get jid ( ) ) ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> unsubscribe from affiliates presences if node is only sending notifications to </s>