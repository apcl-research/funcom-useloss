TDAT: private string extract value ( object state ) {  <NL> string value ;  <NL> if ( state instanceof list ) {  <NL>  / / if state is a multi valued field , take the last entry .  <NL> final list list = ( list ) state ;  <NL> if ( list = = null || list . size ( ) = = 0 ) {  <NL> return null ;  <NL>  }  <NL> value = list . get ( list . size ( ) - 1 ) . to string ( ) ;  <NL>  } else {  <NL> value = state . to string ( ) ;  <NL>  }  <NL> return this . get field ( ) . format as string ( value ) ;  <NL>  }  COM: <s> extracts a field value from the given state object </s>