TDAT: protected void submit and time ( ) {  <NL> state = next ! = null ? actor state . waiting : actor state . idle ;  <NL> final list < message > copy = new array list < message > ( messages ) ;  <NL> messages . clear ( ) ;  <NL>  / / register pulse only if there was an explicite request for that <NL> if ( next set ) {  <NL> long prev = wakeup ;  <NL> wakeup = next ;  <NL> controller . deliver and pulse ( this , copy , prev , next ) ;  <NL>  } else {  <NL> controller . deliver and pulse ( this , copy , null , null ) ;  <NL>  }  <NL>  }  COM: <s> submit the messages and or time the next wakeup </s>