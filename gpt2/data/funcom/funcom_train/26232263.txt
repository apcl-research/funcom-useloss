TDAT: public vector apply ( function func , int depth , boolean depth first ) {  <NL> vector flattened = flattened ( depth , depth first ) ;  <NL> for ( int i = 0 ; i < flattened . size ( ) ; i + + ) {  <NL> flattened . set element at ( func . apply ( flattened . element at ( i ) ) , i ) ;  <NL>  }  <NL> return flattened ;  <NL>  }  COM: <s> apply the function to each node in the tree </s>