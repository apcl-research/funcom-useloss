TDAT: public int update ( document doc ) {  <NL>  <NL> final map < string , object > metadata = doc . as map ( ) ;  <NL>  <NL> final string id = ( string ) metadata . get ( file metadata schema . id ) ;  <NL>  <NL>  / / delete the existing file version ( if any ) .  <NL> delete ( id ) ;  <NL>  <NL>  / / create a new file version using that metadata .  <NL> return create ( doc ) ;  <NL>  <NL>  }  COM: <s> create a new file version using the supplied file metadata </s>