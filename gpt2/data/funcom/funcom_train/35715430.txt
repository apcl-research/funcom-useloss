TDAT: public i region compute collapsed region ( position position ) {  <NL> try {  <NL> i document document = get document ( ) ;  <NL> if ( document = = null )  <NL> return null ;  <NL>  <NL> int line = document . get line of offset ( position . get offset ( ) ) ;  <NL> int offset = document . get line offset ( line + 1 ) ;  <NL>  <NL> int length = position . get length ( ) - ( offset - position . get offset ( ) ) ;  <NL> if ( length > 0 )  <NL> return new region ( offset , length ) ;  <NL>  } catch ( bad location exception x ) {  <NL>  }  <NL>  <NL> return null ;  <NL>  }  COM: <s> computes the region that must be collapsed when the given position is the </s>