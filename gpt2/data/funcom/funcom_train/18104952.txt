TDAT: public void shutdown ( ) {  <NL> synchronized ( mutex ) {  <NL> system shutdown = true ;  <NL>  <NL> for ( int i = 0 ; i < nmidlets ; i + + ) {  <NL> if ( midlets [ i ] . get state ( ) ! = mi dlet state . destroyed ) {  <NL> midlets [ i ] .  <NL> set state without notify ( mi dlet state . destroy _ pending ) ;  <NL>  }  <NL>  }  <NL>  <NL> mutex . notify ( ) ;  <NL>  }  <NL>  }  COM: <s> shutdown all running midlets and prepare the midp runtime </s>