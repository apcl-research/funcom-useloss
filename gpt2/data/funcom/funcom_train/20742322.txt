TDAT: protected void on attachment deleted ( string page ) {  <NL> history record history record = new history record ( ) ;  <NL> history record . set scope ( history record . scope _ wiki ) ;  <NL> history record . set message ( " history _ attachment _ deleted " ) ;  <NL> history record . set author ( security service . get current user ( ) ! = null ? security service . get current user ( ) . get username ( ) : " " ) ;  <NL> history record . set record date ( new date ( ) ) ;  <NL> history record . set page name ( page ) ;  <NL> history record . set attachment ( true ) ;  <NL>  <NL> history record dao . save ( history record ) ;  <NL>  }  COM: <s> create history record on attachment removal </s>