TDAT: public void detach ( ) {  <NL> if ( _ state ! = state _ attached ) {  <NL> throw new illegal state exception ( " work exec ctx is not attached ( " + _ state + " ) . " ) ;  <NL>  }  <NL> if ( get instance ( ) ! = this ) {  <NL> throw new illegal state exception ( " unbalanced attach / detach calls . " ) ;  <NL>  }  <NL> thread local _ s . set ( _ chain ) ;  <NL>  _ state = state _ unattached ;  <NL>  }  COM: <s> detaches this execution context from the thread </s>