TDAT: public void cleanup ( ) {  <NL> super . cleanup ( ) ;  <NL>  <NL> for ( world state state : states . values ( ) ) {  <NL> if ( state instanceof command change listener ) {  <NL> if ( get command stack ( ) ! = null )  <NL> get command stack ( )  <NL>  . remove command changed listener (  <NL>  ( command change listener ) state ) ;  <NL> if ( state instanceof i selection changed listener ) {  <NL>  ( ( world context ) get context ( ) ) . get selection manager ( )  <NL>  . remove selection changed listener (  <NL>  ( i selection changed listener ) state ) ;  <NL>  }  <NL>  }  <NL>  }  <NL>  }  COM: <s> perform the clean up here </s>