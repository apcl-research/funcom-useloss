TDAT: protected string format number ( double d ) {  <NL> decimal format nf = new decimal format ( ) ;  <NL> string ret ;  <NL>  / / if module of number is greater than 1e4 or lesser than 1e - 4 uses exponential notation <NL> if ( math . abs ( d ) > = 1e - 4 & & math . abs ( d ) < = 1e4 || d = = 0 ) {  <NL> nf . apply pattern ( " # . # # # # " ) ;  <NL> ret = nf . format ( d ) ;  <NL> if ( ret . length ( ) > 7 ) {  <NL> ret = ret . substring ( 0 , 6 ) ;  <NL>  }  <NL>  } else {  <NL> nf . apply pattern ( " 0 . 00e00 " ) ;  <NL> ret = nf . format ( d ) ;  <NL>  }  <NL> return ret ;  <NL>  }  COM: <s> helper method used to formats given number into string according to default rules </s>