TDAT: public void finish training ( ) throws exception {  <NL> models by type = new hash map < string , gis model > ( ) ;  <NL> for ( string type : events by type . key set ( ) ) {  <NL> data indexer di = null ;  <NL> list < event > evs = events by type . get ( type ) ;  <NL> if ( evs . size ( ) = = 1 ) evs . add ( evs . get ( 0 ) ) ;  <NL> di = new two pass data indexer ( new event collector as stream ( new simple event collector ( evs ) ) , 1 ) ;  <NL> models by type . put ( type , gis . train model ( training cycles , di ) ) ;  <NL>  }  <NL>  }  COM: <s> generate a new rescoring model </s>