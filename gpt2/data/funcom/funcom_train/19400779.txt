TDAT: protected void completed tx ( i tx tx ) throws illegal state exception {  <NL>  <NL> assert tx ! = null ;  <NL> assert tx . is complete ( ) ;  <NL>  <NL> long id = tx . get start timestamp ( ) ;  <NL>  <NL> i tx tx active = active tx . remove ( id ) ;  <NL>  <NL> i tx tx prepared = prepared tx . remove ( id ) ;  <NL>  <NL> if ( tx active = = null & & tx prepared = = null ) {  <NL>  <NL> throw new illegal state exception (  <NL>  " neither active nor being prepared : tx = " + tx ) ;  <NL>  <NL>  }  <NL>  <NL>  }  COM: <s> notify the journal that a transaction is completed either aborted or </s>