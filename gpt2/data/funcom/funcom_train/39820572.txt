TDAT: private connection cleanup ( ) throws hibernate exception {  <NL> try {  <NL> if ( should obtain connection ) {  <NL>  / / the connection was previously released ; nothing to do . . .  <NL> should obtain connection = false ;  <NL> return null ;  <NL>  }  <NL> else {  <NL> if ( connection = = null ) {  <NL> throw new hibernate exception ( " already disconnected " ) ;  <NL>  }  <NL>  <NL> batcher . close statements ( ) ;  <NL> connection c = null ;  <NL> if ( ! was connection supplied ) {  <NL> close connection ( ) ;  <NL>  }  <NL> else {  <NL> c = connection ;  <NL>  }  <NL> connection = null ;  <NL> return c ;  <NL>  }  <NL>  }  <NL> finally {  <NL> callback . connection cleaned up ( ) ;  <NL>  }  <NL>  }  COM: <s> releases the connection and cleans up any resources associated with </s>