TDAT: private void apply editor value and deactivate ( ) {  <NL>  / / must set the selection before getting value <NL> selection = combo box . get selection index ( ) ;  <NL> object new value = do get value ( ) ;  <NL> mark dirty ( ) ;  <NL> boolean is valid = is correct ( new value ) ;  <NL> set value valid ( is valid ) ;  <NL> if ( ! is valid ) {  <NL>  / / try to insert the current value into the error message .  <NL> set error message ( message format . format ( get error message ( ) , new object [ ] { items [ selection ] } ) ) ;  <NL>  }  <NL> fire apply editor value ( ) ;  <NL> deactivate ( ) ;  <NL>  }  COM: <s> applies the currently selected value and deactiavates the cell editor </s>