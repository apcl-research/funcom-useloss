TDAT: protected void force transaction ( ) {  <NL> if ( owner . is persistent ( ) ) {  <NL> transaction impl txn = ( transaction impl ) owner . get interface manager ( ) . current transaction ( ) ;  <NL> if ( txn . is active ( ) ) {  <NL> txn . attach relationship ( this ) ;  <NL> txn managed = true ;  <NL>  } else {  <NL> throw new jdo fatal user exception ( i18n . msg ( " e _ modify _ collection " ) ) ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> ensures that the proxy is registered in a transaction if necessary </s>