TDAT: public boolean allow leaf demotion ( ) {  <NL>  _ leaf tries + + ;  <NL>  <NL> if ( ultrapeer settings . force _ ultrapeer _ mode . get value ( ) || is active supernode ( ) )  <NL> return false ;  <NL> else if ( node assigner . get ( ) . is too good ultrapeer to pass up ( ) & & _ leaf tries < _ demotion limit )  <NL> return false ;  <NL> else <NL> return true ;  <NL>  }  COM: <s> returns true if this can safely switch from ultrapeer to leaf mode </s>