TDAT: public string save library ( ) {  <NL>  / * todo : dont forget to prepare changed entities e . g . set current user * /  <NL> prepare changes for persist prep = new prepare changes for persist ( user . get username ( ) ) ;  <NL>  <NL> selected req node = null ;  <NL> selected lib node = null ;  <NL> library tree = em . merge ( library tree ) ;  <NL> library tree . set name ( " mainlibrary " ) ;  <NL> em . persist ( library tree ) ;  <NL>  <NL>  / / todo : handle deleted librarytree nodes <NL>  <NL> return null ;  <NL>  }  COM: <s> persists the currently visible library </s>