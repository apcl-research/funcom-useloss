TDAT: public void shut down nodes ( ) {  <NL> update lock . wait for free and lock ( ) ;  <NL> nodes lock . write lock ( ) . lock ( ) ;  <NL> for ( node item n : nodes . values ( ) ) {  <NL> try {  <NL> n . get node ( ) . shut down ( ) ;  <NL>  } catch ( remote exception re ) {  <NL> log . event ( log . warning , " failed to shutdown node " + n . get id ( ) ) ;  <NL>  }  <NL>  }  <NL> nodes . clear ( ) ;  <NL> nodes lock . write lock ( ) . unlock ( ) ;  <NL> update lock . un lock ( ) ;  <NL>  }  COM: <s> shuts down all nodes </s>