TDAT: synchronized public r message next _ message ( ) {  <NL> int count = - 1 ;  <NL> while ( queue . size ( ) = = 0 ) {  <NL> if ( max seconds > = 0 & & + + count > = max seconds ) {  <NL>  / / system . out . println ( " timeout occurred : no input events for " + count + " seconds . . . " ) ;  <NL> return null ;  <NL>  }  <NL> try {  <NL> wait ( 1000 ) ;  <NL>  } catch ( interrupted exception exc ) {  <NL>  <NL>  }  <NL>  }  <NL> r message ret = ( r message ) queue . remove ( 0 ) ;  <NL> id + + ;  <NL> ret . assign _ conversation _ id ( agent + id ) ;  <NL>  / / system . out . println ( " rmsg = " + ret ) ;  <NL> return ret ;  <NL>  }  COM: <s> retrieve the next message from the queue </s>