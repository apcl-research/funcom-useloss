TDAT: private void ensure legacy parsed ( ) {  <NL> if ( ( legacy changed = = false ) || ( legacy strings = = null ) ) {  <NL> return ;  <NL>  }  <NL> service set = null ;  <NL> if ( legacy map = = null ) {  <NL> legacy map = new linked hash map < service key , service > ( ) ;  <NL>  } else {  <NL> legacy map . clear ( ) ;  <NL>  }  <NL> for ( map . entry < string , string > entry : legacy strings . entry set ( ) ) {  <NL> parse legacy put ( entry . get key ( ) , entry . get value ( ) ) ;  <NL>  }  <NL> remove invalid services ( legacy map ) ;  <NL> legacy changed = false ;  <NL>  }  COM: <s> ensure all the legacy string properties are fully parsed into </s>