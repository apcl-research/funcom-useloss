TDAT: protected int find closing delimiter ( i document document , char opening delimiter , char closing delimiter , int from offset ) {  <NL> try {  <NL> char ch ;  <NL> int offset = from offset ;  <NL> int length = document . get length ( ) - 1 ;  <NL> int nesting level = 1 ;  <NL> while ( offset < length ) {  <NL> ch = document . get char ( offset ) ;  <NL> if ( ch = = opening delimiter )  <NL> nesting level + + ;  <NL> if ( ch = = closing delimiter )  <NL> nesting level - - ;  <NL> if ( nesting level = = 0 )  <NL> return offset - 1 ;  <NL> offset + + ;  <NL>  }  <NL>  } catch ( bad location exception e ) {  <NL>  / / do nothing . the method will return - 1 .  <NL>  }  <NL> return - 1 ;  <NL>  }  COM: <s> answer the offset of the character before the closing delimiter </s>