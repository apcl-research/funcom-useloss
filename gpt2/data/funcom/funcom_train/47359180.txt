TDAT: private state space impl get state space if defined ( i type binding type ) {  <NL> map < string , state space impl > spaces = get spaces ( ) ;  <NL> while ( type ! = type . get type declaration ( ) )  <NL> type = type . get type declaration ( ) ;  <NL> string key = type . get key ( ) ;  <NL> state space impl result = spaces . get ( key ) ;  <NL> if ( result ! = null )  <NL> return result ;  <NL> result = build state space ( type , new hash map < i crystal annotation , set < string > > ( ) ) ;  <NL> if ( result ! = null )  <NL> spaces . put ( key , result ) ;  <NL> return result ;  <NL>  }  COM: <s> retrieves an existing state space or creates a new one </s>