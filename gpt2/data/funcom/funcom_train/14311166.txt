TDAT: public void send message ( final string message ) {  <NL> byte [ ] msg ;  <NL> if ( client ! = null ) {  <NL> msg = new message ( peer . get device name ( ) , message ) . to byte array ( ) ;  <NL> client . send ( msg ) ;  <NL>  } else if ( server ! = null ) {  <NL> msg = new message ( peer . get device name ( ) , message ) . to byte array ( ) ;  <NL> server . send buffer ( server . get client i ds ( ) . keys ( ) , ( byte ) - 1 , msg ) ;  <NL>  } else <NL> throw new illegal state exception ( " ibtu must be connected " ) ;  <NL>  }  COM: <s> sends a message </s>