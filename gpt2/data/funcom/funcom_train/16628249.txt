TDAT: public void apply align ( int alignment ) throws no selection exception , bad location exception {  <NL> int offset = get selection start ( ) ;  <NL> int end = get selection end ( ) ;  <NL> int len = end - offset ;  <NL> if ( len < 0 ) { throw new no selection exception ( ) ; }  <NL> boolean b = get xml note doc ( ) . set long edit ( true ) ;  <NL> get xml note doc ( ) . get undo manager ( ) . add edit ( new jxml note pane caret undoable edit ( this ) ) ;  <NL> get xml note doc ( ) . apply align ( alignment , offset , len ) ;  <NL> get xml note doc ( ) . get undo manager ( ) . set long edit ( b ) ;  <NL>  }  COM: <s> apply the code alignment code to the currently selected text </s>