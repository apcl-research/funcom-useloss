TDAT: public void write ( output stream output stream ) throws io exception {  <NL> write line ( output stream , name ) ;  <NL> for ( entry < string , string > field entry : fields . entry set ( ) ) {  <NL> write line ( output stream , field entry . get key ( ) + " = " + field entry . get value ( ) ) ;  <NL>  }  <NL> write line ( output stream , " end message " ) ;  <NL> output stream . flush ( ) ;  <NL> if ( payload input stream ! = null ) {  <NL> fcp utils . copy ( payload input stream , output stream ) ;  <NL> output stream . flush ( ) ;  <NL>  }  <NL>  }  COM: <s> writes this message to the given output stream </s>