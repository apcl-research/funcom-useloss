TDAT: private int set completion ( int completion ) {  <NL> for ( int s ; ; ) {  <NL> if ( ( s = status ) < 0 )  <NL> return s ;  <NL> if ( unsafe . compare and swap int ( this , status offset , s , completion ) ) {  <NL> if ( s ! = 0 )  <NL> synchronized ( this ) { notify all ( ) ; }  <NL> return completion ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> marks completion and wakes up threads waiting to join this task </s>