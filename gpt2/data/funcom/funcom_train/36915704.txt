TDAT: public void stop ( ) {  <NL> send all ( new message ( " closed " ) ) ;  <NL>  <NL> while ( broadcast dispatcher . size ( ) > 0 ) {  <NL> try {  <NL> thread . sleep ( 10 ) ;  <NL>  } catch ( interrupted exception ex ) { }  <NL>  }  <NL>  <NL> try {  <NL> socket . close ( ) ;  <NL> while ( ! socket . is closed ( ) ) { }  <NL>  } catch ( io exception ex ) {  <NL> system . out . println ( " [ server ] could not close connection , its probably been closed for us . . . " ) ;  <NL>  }  <NL>  <NL> listening = false ;  <NL>  }  COM: <s> stops listening and closes all existing connections </s>