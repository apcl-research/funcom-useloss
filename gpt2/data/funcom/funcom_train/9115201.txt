TDAT: public void write to ( output stream os ) throws io exception , messaging exception {  <NL> if ( ( message = = null ) || ! is modified ( ) ) {  <NL>  / / we do not want to instantiate the message . . . just read from source <NL>  / / and write to this outputstream <NL> input stream in = source . get input stream ( ) ;  <NL>  <NL> try {  <NL> copy stream ( in , os ) ;  <NL>  } finally {  <NL> io utils . close quietly ( in ) ;  <NL>  }  <NL>  } else {  <NL> write to ( os , os ) ;  <NL>  }  <NL>  }  COM: <s> rewritten for optimization purposes </s>