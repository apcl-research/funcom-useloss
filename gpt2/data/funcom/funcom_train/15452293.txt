TDAT: public chat get chat ( string to user id ) {  <NL>  <NL> string protocol complement = " @ " + xmpp connection . get service name ( ) ;  <NL>  <NL> chat chat = ( chat ) current chats . get ( to user id ) ;  <NL> if ( chat = = null ) {  <NL> chat = init chat ( to user id + protocol complement ) ;  <NL> current chats . put ( to user id , chat ) ;  <NL>  }  <NL>  <NL> remove used chat ( to user id ) ;  <NL> used chats . put ( new date ( ) , to user id ) ;  <NL>  <NL> return chat ;  <NL>  }  COM: <s> returns the chat </s>