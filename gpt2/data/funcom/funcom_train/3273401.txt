TDAT: public float recharge energy ( float energy to use ) {  <NL> if ( is functioning ( ) ) {  <NL> float diff = this . units max - this . units ;  <NL> float increase energy = math . min ( energy to use , diff * power cost per unit ) ;  <NL> float units increase = increase energy / power cost per unit ;  <NL> this . units + = units increase ;  <NL> energy to use - = units increase * power cost per unit ;  <NL>  }  <NL>  <NL> return energy to use ;  <NL>  }  COM: <s> recharge the shields as much as possible given the allotted </s>