TDAT: public friendship add friend ( web context ctx , user account friend ) {  <NL> if ( ( friend = = null ) || friend . get id ( ) . equals ( get id ( ) ) ) {  <NL> return null ;  <NL>  }  <NL>  <NL> friendship friendship = get friend ( friend . get id ( ) ) ;  <NL>  <NL> if ( friendship = = null ) {  <NL> friendship = friendship . create friend ship ( ctx , this , friend , " friend " ) ;  <NL> refresh friends ( ) ;  <NL> friend . refresh friends ( ) ;  <NL>  }  <NL>  <NL> return friendship ;  <NL>  }  COM: <s> adds a friend </s>