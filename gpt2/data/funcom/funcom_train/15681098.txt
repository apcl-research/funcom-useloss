TDAT: public void update ( object obj , byte buffer buffer ) {  <NL> if ( obj = = null ) {  <NL> buffer . put ( serialization constants . null _ block ) ;  <NL> return ;  <NL>  }  <NL> integer object id = ( integer ) object to id . get ( obj ) ;  <NL> if ( object id = = null ) {  <NL> serialize new object ( obj , buffer ) ;  <NL>  } else {  <NL>  / / if this object has already gone , its class must have been serialized <NL> class clazz = obj . get class ( ) ;  <NL> serializer serializer = generator . get serializer ( clazz ) ;  <NL> buffer . put ( serialization constants . object _ update _ block ) ;  <NL> buffer . put int ( object id . int value ( ) ) ;  <NL> serializer . serialize ( obj , buffer , this ) ;  <NL>  }  <NL>  }  COM: <s> serializes a new state for an object </s>