TDAT: protected boolean calculate visibility ( ) {  <NL> player player = controller . whoami ( ) ;  <NL> if ( player = = null )  <NL> return false ; / / should not happen <NL>  <NL> if ( player . equals ( owner ) )  <NL> return true ;  <NL>  <NL> if ( player . is omniscient ( ) )  <NL> return true ;  <NL>  <NL> universe universe = controller . get universe ( ) ;  <NL> star system star = universe . get star system at ( position ) ;  <NL> if ( star ! = null ) {  <NL> if ( star . is occupied by ( player ) )  <NL> return true ;  <NL>  <NL> if ( star . own ship in orbit ( ship . class ) )  <NL> return true ;  <NL>  }  <NL>  <NL>  / / fixme [ todo ] : check if this ship can be seen <NL> return false ;  <NL>  }  COM: <s> calculates the visibility of this ship </s>