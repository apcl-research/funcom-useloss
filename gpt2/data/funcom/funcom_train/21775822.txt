TDAT: private position compute position ( ast node node , i document doc ) {  <NL> try {  <NL> int start = doc . get line offset ( node . get line ( ) - 1 )  <NL>  + node . get offset ( ) ;  <NL> int end ;  <NL> if ( node . get line ( ) = = node . get end line ( ) )  <NL> end = node . get text ( ) . length ( ) ;  <NL> else <NL> end = doc . get line offset ( node . get end line ( ) + 1 ) - start ;  <NL> return new position ( start , end ) ;  <NL>  } catch ( bad location exception e ) {  <NL> e . print stack trace ( ) ;  <NL> return null ;  <NL>  }  <NL>  }  COM: <s> this is kinda hackish because the last character in a block is not </s>