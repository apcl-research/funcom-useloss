TDAT: private int get selection length ( selection selection ) {  <NL>  <NL> int length = 0 ;  <NL> int token index = selection . start token index ;  <NL> int base char index = selection . start character index ;  <NL>  <NL> while ( token index < = selection . end token index ) {  <NL> token token = this . reading result . get tokens ( ) . get ( token index ) ;  <NL> int token length = ( token index = = selection . end token index ) ? selection . end character index + 1 : token . get length ( ) ;  <NL> length + = ( token length - base char index ) ;  <NL>  <NL> base char index = 0 ;  <NL> token index + + ;  <NL>  }  <NL>  <NL> return length ;  <NL>  <NL>  }  COM: <s> calculates the length in characters of a selection </s>