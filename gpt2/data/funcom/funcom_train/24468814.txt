TDAT: public void write tag ( tag tag ) throws io exception {  <NL> int type = nbt utils . get type code ( tag . get class ( ) ) ;  <NL> string name = tag . get name ( ) ;  <NL> byte [ ] name bytes = name . get bytes ( nbt constants . charset ) ;  <NL>  <NL> os . write byte ( type ) ;  <NL> os . write short ( name bytes . length ) ;  <NL> os . write ( name bytes ) ;  <NL>  <NL> if ( type = = nbt constants . type _ end ) {  <NL> throw new io exception ( " named tag _ end not permitted . " ) ;  <NL>  }  <NL>  <NL> write tag payload ( tag ) ;  <NL>  }  COM: <s> writes a tag </s>