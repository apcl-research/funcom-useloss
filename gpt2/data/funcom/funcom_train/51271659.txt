TDAT: public void finished draining ( gatekeeper old gk ) throws mx query exception {  <NL> if ( last control element type = = query . ctl _ change _ ddchange ) {  <NL> apply i change ( old gk , new version ) ;  <NL>  }  <NL> else if ( last control element type = = query . ctl _ change _ sdchange || last control element type = = query . ctl _ change _ qdchange || last control element type = = query . ctl _ change _ gdchange ) {  <NL>  / / todo : benchmark related <NL>  / / bf . set last old ( ) ;  <NL> merger . end parallelism ( ) ;  <NL>  } else {  <NL> q . execution state = query . execution _ state _ stopped ;  <NL>  }  <NL>  }  COM: <s> this method is called by the gatekeeper that has just finished its draining </s>