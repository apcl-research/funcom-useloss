TDAT: public expression evaluate up ( method call p ) throws parse tree exception {  <NL>  {  <NL> oj class reftype =  <NL> compute ref type ( p . get reference type ( ) , p . get reference expr ( ) ) ;  <NL> if ( reftype ! = get self type ( ) ) {  <NL> expression newp = reftype . expand method call ( get environment ( ) , p ) ;  <NL> if ( newp ! = p )  <NL> return newp ;  <NL>  }  <NL>  }  <NL>  {  <NL> oj class type = get type ( p ) ;  <NL> expression newp = type . expand expression ( get environment ( ) , p ) ;  <NL> if ( ! ( newp instanceof method call ) )  <NL> return newp ;  <NL> p = ( method call ) newp ;  <NL>  }  <NL> return super . evaluate up ( p ) ;  <NL>  }  COM: <s> includes expand method call and expand expression </s>