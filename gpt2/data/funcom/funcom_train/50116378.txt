TDAT: public void save diagram as png ( output stream os ) throws io exception {  <NL> image img = create image ( get width ( ) , get height ( ) ) ;  <NL> boolean grid = is grid visible ( ) ;  <NL> set grid visible ( false ) ;  <NL> paint ( img . get graphics ( ) ) ;  <NL> set grid visible ( grid ) ;  <NL>  <NL> png encoder png = new png encoder ( img ) ;  <NL> png . set compression level ( 9 ) ;  <NL> byte [ ] bytes = png . png encode ( ) ;  <NL> if ( bytes = = null ) {  <NL> log . error ( " png encoder couldn ' t encode the diagram . " ) ;  <NL>  }  <NL> else {  <NL> os . write ( bytes ) ;  <NL> os . flush ( ) ;  <NL> os . close ( ) ;  <NL>  }  <NL>  }  COM: <s> saves current diagram as a png image </s>