TDAT: public int get difference ( trading date date ) {  <NL> int diff = 0 ;  <NL> boolean forward dir ;  <NL> trading date tmp ;  <NL>  <NL> if ( compare to ( date ) = = 0 ) {  <NL> return 0 ;  <NL>  } else if ( compare to ( date ) < 0 ) {  <NL> forward dir = false ;  <NL>  } else {  <NL> forward dir = true ;  <NL>  }  <NL>  <NL> tmp = weekend shift ( date , forward dir ) ;  <NL> if ( forward dir ) {  <NL> while ( this . compare to ( tmp ) ! = 0 ) {  <NL> tmp = tmp . next ( 1 ) ;  <NL> diff + + ;  <NL>  }  <NL>  } else {  <NL> while ( this . compare to ( tmp ) ! = 0 ) {  <NL> tmp = tmp . previous ( 1 ) ;  <NL> diff + + ;  <NL>  }  <NL>  }  <NL>  <NL> return diff ;  <NL>  }  COM: <s> return the number of trading days between this date and a given date </s>