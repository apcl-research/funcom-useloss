TDAT: private void commit text ( int layer ) {  <NL> string tmp = m composing text . to string ( layer ) ;  <NL>  <NL> if ( m opt learning & & m converter ! = null & & tmp . length ( ) > 0 ) {  <NL> wnn word word = new wnn word ( tmp , tmp ) ;  <NL> m converter . learn ( word ) ;  <NL>  }  <NL>  <NL> m input connection . commit text ( tmp , ( fix _ cursor _ text _ end ? 1 : tmp . length ( ) ) ) ;  <NL> m candidates view manager . clear candidates ( ) ;  <NL>  }  COM: <s> commit the composing text </s>