TDAT: public void send document ( document doc , simulation state state ) {  <NL> doc1 = doc ;  <NL> new thread ( ) {  <NL> public void run ( ) {  <NL> try {  <NL>  / / doc1 = backup writer . create document ( ) ;  <NL>  / / this . generate document ( doc1 , state ) ;  <NL> log ( loglevel _ normal , " sending xml to flash server . . . . " ) ;  <NL> stub . update game state ( doc1 ) ;  <NL>  <NL>  } catch ( remote exception e ) {  <NL> log ( loglevel _ critical , " cannot send document : remote exception . . . " ) ;  <NL> flash server running = false ;  <NL>  / / e . print stack trace ( ) ;  <NL>  }  <NL>  }  <NL>  } . start ( ) ;  <NL>  }  COM: <s> generate doc document and </s>