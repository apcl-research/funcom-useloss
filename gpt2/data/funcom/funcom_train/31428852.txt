TDAT: public int write ( byte [ ] buffer , int offset ) {  <NL> int start offset = offset ;  <NL>  <NL> byte flag = 0 ;  <NL> if ( last extension ) {  <NL> flag = set bit ( flag , 7 ) ;  <NL>  }  <NL> if ( encoded ) {  <NL> flag = set bit ( flag , 6 ) ;  <NL>  }  <NL> if ( compressed ) {  <NL> flag = set bit ( flag , 5 ) ;  <NL>  }  <NL> flag | = extension id . get length ( ) ;  <NL>  <NL> buffer [ offset + + ] = flag ;  <NL>  <NL> byte [ ] id bytes = extension id . get bytes ( ) ;  <NL>  <NL> system . arraycopy ( id bytes , 0 , buffer , offset , id bytes . length ) ;  <NL>  <NL> offset + = id bytes . length ;  <NL>  <NL> return offset - start offset ;  <NL>  }  COM: <s> writes the flags and the id </s>