TDAT: public void write document ( final output stream os ) throws exception {  <NL> assert os ! = null ;  <NL> dom implementation registry dom reg ;  <NL> dom implementation ls ls impl ;  <NL> ls serializer serialiser ;  <NL> ls output ls output ;  <NL>  <NL> dom reg = dom implementation registry . new instance ( ) ;  <NL> ls impl = ( dom implementation ls ) dom reg . get dom implementation ( " ls " ) ;  <NL> serialiser = ls impl . create ls serializer ( ) ;  <NL> ls output = ls impl . create ls output ( ) ;  <NL> ls output . set encoding ( " utf - 8 " ) ;  <NL> ls output . set byte stream ( os ) ;  <NL> serialiser . write ( doc , ls output ) ;  <NL>  }  COM: <s> serialise the pre processed document to a file </s>