TDAT: protected void set priority ( internal job job , int new priority ) {  <NL> synchronized ( lock ) {  <NL> int old priority = job . get priority ( ) ;  <NL> if ( old priority = = new priority )  <NL> return ;  <NL> job . internal set priority ( new priority ) ;  <NL>  / / if the job is waiting to run , reshuffle the queue <NL> if ( job . get state ( ) = = job . waiting ) {  <NL> long old start = job . get start time ( ) ;  <NL> job . set start time ( old start + ( delay for ( new priority ) - delay for ( old priority ) ) ) ;  <NL> waiting . resort ( job ) ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> changes a job priority </s>