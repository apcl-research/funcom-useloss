TDAT: protected affine transform get arrow trans ( final point2d p1 , final point2d p2 , final double width ) {  <NL> arrow trans . set to translation ( p2 . get x ( ) , p2 . get y ( ) ) ;  <NL> arrow trans . rotate ( - half _ pi + math . atan2 ( p2 . get y ( ) - p1 . get y ( ) , p2 . get x ( ) - p1 . get x ( ) ) ) ;  <NL> if ( width > 1 ) {  <NL> final double scalar = width / 4 ;  <NL> arrow trans . scale ( scalar , scalar ) ;  <NL>  }  <NL> return arrow trans ;  <NL>  }  COM: <s> returns an affine transformation that maps the arrowhead shape to the position and </s>