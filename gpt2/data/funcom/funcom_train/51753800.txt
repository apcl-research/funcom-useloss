TDAT: public void register attack ( unit unit , unit target ) throws illegal attack exception {  <NL> if ( ! unit . can hit ( target . loc ) ) throw new illegal attack exception ( ) ; / / cant hit target <NL> for ( damage d : attacks ) {  <NL> if ( d . get src unit ( ) . equals ( unit ) ) throw new illegal attack exception ( " unit already attacked " ) ; / / unit already attacked <NL>  }  <NL> attacks . add ( new damage ( unit . get damage ( ) , unit , target ) ) ;  <NL>  }  COM: <s> registers an attack for one unit to hit another one attack per round </s>