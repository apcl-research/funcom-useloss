TDAT: public void get an endpoint ( endpoint observer observer ) {  <NL> endpoint p ;  <NL>  <NL>  / / we can only lock around endpoint retrieval & _ catchers waiting ,  <NL>  / / we don ' t want to expose our lock to the observer .  <NL> synchronized ( this ) {  <NL> p = get an endpoint internal ( ) ;  <NL> if ( p = = null )  <NL>  _ catchers waiting . add ( observer ) ;  <NL>  }  <NL>  <NL> if ( p ! = null )  <NL> observer . handle endpoint ( p ) ;  <NL>  }  COM: <s> passes the next available endpoint to the endpoint observer </s>