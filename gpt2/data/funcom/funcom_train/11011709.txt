TDAT: public void test nested function if ( ) {  <NL> ptg [ ] ptgs = parse formula ( " if ( a1 = b1 , average ( a1 : b1 ) , average ( a2 : b2 ) ) " ) ;  <NL> assert equals ( 11 , ptgs . length ) ;  <NL>  <NL> assert true ( " if attr set correctly " , ( ptgs [ 3 ] instanceof attr ptg ) ) ;  <NL> attr ptg if func = ( attr ptg ) ptgs [ 3 ] ;  <NL> assert true ( " it is not an if " , if func . is optimized if ( ) ) ;  <NL>  <NL> assert true ( " average function set correctly " , ( ptgs [ 5 ] instanceof func var ptg ) ) ;  <NL>  }  COM: <s> make sure the ptgs are generated properly with two functions embedded </s>