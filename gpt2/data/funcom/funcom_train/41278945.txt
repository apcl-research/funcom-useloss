TDAT: protected void read payload ( ) throws io exception {  <NL>  _ data _ stream . skip bytes ( push cache protocol . command _ len ) ;  <NL> int rlen = _ data _ stream . read int ( ) ;  <NL>  <NL> if ( rlen = = 0 ) {  <NL> return ;  <NL>  }  <NL>  _ text _ buffer = new byte [ rlen ] ;  <NL>  <NL> int sofar = 0 ;  <NL> int toread = rlen ;  <NL>  <NL> sofar = 0 ;  <NL> toread = rlen ;  <NL> int rv = - 1 ;  <NL> while ( toread > 0 ) {  <NL> rv = _ in . read ( _ text _ buffer , sofar , toread ) ;  <NL> if ( rv < 0 ) {  <NL> throw new io exception ( " read returned " + rv ) ;  <NL>  }  <NL> sofar + = rv ;  <NL> toread - = rv ;  <NL>  }  <NL>  _ data _ stream = new data input stream ( new <NL> byte array input stream ( _ text _ buffer ) ) ;  <NL>  }  COM: <s> read remaining payload length bytes into buffer </s>