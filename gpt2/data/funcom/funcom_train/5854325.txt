TDAT: synchronized public events get last n with matching metadata ( int n , metadata metadata ) {  <NL> events events = new events ( ) ;  <NL> history item this hi ;  <NL> event e ;  <NL>  / / test bounds on this for loop .  <NL> for ( int i = history _ items . size ( ) - 1 , j = 0 ; i > = 0 & & j < n ; i - - , j + + ) {  <NL> this hi = ( history item ) history _ items . get ( i ) ;  <NL> e = this hi . event ;  <NL> if ( e . does metadata match ( metadata ) )  <NL> events . add ( e ) ;  <NL>  }  <NL> return events ;  <NL>  }  COM: <s> get last n events with metadata exactly matching the given metadata items </s>