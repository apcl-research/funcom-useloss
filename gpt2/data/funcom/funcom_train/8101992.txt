TDAT: public void combine gradients ( collection < double [ ] > batch gradients , double [ ] buffer ) {  <NL> assert ( buffer . length = = crf . parameters . get num factors ( ) )  <NL>  : " incorrect buffer length : " + buffer . length + " , expected : " + crf . parameters . get num factors ( ) ;  <NL>  <NL> for ( double [ ] gradient : batch gradients ) {  <NL> matrix ops . plus equals ( buffer , gradient ) ;  <NL>  }  <NL>  / / - ( . . . ) from get batch value gradient <NL> matrix ops . times equals ( buffer , - 1 . 0 ) ;  <NL>  }  COM: <s> adds gradients from all batches </s>