TDAT: private void update positions on insert ( int offset , int length ) {  <NL> list iterator < weak reference < simple position > > positions it = positions <NL>  . list iterator ( ) ;  <NL>  <NL> while ( positions it . has next ( ) ) {  <NL> simple position p = positions it . next ( ) . get ( ) ;  <NL>  <NL> if ( p = = null ) {  <NL> positions it . remove ( ) ;  <NL>  <NL>  } else if ( p . offset > offset ) {  <NL>  / / a position that pointed behind the insertion point .  <NL> logger . debug ( " update position at " + p . offset ) ;  <NL> p . offset + = length ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> recalculates the offset of all positions after text was inserted </s>