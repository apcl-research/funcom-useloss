TDAT: private void run event loop ( shell loop shell ) {  <NL>  / / use the display provided by the shell if possible <NL> display display ;  <NL> if ( get shell ( ) = = null ) {  <NL> display = display . get current ( ) ;  <NL>  }  <NL> else {  <NL> display = loop shell . get display ( ) ;  <NL>  }  <NL>  <NL> while ( loop shell ! = null & & ! loop shell . is disposed ( ) ) {  <NL> try {  <NL> if ( ! display . read and dispatch ( ) ) {  <NL> display . sleep ( ) ;  <NL>  }  <NL>  }  <NL> catch ( throwable e ) {  <NL> workbench error handler . log exception ( e ) ;  <NL>  }  <NL>  }  <NL>  <NL> display . update ( ) ;  <NL>  }  COM: <s> bad coded copied from code window code </s>