TDAT: public boolean commit ( ) {  <NL> try {  <NL> if ( ! write set . is empty ( ) ) {  <NL> int new clock = clock . increment and get ( ) ;  <NL> if ( new clock ! = lb + 1 & & ! read set . validate ( id ) ) {  <NL> write set . rollback ( ) ; / / release locks <NL> return false ;  <NL>  }  <NL>  / / write values and release locks <NL> write set . commit ( new clock ) ;  <NL>  }  <NL> return true ;  <NL>  }  <NL> finally {  <NL> if ( irrevocable state ) {  <NL> irrevocable state = false ;  <NL> irrevocable access lock . write lock ( ) . unlock ( ) ;  <NL>  }  <NL> else {  <NL> irrevocable access lock . read lock ( ) . unlock ( ) ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> the end delimiter of the transaction </s>