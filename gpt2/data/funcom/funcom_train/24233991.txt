TDAT: protected void send udt packet ( byte [ ] data , int timeout , time unit units ) throws io exception , interrupted exception {  <NL> if ( ! started ) start ( ) ;  <NL> data packet packet = null ;  <NL> do {  <NL> packet = flow window . get for producer ( ) ;  <NL> if ( packet = = null ) {  <NL> thread . sleep ( 10 ) ;  <NL>  / / system . out . println ( " queue full : " + flow window ) ;  <NL>  }  <NL>  } while ( packet = = null ) ;  <NL> try {  <NL> packet . set packet sequence number ( get next sequence number ( ) ) ;  <NL> packet . set session ( session ) ;  <NL> packet . set destination id ( session . get destination ( ) . get socket id ( ) ) ;  <NL> packet . set data ( data ) ;  <NL>  } finally {  <NL> flow window . produce ( ) ;  <NL>  }  <NL>  }  COM: <s> writes a data packet waiting at most for the specified time </s>