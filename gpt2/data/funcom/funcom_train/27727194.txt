TDAT: public boolean visible ( vector n losu , vector n r , vector n r iss ) {  <NL>  <NL>  / / check elevation mask <NL> boolean visible = elev . visible ( losu , r , r iss ) ;  <NL>  <NL>  / / check iss visibility <NL> vector n rrel = r iss . minus ( r ) ;  <NL> double dist = rrel . mag ( ) ;  <NL> double cone = math . atan2 ( iss radius , dist ) ;  <NL> vector n rel = rrel . unit vector ( ) ;  <NL> double cos _ delta = rel . dot product ( losu ) ;  <NL> double delta = math . acos ( cos _ delta ) ;  <NL> if ( delta < cone ) {  <NL> visible = false ;  <NL>  }  <NL>  <NL> return visible ;  <NL>  }  COM: <s> determine if the gps satellite is visible including iss blockage </s>