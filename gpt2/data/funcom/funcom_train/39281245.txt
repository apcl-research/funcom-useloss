TDAT: public void close ( final i sink comp q ) throws sink closed exception {  <NL>  / / xxx for now , allow a connection to be closed multiple times .  <NL>  / / tricky bit below : provide anonymous i sink as ' comp q ' which <NL>  / / we re - enqueue onto user comp q as appropriate sink drained event !  <NL>  <NL> hs . cleanup connection ( this ) ;  <NL> tcpconn . close ( new simple sink ( ) {  <NL> public void enqueue ( i element qel ) throws sink exception {  <NL> comp q . enqueue ( new sink closed event ( http connection . this ) ) ;  <NL>  }  <NL>  } ) ;  <NL>  }  COM: <s> close the connection </s>