TDAT: protected void update statistics ( long n ) {  <NL> time instant now = present time ( ) ;  <NL>  _ w sum avail = _ w sum avail <NL>  + ( ( double ) _ avail * time operations . diff ( now , _ last usage )  <NL>  . get time in epsilon ( ) ) ;  <NL>  <NL>  _ last usage = now ;  <NL>  _ avail + = n ; / / n can be positive or negative <NL>  <NL> if ( n > 0 ) / / it is a real producer <NL>  {  <NL>  _ producers + + ;  <NL> if ( _ avail > _ maximum ) {  <NL>  _ maximum = _ avail ;  <NL>  }  <NL>  } else / / it is a consumer <NL>  {  <NL>  _ consumers + + ;  <NL>  }  <NL>  }  COM: <s> updates the statistics for producers and consumers </s>