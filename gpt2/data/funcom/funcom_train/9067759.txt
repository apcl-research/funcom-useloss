TDAT: protected void add new book ( ) {  <NL> moving box receiving box ;  <NL> if ( tree viewer . get selection ( ) . is empty ( ) ) {  <NL> receiving box = root ;  <NL>  } else {  <NL> i structured selection selection = ( i structured selection ) tree viewer . get selection ( ) ;  <NL> model selected domain object = ( model ) selection . get first element ( ) ;  <NL> if ( ! ( selected domain object instanceof moving box ) ) {  <NL> receiving box = selected domain object . get parent ( ) ;  <NL>  } else {  <NL> receiving box = ( moving box ) selected domain object ;  <NL>  }  <NL>  }  <NL> receiving box . add ( book . new book ( ) ) ;  <NL>  }  COM: <s> add a new book to the selected moving box </s>