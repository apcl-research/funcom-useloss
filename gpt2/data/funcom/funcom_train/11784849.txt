TDAT: public string read ( string separator ) {  <NL> undoposition = position ;  <NL> if ( is empty ( ) ) return null ;  <NL> final int n = buffer . index of ( separator , position ) ;  <NL> if ( n < 0 ) {  <NL> final string result = buffer . substring ( position ) ;  <NL> position = size ;  <NL> return result ;  <NL>  } else {  <NL> final string result = buffer . substring ( position , n ) ;  <NL> position = n + separator . length ( ) ;  <NL> return result ;  <NL>  }  <NL>  }  COM: <s> reads substring terminated by either separator or buffers end </s>