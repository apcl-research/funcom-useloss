TDAT: public long get chars ( long buf , long buflen , string str , int start , int len ) {  <NL> string substr = str . substring ( start , start + len ) ;  <NL> long addr = get chars ( substr ) ;  <NL> malloc . memcpy ( buf , addr , math . min ( buflen , ( substr . length ( ) + 1 ) * 2 ) ) ;  <NL> malloc . free ( addr ) ;  <NL> return buf ;  <NL>  }  COM: <s> copies len utf16 unicode encoded chars or buflen bytes whichever is </s>