TDAT: private purse state take action global ( purse state global current state ) {  <NL>  <NL> purse state new state = current state ; / / assume no change in state <NL>  <NL> if ( current state = = purse state . want _ quit ) {  <NL> log ( " will quit now " ) ;  <NL> new state = purse state . cmd _ exit ;  <NL>  }  <NL>  / / with any other valid states , simply do nothing <NL>  <NL> return new state ;  <NL>  }  COM: <s> process at the global state level </s>