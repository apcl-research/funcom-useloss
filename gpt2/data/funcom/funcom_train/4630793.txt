TDAT: private void drain output ( ) throws io exception {  <NL> if ( ( ( ready ops & selection key . op _ write ) ! = 0 )  <NL>  & & ( ! output queue . is empty ( ) ) )  <NL>  {  <NL> output queue . drain to ( ( writable byte channel ) channel ) ;  <NL>  }  <NL>  <NL>  / / write selection is turned on when output data in enqueued ,  <NL>  / / turn it off when the queue becomes empty .  <NL> if ( output queue . is empty ( ) ) {  <NL> disable write selection ( ) ;  <NL>  <NL> if ( shutting down ) {  <NL> channel . close ( ) ;  <NL> client handler . unregistered ( this ) ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> if there is output queued and the channel is ready to </s>