TDAT: public void lock ( ) throws io exception , x base j exception {  <NL>  <NL> long this wait = file lock wait / 5 ;  <NL>  <NL> for ( long waitloop = file lock wait ;  <NL> waitloop > 0 ;  <NL> waitloop - = this wait ) {  <NL> filelock = channel . try lock ( 0 , ffile . length ( ) , use shared locks ) ;  <NL>  <NL>  <NL> if ( filelock ! = null )  <NL> return ;  <NL>  <NL> synchronized ( this ) {  <NL> try {  <NL> wait ( this wait ) ;  <NL>  } catch ( interrupted exception ie ) {  <NL>  ;  <NL>  }  <NL>  } / / sync <NL>  <NL>  }  <NL>  <NL> throw new x base j exception ( " file lock wait timed out " ) ;  <NL>  <NL>  }  COM: <s> locks the entire database </s>