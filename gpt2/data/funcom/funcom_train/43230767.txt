TDAT: private void do login ( final user user , final role role ) {  <NL> this . current user = user ;  <NL> cookies . set cookie ( session controller . current _ user , user . get name ( ) ) ;  <NL> cookies . set cookie ( session controller . current _ role , role . get id ( ) ) ;  <NL> try {  <NL> this . set active role ( role ) ;  <NL>  } catch ( final consistency exception e ) {  <NL> cookies . remove cookie ( session controller . current _ user ) ;  <NL> cookies . remove cookie ( session controller . current _ role ) ;  <NL> this . login ( ) ;  <NL>  }  <NL>  <NL> this . event bus . publish ( new login event ( user , role ) ) ;  <NL>  <NL>  }  COM: <s> sets the current user and fires the login event </s>