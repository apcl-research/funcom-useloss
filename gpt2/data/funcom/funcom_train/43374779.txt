TDAT: public void close ( ) throws io exception {  <NL> int attempts = num attempts - 1 ; / / fail fast if flush ( ) does times out <NL> try {  <NL> out . flush ( ) ;  <NL> attempts = 0 ;  <NL>  } finally {  <NL> boolean stop = false ;  <NL> while ( ! stop ) {  <NL> try {  <NL> out . close ( ) ;  <NL> stop = true ;  <NL>  } catch ( interrupted io exception e ) {  <NL> if ( check cancellation ( ) )  <NL> return ;  <NL> if ( + + attempts = = num attempts )  <NL> throw new interrupted io exception ( " close timeout " ) ; / / $ non - nls - 1 $  <NL>  <NL>  }  <NL>  }  <NL>  }  <NL>  }  COM: <s> calls flush then close on the underlying stream </s>