TDAT: public int register node ( node ri node ) throws remote exception {  <NL> update lock . wait for free and lock ( ) ;  <NL> nodes lock . write lock ( ) . lock ( ) ;  <NL>  <NL> int id = max node id + + ;  <NL> node item new node = new node item ( id , node ) ;  <NL> nodes . put ( id , new node ) ;  <NL>  <NL> init node ( new node ) ;  <NL> update lock . un lock ( ) ;  <NL> nodes lock . write lock ( ) . unlock ( ) ;  <NL> log . event ( " registered another node " + new node . get id ( ) ) ;  <NL> return id ;  <NL>  }  COM: <s> registers node to cluster </s>