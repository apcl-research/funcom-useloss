TDAT: public void add atom ( x term term ) throws x failure {  <NL> if ( ! consistent ) return ;  <NL> valid = false ;  <NL> if ( roots = = null ) roots = collection factory . < x native term , x promise > new hash map ( ) ;  <NL> x native term t = ( x native term ) term ;  <NL> x promise p = t . nfp ( this ) ;  <NL> if ( p ! = null ) return ; / / nothing to do <NL> p = intern ( t ) ;  <NL>  }  COM: <s> add an atomic formula to the constraint </s>