TDAT: public void set previous snapshot ( snapshot snap ) {  <NL> if ( snap . get branch ( ) ! = this . get branch ( ) ) {  <NL> throw new repository exception ( " attempt to set previous snapshot to a snapshot on a different branch . " ) ;  <NL>  }  <NL> this . effective versions = snap . get visible versions ( ) ;  <NL> this . previous snapshot = snap ;  <NL>  }  COM: <s> sets the previous snapshot </s>