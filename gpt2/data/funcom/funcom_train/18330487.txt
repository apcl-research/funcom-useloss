TDAT: private void write state ( ) {  <NL> byte array output stream os = new byte array output stream ( ) ;  <NL> xml encoder encoder = new xml encoder ( os ) ;  <NL> encoder . write object ( state bean ) ;  <NL> encoder . close ( ) ;  <NL> try {  <NL> file contents fc = jnlp pref ( true ) ;  <NL> if ( fc . can write ( ) ) {  <NL> os . write to ( fc . get output stream ( false ) ) ;  <NL>  }  <NL>  } catch ( exception ex ) {  <NL> preferences p = java pref ( ) ;  <NL> p . put byte array ( " state " , os . to byte array ( ) ) ;  <NL>  }  <NL>  }  COM: <s> writes the state to file </s>