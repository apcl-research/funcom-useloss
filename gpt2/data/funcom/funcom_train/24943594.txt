TDAT: public and get and ( collection < bus > buses ) {  <NL> final set < bus > unique buses = new linked hash set < bus > ( buses ) ;  <NL> and and = and map . get ( unique buses ) ;  <NL> if ( and = = null ) {  <NL>  <NL>  / / and = new and ( buses . size ( ) ) ;  <NL> and = new and ( unique buses . size ( ) ) ;  <NL> int i = 0 ;  <NL> for ( bus bus : unique buses ) {  <NL> port port = and . get data ports ( ) . get ( i ) ;  <NL> port . set bus ( bus ) ;  <NL> i + + ;  <NL>  }  <NL> and . propagate values forward ( ) ;  <NL> and map . put ( unique buses , and ) ;  <NL>  }  <NL> return and ;  <NL>  }  COM: <s> returns an and with the set of buses as inputs </s>