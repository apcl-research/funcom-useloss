TDAT: public boolean read and dispatch ( ) {  <NL> check device ( ) ;  <NL> draw menu bars ( ) ;  <NL> run popups ( ) ;  <NL> if ( os . peek message ( msg , 0 , 0 , 0 , os . pm _ remove ) ) {  <NL> if ( ! is wake message ( msg ) ) {  <NL> if ( ! filter message ( msg ) ) {  <NL> os . translate message ( msg ) ;  <NL> os . dispatch message ( msg ) ;  <NL>  }  <NL> run deferred events ( ) ;  <NL> return true ;  <NL>  }  <NL>  }  <NL> return run async messages ( ) ;  <NL>  }  COM: <s> reads an event from the operating systems event queue </s>