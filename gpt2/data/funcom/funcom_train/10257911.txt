TDAT: public void add ( action action , data data ) {  <NL> if ( action . is transparent ( ) ) return ;  <NL> action coalesced action = coalesce action ( action ) ;  <NL> if ( coalesced action ! = null ) {  <NL> step step = new step ( coalesced action , data ) ;  <NL> applied actions . add last ( step ) ;  <NL> if ( applied actions . size ( ) > limit )  <NL> applied actions . remove first ( ) ;  <NL> flush redo log ( ) ;  <NL>  }  <NL> if ( ! action . is undoable ( ) ) {  <NL>  / / if we apply a non - undoable action , we can throw away our undo / redo logs <NL> flush logs ( ) ;  <NL>  }  <NL>  }  COM: <s> tells the undo manager that an action has occurred </s>