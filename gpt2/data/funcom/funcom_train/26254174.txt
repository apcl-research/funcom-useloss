TDAT: public expression evaluate up ( field access p ) throws parse tree exception {  <NL>  {  <NL> oj class reftype =  <NL> compute ref type ( p . get reference type ( ) , p . get reference expr ( ) ) ;  <NL> if ( reftype ! = get self type ( ) ) {  <NL> expression newp = reftype . expand field read ( get environment ( ) , p ) ;  <NL> if ( newp ! = p )  <NL> return newp ;  <NL>  }  <NL>  }  <NL>  {  <NL> oj class type = get type ( p ) ;  <NL> expression newp = type . expand expression ( get environment ( ) , p ) ;  <NL> if ( ! ( newp instanceof field access ) )  <NL> return newp ;  <NL> p = ( field access ) newp ;  <NL>  }  <NL> return super . evaluate up ( p ) ;  <NL>  }  COM: <s> includes expand field read and expand expression </s>