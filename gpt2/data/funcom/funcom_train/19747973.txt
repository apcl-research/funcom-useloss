TDAT: protected string render token ( ) {  <NL> string buffer results = new string buffer ( ) ;  <NL> http session session = page context . get session ( ) ;  <NL>  <NL> if ( session ! = null ) {  <NL> string token =  <NL>  ( string ) session . get attribute ( globals . transaction _ token _ key ) ;  <NL>  <NL> if ( token ! = null ) {  <NL> results . append ( " < input type = \ " hidden\ " name = \ " " ) ;  <NL> results . append ( constants . token _ key ) ;  <NL> results . append ( " \ " value = \ " " ) ;  <NL> results . append ( token ) ;  <NL> if ( this . is xhtml ( ) ) {  <NL> results . append ( " \ " / > " ) ;  <NL>  } else {  <NL> results . append ( " \ " > " ) ;  <NL>  }  <NL>  }  <NL>  }  <NL>  <NL> return results . to string ( ) ;  <NL>  }  COM: <s> generates a hidden input field with token information if any </s>