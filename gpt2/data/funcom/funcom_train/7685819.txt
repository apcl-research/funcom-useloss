TDAT: public char sequence add smiley spans ( char sequence text ) {  <NL> spannable string builder builder = new spannable string builder ( text ) ;  <NL>  <NL> matcher matcher = m pattern . matcher ( text ) ;  <NL> while ( matcher . find ( ) ) {  <NL> int res id = m smiley to res . get ( matcher . group ( ) ) ;  <NL> builder . set span ( new image span ( m context , res id ) ,  <NL> matcher . start ( ) , matcher . end ( ) ,  <NL> spannable . span _ exclusive _ exclusive ) ;  <NL>  }  <NL>  <NL> return builder ;  <NL>  }  COM: <s> adds image spans to a char sequence that replace textual emoticons such </s>