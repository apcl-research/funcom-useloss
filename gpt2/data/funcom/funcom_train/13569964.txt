TDAT: public double calc distance ( route route ) {  <NL> double dist = route . get distance ( ) ;  <NL> if ( dist ! = null & & ! double . is na n ( dist . double value ( ) ) ) {  <NL> return dist . double value ( ) ;  <NL>  }  <NL> route distance calculator calc = get calculator ( route . get class ( ) ) ;  <NL> if ( calc = = null ) {  <NL> throw new illegal argument exception ( " no distance calculator known for route of type " + route . get class ( ) . get canonical name ( ) ) ;  <NL>  }  <NL> double d = calc . calc distance ( route ) ;  <NL> route . set distance ( d ) ;  <NL> return d ;  <NL>  }  COM: <s> if necessary calculates the distance of a route before returning it </s>