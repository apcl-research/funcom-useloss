TDAT: public void leave chat room ( chat room room ) {  <NL>  / / notify that the chatroom has been left .  <NL> fire chat room left ( room ) ;  <NL> room . leave chat room ( ) ;  <NL>  <NL> final packet listener listener = presence map . get ( room . get roomname ( ) ) ;  <NL> if ( listener ! = null & & spark manager . get connection ( ) . is connected ( ) ) {  <NL> spark manager . get connection ( ) . remove packet listener ( listener ) ;  <NL>  }  <NL>  }  COM: <s> leaves a chat room </s>