TDAT: public void add dependency ( resource resource , lock type type ) {  <NL>  <NL> logger . info ( " adding dependency % s to % s for % s " , type , resource , this ) ;  <NL> final dependency status accept = resource . accept ( type ) ;  <NL> if ( accept = = dependency status . error )  <NL> throw new runtime exception ( format (  <NL>  " resource % s cannot be satisfied for lock type % s " ,  <NL> resource , type ) ) ;  <NL>  <NL> resource . register ( this ) ;  <NL>  <NL> final boolean ready = accept . is ok ( ) ;  <NL>  <NL> synchronized ( this ) {  <NL> if ( ! ready )  <NL> nb unsatisfied + + ;  <NL> dependencies . put ( resource , new dependency status cache ( type , ready ) ) ;  <NL>  }  <NL>  }  COM: <s> add a dependency </s>