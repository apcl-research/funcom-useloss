TDAT: private void flush current mega block ( ) {  <NL> if ( current loop size = = 0 ) {  <NL> return ;  <NL>  }  <NL>  <NL> send block ( current block , current ids ) ;  <NL>  / *  <NL> int block id = calc id ( current ids ) ;  <NL>  <NL>  / / build instruction block <NL> instruction block new block = new instruction block ( current block , 1 , block id ) ;  <NL>  / / send it to listeners <NL> notice listeners ( new block ) ;  <NL>  * /  <NL>  <NL> init current mega block ( ) ;  <NL>  }  COM: <s> sends the current mega block to registred consumers and resets it </s>