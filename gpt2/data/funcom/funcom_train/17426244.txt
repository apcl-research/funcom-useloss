TDAT: private void addresses failed ( ) {  <NL> if ( valid sent addr ! = null ) {  <NL> if ( valid unsent addr ! = null ) {  <NL> address newa [ ] =  <NL> new address [ valid sent addr . length + valid unsent addr . length ] ;  <NL> system . arraycopy ( valid sent addr , 0 ,  <NL> newa , 0 , valid sent addr . length ) ;  <NL> system . arraycopy ( valid unsent addr , 0 ,  <NL> newa , valid sent addr . length , valid unsent addr . length ) ;  <NL> valid sent addr = null ;  <NL> valid unsent addr = newa ;  <NL>  } else {  <NL> valid unsent addr = valid sent addr ;  <NL> valid sent addr = null ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> the send failed fix the address arrays to report the failure correctly </s>