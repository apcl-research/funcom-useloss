TDAT: protected string extract prefix ( i text viewer viewer , int offset ) {  <NL> int i = offset ;  <NL> i document document = viewer . get document ( ) ;  <NL> if ( i > document . get length ( ) )  <NL> return " " ; / / $ non - nls - 1 $  <NL>  <NL> try {  <NL> while ( i > 0 ) {  <NL> char ch = document . get char ( i - 1 ) ;  <NL> if ( ! character . is java identifier part ( ch ) )  <NL> break ;  <NL> i - - ;  <NL>  }  <NL>  <NL> return document . get ( i , offset - i ) ;  <NL>  } catch ( bad location exception e ) {  <NL> return " " ; / / $ non - nls - 1 $  <NL>  }  <NL>  }  COM: <s> heuristically extracts the prefix used for determining template relevance </s>