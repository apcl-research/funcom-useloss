TDAT: protected void update preferred size ( int index ) {  <NL> rectangle bounds = get node dimensions ( this . get user object ( ) ,  <NL> index , get level ( ) ,  <NL> is expanded ( ) ,  <NL> bounds buffer ) ;  <NL>  <NL> if ( bounds = = null ) {  <NL> x origin = 0 ;  <NL> preferred width = preferred height = 0 ;  <NL> update node sizes = true ;  <NL>  }  <NL> else if ( bounds . height = = 0 ) {  <NL> x origin = 0 ;  <NL> preferred width = preferred height = 0 ;  <NL> update node sizes = true ;  <NL>  }  <NL> else {  <NL> x origin = bounds . x ;  <NL> preferred width = bounds . width ;  <NL> if ( is fixed row height ( ) )  <NL> preferred height = get row height ( ) ;  <NL> else <NL> preferred height = bounds . height ;  <NL>  }  <NL>  }  COM: <s> updates the preferred size by asking the current renderer </s>