TDAT: public void handle quit internal ( ) {  <NL>  <NL> try {  <NL> if ( simulation thread ! = null ) {  <NL> simulation thread . interrupt ( ) ;  <NL> simulation thread . join ( ) ;  <NL>  }  <NL> if ( estimation thread ! = null ) {  <NL> estimation thread . interrupt ( ) ;  <NL> estimation thread . join ( ) ;  <NL>  }  <NL>  } catch ( interrupted exception e ) {  <NL> assert ( false ) ;  <NL>  }  <NL>  <NL>  / / do stop ( ) isn ' t sufficient with external vm & quit <NL>  / / instead use do close ( ) which will kill the external vm <NL> do close ( ) ;  <NL>  <NL>  / / cleanup our machine / driver .  <NL> if ( machine ! = null ) {  <NL> machine . dispose ( ) ;  <NL> machine = null ;  <NL>  }  <NL>  <NL> check modified ( handle _ quit ) ;  <NL>  }  COM: <s> quit but first ask user if its ok </s>