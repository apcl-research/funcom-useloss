TDAT: public void begin transaction ( ) {  <NL> if ( transaction depth = = 0 ) {  <NL> transaction thread = thread . current thread ( ) ;  <NL> begin rec change ( ) ;  <NL>  } else {  <NL>  / / = = is okay for threads .  <NL>  / / noinspection object equality <NL> if ( transaction thread ! = thread . current thread ( ) ) {  <NL> throw new illegal state exception ( " a transaction must only be used by one thread . " ) ;  <NL>  }  <NL>  }  <NL> transaction depth + + ;  <NL>  }  COM: <s> starts a new transaction </s>