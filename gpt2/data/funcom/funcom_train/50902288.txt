TDAT: public void write factions ( map map ) throws io exception {  <NL> if ( map = = null ) {  <NL> return ;  <NL>  }  <NL>  <NL>  / / this assumes that if somebody doesn ' t write units <NL>  / / also factions aren ' t necessary ; maybe this needs further <NL>  / / specification <NL> if ( include units ) {  <NL> list sorted = collection factory . create linked list ( map . values ( ) ) ;  <NL> collections . sort ( sorted , sort index comparator ) ;  <NL>  <NL> for ( iterator iter = sorted . iterator ( ) ; iter . has next ( ) ; ) {  <NL> write faction ( ( faction ) iter . next ( ) ) ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> write a sequence of faction partei blocks to the underlying stream </s>