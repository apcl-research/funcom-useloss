TDAT: private void append header footer ( string text , string buffer out ) {  <NL> if ( text = = null || text . length ( ) = = 0 )  <NL> return ;  <NL>  <NL> text = text . replace ( ' \r ' , ' \n ' ) ;  <NL> if ( ! text . ends with ( " \n " ) ) {  <NL> out . append ( text ) ;  <NL> out . append ( ' \n ' ) ;  <NL> return ;  <NL>  }  <NL> if ( text . ends with ( " \n\n " ) ) {  <NL> out . append ( text . substring ( 0 , text . length ( ) - 1 ) ) ;  <NL> return ;  <NL>  }  <NL> out . append ( text ) ;  <NL> return ;  <NL>  }  COM: <s> add the header footer text if its not empty </s>