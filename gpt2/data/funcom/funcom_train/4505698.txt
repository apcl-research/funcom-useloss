TDAT: public void session destroyed ( session session ) {  <NL>  <NL> string username = session . get address ( ) . to bare jid ( ) . split ( " @ " ) [ 0 ] ;  <NL>  <NL> sip account sip account = sip account dao . get account by user ( username ) ;  <NL> if ( sip account ! = null ) {  <NL> try {  <NL> sip account . set status ( sip register status . unregistered ) ;  <NL> sip account dao . update ( sip account ) ;  <NL>  }  <NL> catch ( sql exception e ) {  <NL> log . error ( e ) ;  <NL>  }  <NL>  }  <NL>  <NL>  }  COM: <s> sets the user sip presence to unregistered if his jabber account is disconnected </s>