TDAT: public t sample ( boolean use most likely ) {  <NL> if ( item probs _ . size ( ) = = 0 )  <NL> return null ;  <NL>  <NL>  / / if using most likely , just get the highest prob one <NL> if ( use most likely )  <NL> return get ordered elements ( ) . get ( 0 ) ;  <NL>  <NL> double val = random _ . next double ( ) ;  <NL> double tally = 0 ;  <NL> t last item = null ;  <NL> for ( t item : item probs _ . key set ( ) ) {  <NL> tally + = item probs _ . get ( item ) ;  <NL> if ( val < tally )  <NL> return item ;  <NL>  <NL>  / / just in case <NL> last item = item ;  <NL>  }  <NL> return last item ;  <NL>  }  COM: <s> samples a random weighted element from the distribution </s>