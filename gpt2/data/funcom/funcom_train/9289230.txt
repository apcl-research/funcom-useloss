TDAT: public context manager get current context manager ( ) {  <NL>  <NL> thread local tcl = thread context list ;  <NL> if ( tcl = = null ) {  <NL>  / / the context service is already stopped .  <NL> return null ;  <NL>  }  <NL>  <NL> object list = tcl . get ( ) ;  <NL>  <NL> if ( list instanceof context manager ) {  <NL>  <NL> thread me = thread . current thread ( ) ;  <NL>  <NL> context manager cm = ( context manager ) list ;  <NL> if ( cm . active thread = = me )  <NL> return cm ;  <NL> return null ;  <NL>  }  <NL>  <NL> if ( list = = null )  <NL> return null ;  <NL>  <NL> java . util . stack stack = ( java . util . stack ) list ;  <NL> return ( context manager ) ( stack . peek ( ) ) ;  <NL>  <NL>  }  COM: <s> get current context manager linked to the current thread </s>