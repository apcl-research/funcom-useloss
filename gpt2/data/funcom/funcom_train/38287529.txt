TDAT: protected dom interval set compute global selection ( ) {  <NL> update local selection ( ) ;  <NL>  <NL>  / / shift pressed or shift + ctrl pressed <NL> if ( get current input ( ) . is shift key down ( ) ) {  <NL>  / / simple interval <NL> return this . local selection ;  <NL>  }  <NL>  / / keys are illegaly pressed , don ' t change viewer ' s selection <NL> return get xml graphical viewer ( ) . get dom selection ( ) ;  <NL>  }  COM: <s> computes actual selection made by keyboard arrows to set to viewer </s>