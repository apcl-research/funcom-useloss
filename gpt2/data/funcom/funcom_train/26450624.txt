TDAT: public boolean refresh ( ) {  <NL> if ( colors changed ) {  <NL> for ( int c = 0 ; c < color changed . length ; c + + ) {  <NL> if ( color changed [ c ] ) {  <NL> color changed [ c ] = false ;  <NL> for ( int n = 0 ; n < gdi . gfx . total ; n + + ) {  <NL> valid [ n ] = ( tile color [ n ] = = c ) & & ( tile img [ n ] ! = null ) ;  <NL>  }  <NL>  }  <NL>  }  <NL> colors changed = false ;  <NL> return true ;  <NL>  }  <NL> return false ;  <NL>  }  COM: <s> resets all changed flags </s>