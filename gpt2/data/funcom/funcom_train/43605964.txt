TDAT: public node rewrite ( pao type system ts , node factory nf ) {  <NL> instanceof n = ( instanceof ) node ( ) ;  <NL> type rtype = n . compare type ( ) . type ( ) ;  <NL>  <NL> if ( rtype . is primitive ( ) ) {  <NL> type t = ts . boxed type ( rtype . to primitive ( ) ) ;  <NL> return n . compare type ( nf . canonical type node ( n . compare type ( ) . position ( ) ,  <NL> t ) ) ;  <NL>  }  <NL>  <NL> return n ;  <NL>  }  COM: <s> rewrites code instanceof code checks where the comparison type is </s>