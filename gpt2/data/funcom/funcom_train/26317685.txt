TDAT: public int switch mode ( ) {  <NL> if ( type . has modes ( ) ) {  <NL> int n mode = 0 ;  <NL> if ( pending mode > - 1 ) {  <NL> n mode = ( pending mode + 1 ) % type . get modes count ( ) ;  <NL>  } else {  <NL> n mode = ( mode + 1 ) % type . get modes count ( ) ;  <NL>  }  <NL> set mode ( n mode ) ;  <NL> return n mode ;  <NL>  }  <NL> return - 1 ;  <NL>  }  COM: <s> switches the equipment mode to the next available </s>