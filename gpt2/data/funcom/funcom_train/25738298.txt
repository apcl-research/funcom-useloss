TDAT: private void parse formula charge ( ) {  <NL>  <NL> matcher matcher = charge pattern . matcher ( sb ) ;  <NL>  <NL> if ( matcher . find ( ) ) {  <NL>  <NL>  / / get number of charge <NL> string str nb charge = matcher . group ( 1 ) ;  <NL> nb charge = ( str nb charge ! = null ) ?  <NL> integer . parse int ( str nb charge ) : 1 ;  <NL>  <NL>  / / get charge + or -  <NL> if ( matcher . group ( 2 ) . char at ( 0 ) = = ' - ' )  <NL> nb charge = - nb charge ;  <NL>  <NL>  / / remove the matching text from string <NL> sb . delete ( matcher . start ( ) , matcher . end ( ) ) ;  <NL>  }  <NL>  }  COM: <s> look for charge state at the end of the formula code string code </s>