TDAT: private actor message await next message ( final long end time ) throws interrupted exception {  <NL> transfer queues ( ) ;  <NL>  <NL> waiting thread = thread . current thread ( ) ;  <NL> if ( output queue ! = null ) return retrieve next message ( ) ;  <NL>  <NL> if ( end time = = 0l ) lock support . park ( ) ;  <NL> else lock support . park nanos ( end time - system . nano time ( ) ) ;  <NL> if ( thread . current thread ( ) . is interrupted ( ) ) {  <NL> throw new interrupted exception ( ) ;  <NL>  }  <NL> return null ;  <NL>  }  COM: <s> holds common functionality for take message methods </s>