TDAT: protected void handle allocate ( ) {  <NL> long states [ ] ;  <NL> synchronized ( engine state lock ) {  <NL> long new state = allocated | resumed ;  <NL> new state | = ( output handler . is queue empty ( )  <NL>  ? queue _ empty <NL>  : queue _ not _ empty ) ;  <NL> states = set engine state ( clear _ all _ state , new state ) ;  <NL>  }  <NL> output handler . start ( ) ;  <NL> post engine allocated ( states [ 0 ] , states [ 1 ] ) ;  <NL>  }  COM: <s> starts the output thread </s>