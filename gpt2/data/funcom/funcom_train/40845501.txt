TDAT: public boolean add ref ( puzzle description puzzle , magic cube . stickerspec sticker ) {  <NL> assert ( nrefs < macro . maxrefs ) ;  <NL>  <NL> if ( ! ref determines unique orientation ( puzzle , sticker ) )  <NL> return false ;  <NL>  <NL> ref stickers [ nrefs + + ] = sticker ;  <NL> if ( nrefs = = macro . maxrefs ) {  <NL> cur macro = new macro ( puzzle . get full puzzle string ( ) , ref stickers ) ;  <NL>  }  <NL>  <NL> return true ;  <NL>  }  COM: <s> adds a reference sticker to the currently open macro </s>