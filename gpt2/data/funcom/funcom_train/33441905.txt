TDAT: public void validate ( ) {  <NL> if ( ! is logged ( ) ) {  <NL> auth role basic role = new auth role ( " anonymous " ) ;  <NL> get current roles holder ( ) . set role ( basic role ) ;  <NL> return ;  <NL>  } else {  <NL> user user = get domain factory ( ) . get ( user . class , get user id ( ) ) ;  <NL> if ( user ! = null & & ! user . get roles ( ) . equals (  <NL> get current roles holder ( ) . get roles ( ) ) ) {  <NL> get current roles holder ( ) . set roles ( user . get roles ( ) ) ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> validate local thread roles with logged user roles </s>