TDAT: public shell active shell ( ) {  <NL> shell active shell = ( shell ) ui thread runnable . sync exec ( display , new widget result ( ) {  <NL> public widget run ( ) {  <NL> return display . get active shell ( ) ;  <NL>  }  <NL>  } ) ;  <NL> if ( active shell ! = null )  <NL> return active shell ;  <NL> return ( shell ) ui thread runnable . sync exec ( display , new widget result ( ) {  <NL> public widget run ( ) {  <NL> shell [ ] shells = get shells ( ) ;  <NL> for ( int i = 0 ; i < shells . length ; i + + )  <NL> if ( shells [ i ] . is focus control ( ) )  <NL> return shells [ i ] ;  <NL> return null ;  <NL>  }  <NL>  } ) ;  <NL>  }  COM: <s> return the active shell </s>