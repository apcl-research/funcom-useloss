TDAT: public void run ( ) {  <NL>  / / sends start signal .  <NL> synchronized ( synch lock ) {  <NL> synch lock . notify ( ) ;  <NL>  }  <NL>  / / streams retrieval .  <NL> try {  <NL> input stream = socket . get input stream ( ) ;  <NL> output stream = socket . get output stream ( ) ;  <NL>  } catch ( io exception e ) {  <NL> stop ( ) ;  <NL>  }  <NL>  / / loop .  <NL> while ( ! thread . interrupted ( ) ) {  <NL> try {  <NL> string message = message . read ( input stream ) ;  <NL> string response = listener . message received ( this , message ) ;  <NL> if ( response = = null ) {  <NL> response = " " ;  <NL>  }  <NL> message . write ( response , output stream ) ;  <NL>  } catch ( io exception e ) {  <NL> stop ( ) ;  <NL>  }  <NL>  }  <NL>  / / listener notification .  <NL> listener . connection closed ( this ) ;  <NL>  }  COM: <s> the connection handling routine </s>