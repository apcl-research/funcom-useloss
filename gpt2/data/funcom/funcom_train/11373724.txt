TDAT: private long next generation stamp ( ) throws safe mode exception {  <NL> assert has write lock ( ) ;  <NL> if ( is in safe mode ( ) ) {  <NL> throw new safe mode exception (  <NL>  " cannot get next generation stamp " , safe mode ) ;  <NL>  }  <NL> long gs = generation stamp . next stamp ( ) ;  <NL> get edit log ( ) . log generation stamp ( gs ) ;  <NL>  / / nb : callers sync the log <NL> return gs ;  <NL>  }  COM: <s> increments logs and then returns the stamp </s>