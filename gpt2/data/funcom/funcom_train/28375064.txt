TDAT: public void set metadatum factories ( map < string , metadatum factory > map ) {  <NL> metadatum factory map . put all ( map ) ;  <NL> for ( metadatum factory metadatum factory : map . values ( ) ) {  <NL> for ( archive a : archives . values ( ) ) {  <NL> try {  <NL> a . register metadatum factory ( metadatum factory ) ;  <NL>  } catch ( low level storage exception ex ) {  <NL> log . error ( null , ex ) ;  <NL>  }  <NL>  }  <NL>  }  <NL>  }  COM: <s> bulk register metadatum factories this will normally be called by spring </s>