TDAT: public void set state ( string state , long time ) throws model exception {  <NL> if ( this . entity typ . exist posible state ( state ) ) {  <NL> attribute last = null ;  <NL> try { last = this . state . last element ( ) ;  <NL>  } catch ( no such element exception e ) { }  <NL> if ( last ! = null & & ! last . get value ( ) . equals ( state ) ) {  <NL> this . state . add ( new attribute ( " state " , state , time ) ) ;  <NL>  }  <NL> if ( this . grafic ! = null ) this . grafic . set image ( ) ;  <NL>  }  <NL>  }  COM: <s> set new state value </s>