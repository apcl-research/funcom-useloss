TDAT: public void commit ( ) throws dao exception {  <NL>  <NL>  / / make sure the transaction has not been committed <NL> if ( commmitted ) {  <NL>  <NL> throw new dao exception ( " transaction already committed " ) ;  <NL>  <NL>  }  <NL>  <NL>  / / now try to commit the transaction <NL> try {  <NL>  <NL>  / / check for unit of work <NL> if ( unit of work ! = null ) {  <NL>  <NL>  / / unit of work was not lazily loaded <NL> unit of work . commit ( ) ;  <NL> unit of work . release ( ) ;  <NL> session . release ( ) ;  <NL>  <NL>  }  <NL>  <NL>  } catch ( top link exception e ) {  <NL>  <NL> throw new dao exception ( " error committing transaction " , e ) ;  <NL>  <NL>  }  <NL> commmitted = true ;  <NL>  <NL>  }  COM: <s> commits all pending changes to persistent storage </s>