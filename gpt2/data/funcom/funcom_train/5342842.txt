TDAT: public void add ( message m ) {  <NL>  / / add m to appropriate buffer <NL> int priority = calculate priority ( m ) ;  <NL> message queue queue = _ queues [ priority ] ;  <NL> queue . add ( m ) ;  <NL>  <NL>  / / update statistics <NL> int dropped = queue . reset dropped ( ) ;  <NL>  _ dropped + = dropped ;  <NL>  _ queued + = 1 - dropped ;  <NL>  <NL>  / / remember the priority so we can set it if we detect we cycled .  <NL>  _ priority hint = priority ;  <NL>  }  COM: <s> adds m to this possibly dropping some messages in the process call </s>