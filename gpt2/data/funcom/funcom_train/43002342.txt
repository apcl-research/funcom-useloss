TDAT: protected entity manager get entity manager ( ) {  <NL>  / / check if em is null or if the em has been closed .  <NL> if ( ( em . get ( ) = = null || ! em . get ( ) . is open ( ) ) & & emf ! = null ) {  <NL>  / / create a new em if we didn ' t have a usable one available .  <NL> em . set ( emf . create entity manager ( ) ) ;  <NL>  }  <NL>  <NL> return em . get ( ) ;  <NL>  }  COM: <s> returns an instance of the entity manager which is open for use </s>