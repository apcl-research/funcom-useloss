TDAT: public void null safe set ( prepared statement st , object value , int index ) throws hibernate exception , sql exception {  <NL> if ( value = = null ) {  <NL> st . set null ( index , sql type ) ;  <NL>  } else {  <NL> try {  <NL> st . set string ( index , encryptor factory . get current encryption encryptor ( ) . encrypt ( ( string ) value ) ) ;  <NL>  } catch ( exception e ) {  <NL> log . error ( " could not encrypt message " , e ) ;  <NL> throw new hibernate exception ( e ) ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> encrypts the message before storing </s>