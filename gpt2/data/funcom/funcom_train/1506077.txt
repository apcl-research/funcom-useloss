TDAT: private entity complete key ( entity entity ) {  <NL> key key = entity . get key ( ) ;  <NL> if ( key . is complete ( ) ) {  <NL> return entity ;  <NL>  }  <NL> key range key range = allocate ids ( key . get parent ( ) , key . get kind ( ) , 1 ) ;  <NL> entity new entity = new entity ( key range . get start ( ) ) ;  <NL> new entity . set properties from ( entity ) ;  <NL> return new entity ;  <NL>  }  COM: <s> make sure the entity has a complete key </s>