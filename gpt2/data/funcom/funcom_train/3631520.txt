TDAT: private void complete transaction ( ej header trans ) throws jpos exception {  <NL>  <NL> int receipt no = 0 ;  <NL>  <NL> receipt no = context . fiscal printer ( ) . get receipt no ( ) ;  <NL> logger . debug ( " receipt no : " + receipt no ) ;  <NL>  <NL> if ( receipt no > 0 ) trans . set trans no ( receipt no ) ;  <NL>  <NL> if ( ! trans . trans header ( ) . update state ( com . globalretailtech . data . transaction . complete ) ) {  <NL> logger . warn ( " transaction update failure " + trans . trans header ( ) . to string ( ) ) ;  <NL>  }  <NL>  }  COM: <s> updates trans no with receipe no and </s>