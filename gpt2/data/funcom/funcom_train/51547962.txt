TDAT: public void change presence ( presence presence ) {  <NL>  / / send presence packet <NL> spark manager . get connection ( ) . send packet ( presence ) ;  <NL>  <NL>  / / update tray icon <NL> spark manager . get notifications engine ( ) . change presence ( presence ) ;  <NL>  <NL>  / / fire presence listeners <NL> final iterator presence listeners = new array list ( this . presence listeners ) . iterator ( ) ;  <NL> while ( presence listeners . has next ( ) ) {  <NL>  ( ( presence listener ) presence listeners . next ( ) ) . presence changed ( presence ) ;  <NL>  }  <NL>  }  COM: <s> update the current availability of the user </s>