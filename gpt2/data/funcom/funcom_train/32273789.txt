TDAT: protected void stop ( ) {  <NL> set listening ( false ) ;  <NL>  / / kill off all the threads in connections by stopping <NL>  / / and then removing from list of threads .  <NL> iterator < dx server connection handler > i = all connections . iterator ( ) ;  <NL> dx server packet shutdown packet = new dx server packet ( ) ;  <NL> shutdown packet . set event ( dx server packet . event _ shutdown ) ;  <NL> while ( i . has next ( ) ) {  <NL> dx server connection handler connection = i . next ( ) ;  <NL> connection . send packet ( shutdown packet ) ;  <NL> connection . stop ( ) ;  <NL> i . remove ( ) ;  <NL>  }  <NL>  }  COM: <s> stops the server by sending the shutdown message to everything </s>