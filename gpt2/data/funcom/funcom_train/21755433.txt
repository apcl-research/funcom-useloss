TDAT: private string escape xml ( string str ) {  <NL>  <NL> if ( utils . is empty ( str ) )  <NL> return str ;  <NL>  <NL> string buffer sb = new string buffer ( ) ;  <NL>  <NL> int len = str . length ( ) ;  <NL> char c ;  <NL>  <NL> for ( int i = 0 ; i < len ; i + + ) {  <NL>  <NL> c = str . char at ( i ) ;  <NL> switch ( c ) {  <NL> case ' & ' :  <NL> sb . append ( " & amp ; " ) ;  <NL> break ;  <NL> case ' < ' :  <NL> sb . append ( " & lt ; " ) ;  <NL> break ;  <NL> case ' > ' :  <NL> sb . append ( " & gt ; " ) ;  <NL> break ;  <NL> case ' " ' :  <NL> sb . append ( " & quot ; " ) ;  <NL> break ;  <NL>  / / xml actually defines & apos ; as entity for the apostrophe but we <NL>  / / user rather the numerical reference to avoid xhtml 1 . 0 validation <NL>  / / problems <NL> case ' \ ' ' :  <NL> sb . append ( " & # 39 ; " ) ;  <NL> break ;  <NL> default :  <NL> sb . append ( c ) ;  <NL> break ;  <NL>  }  <NL>  }  <NL>  <NL> return sb . to string ( ) ;  <NL>  }  COM: <s> escapes base xml entities as specified a </s>