TDAT: private void safe preference changed ( ) {  <NL> if ( swing utilities . is event dispatch thread ( ) ) {  <NL> document doc = get document ( ) ;  <NL> if ( doc instanceof abstract document ) {  <NL>  ( ( abstract document ) doc ) . read lock ( ) ;  <NL>  }  <NL> preference changed ( null , true , true ) ;  <NL> if ( doc instanceof abstract document ) {  <NL>  ( ( abstract document ) doc ) . read unlock ( ) ;  <NL>  }  <NL>  }  <NL> else {  <NL> swing utilities . invoke later ( new runnable ( ) {  <NL> public void run ( ) {  <NL> safe preference changed ( ) ;  <NL>  }  <NL>  } ) ;  <NL>  }  <NL>  }  COM: <s> invokes code preference changed code on the event displatching </s>