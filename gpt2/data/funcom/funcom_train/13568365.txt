TDAT: public void activity ends ( final double now ) {  <NL> activity impl act = ( activity impl ) this . get plan elements ( ) . get ( this . current plan element index ) ;  <NL> db simulation . get events ( ) . process event ( new activity end event impl ( now , this . get person ( ) . get id ( ) , act . get link id ( ) , act . get facility id ( ) , act . get type ( ) ) ) ;  <NL> advance plan element ( now ) ;  <NL>  }  COM: <s> notifies the agent that it leaves its current activity location and </s>