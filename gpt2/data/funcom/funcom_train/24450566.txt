TDAT: private small message attachment create attach ( string file name , message out email ) throws aps system exception {  <NL> small message attachment allegato = null ;  <NL> try {  <NL> string filename = file name ;  <NL> allegato = new small message attachment ( ) ;  <NL> allegato . set file name ( filename ) ;  <NL> allegato . set id ( this . get key generator manager ( ) . get unique key current value ( ) ) ;  <NL>  } catch ( throwable t ) {  <NL> aps system utils . log throwable ( t , this , " create segnatura attach " ) ;  <NL> throw new aps system exception (  <NL>  " errore in creazione allegato segnatura . xml per email ref protocollo "  <NL>  + email . get id protocollo ( ) ) ;  <NL>  }  <NL> return allegato ;  <NL>  }  COM: <s> crea lattachment segnatura </s>