TDAT: public au processor add au processor ( string prefix , au processor processor ) {  <NL> check au procesor ( prefix , processor ) ;  <NL>  <NL> if ( _ procs . get ( prefix ) = = processor ) / / speed up to avoid sync <NL> return processor ; / / nothing changed <NL>  <NL>  / / to avoid using sync in do get ( ) , we make a copy here <NL> final au processor old ;  <NL> synchronized ( this ) {  <NL> final map ps = new hash map ( _ procs ) ;  <NL> old = ( au processor ) ps . put ( prefix , processor ) ;  <NL>  _ procs = ps ;  <NL>  }  <NL> return old ;  <NL>  }  COM: <s> adds an au processor and associates it with the specified prefix </s>