TDAT: protected command get text input command ( key event e ) {  <NL> i text piece keeper keeper = this . caret manager <NL>  . get active text piece keeper ( ) ;  <NL>  <NL> insert text request text request = new insert text request ( keeper ,  <NL> string . value of ( e . character ) , this . caret manager <NL>  . get caret offset ( ) ) ;  <NL>  <NL>  / / todo studva maybe space insertion deny at some places <NL> return keeper . get command ( text request ) ;  <NL>  }  COM: <s> performs text input including caret movement </s>