TDAT: public weight create normalized weight ( query query ) throws io exception {  <NL> query = rewrite ( query ) ;  <NL> weight weight = query . create weight ( this ) ;  <NL> float v = weight . get value for normalization ( ) ;  <NL> float norm = get similarity provider ( ) . query norm ( v ) ;  <NL> if ( float . is infinite ( norm ) || float . is na n ( norm ) )  <NL> norm = 1 . 0f ;  <NL> weight . normalize ( norm , 1 . 0f ) ;  <NL> return weight ;  <NL>  }  COM: <s> creates a normalized weight for a top level </s>