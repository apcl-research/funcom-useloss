TDAT: public amazon ec2 get aws client ( ) {  <NL>  / *  <NL>  * if we ' re running in an os gi container , and we have access to the user <NL>  * preferences on which region to use , then use that , otherwise use a <NL>  * sane default for things like tests that run outside of os gi .  <NL>  * /  <NL> string ec2endpoint = " ec2 . amazonaws . com " ;  <NL> ec2plugin plugin = ec2plugin . get default ( ) ;  <NL> if ( plugin ! = null ) {  <NL> ec2endpoint = plugin . get preference store ( ) . get string ( preference constants . p _ ec2 _ region _ endpoint ) ;  <NL>  }  <NL>  <NL> return get aws client by endpoint ( ec2endpoint ) ;  <NL>  }  COM: <s> returns an aws ec2 client ready to access ec2 with the users current </s>