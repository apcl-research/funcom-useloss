TDAT: public void step ( ) throws invalid macro state exception {  <NL> if ( is valid state ( state ) ) {  <NL>  / / maybe constantly poll the macro for its state ?  <NL>  / / if it changes time to halt and move on ?  <NL>  <NL>  / / how to halt a macro ?  <NL> state = get macro ( state ) . execute ( ) ;  <NL>  } else {  <NL>  / / todo handle this better <NL> running = false ;  <NL> throw new invalid macro state exception ( state ) ;  <NL>  }  <NL>  }  COM: <s> executes a single code macro code bound to our current state </s>