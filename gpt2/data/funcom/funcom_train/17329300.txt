TDAT: protected void write ( document document ) throws io exception {  <NL> output stream . write byte ( amf body . data _ type _ xml ) ;  <NL> element doc element = document . get document element ( ) ;  <NL> string xml data = xml utils . convert dom to string ( doc element ) ;  <NL> if ( log . is debug enabled ( ) )  <NL> log . debug ( " writing xml data : \n " + xml data ) ;  <NL> byte array output stream ba output stream = new byte array output stream ( ) ;  <NL> ba output stream . write ( xml data . get bytes ( " utf - 8 " ) ) ;  <NL> output stream . write int ( ba output stream . size ( ) ) ;  <NL> ba output stream . write to ( output stream ) ;  <NL>  }  COM: <s> writes xml document </s>