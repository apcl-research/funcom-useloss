TDAT: private void set patient ( user patient new patient ) {  <NL>  / / if patient did not change then do nothing <NL> if ( new patient = = patient )  <NL> return ;  <NL> boolean fresh = ( new patient = = null ) ;  <NL> patient = fresh ? new user patient ( ) : new patient ;  <NL>  / / update the characteristic facades <NL> facade patient history . set patient history ( patient . get patient history ( ) , fresh ) ;  <NL> email address verify = patient . get principal ( ) ;  <NL>  }  COM: <s> update the patient and the facades into its history </s>