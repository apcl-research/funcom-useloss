TDAT: public legend selection listener get legend selection listener ( ) {  <NL> if ( legend selection listener = = null ) {  <NL> legend selection listener = new legend selection listener ( ) {  <NL> public void selected ( object selection ) {  <NL> if ( selection ! = null ) {  <NL> if ( selection instanceof sub entity ) {  <NL> sub entity selected sub entity = ( sub entity ) selection ;  <NL> set selection for sub hit ( selected sub entity ) ;  <NL>  }  <NL>  }  <NL>  }  <NL>  } ;  <NL>  }  <NL> return legend selection listener ;  <NL>  }  COM: <s> returns a listener for use in allowing external selection setting </s>