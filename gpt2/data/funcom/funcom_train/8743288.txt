TDAT: static public int apply filter ( string session _ id _ , layer filter new _ filter ) {  <NL>  <NL> filtering service fs = filtering service . get session ( session _ id _ ) ;  <NL>  <NL> if ( new _ filter = = null ) {  <NL>  / / remove top filter <NL> fs . pop filter ( ) ;  <NL>  } else {  <NL> fs . update filter ( new _ filter ) ;  <NL>  }  <NL>  <NL> fs . save ( ) ;  <NL>  <NL> return fs . layerfilters . size ( ) ;  <NL>  }  COM: <s> applies a layer filter to the session </s>