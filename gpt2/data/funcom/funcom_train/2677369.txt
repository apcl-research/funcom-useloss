TDAT: public string read string ( ) {  <NL> int len = 0 ;  <NL> switch ( current data type ) {  <NL> case amf . type _ long _ string :  <NL> len = buf . get int ( ) ;  <NL> break ;  <NL> case amf . type _ string :  <NL> len = buf . get unsigned short ( ) ;  <NL> break ;  <NL> default :  <NL> log . debug ( " unknown amf type : { } " , current data type ) ;  <NL>  }  <NL> int limit = buf . limit ( ) ;  <NL> final java . nio . byte buffer str buf = buf . buf ( ) ;  <NL> str buf . limit ( str buf . position ( ) + len ) ;  <NL> final string string = amf . charset . decode ( str buf ) . to string ( ) ;  <NL> buf . limit ( limit ) ; / / reset the limit <NL> return string ;  <NL>  }  COM: <s> reads a string </s>