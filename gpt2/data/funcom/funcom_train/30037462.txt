TDAT: public int count material threads needed ( ) {  <NL> int max thread id = 0 ;  <NL>  <NL> for ( cal core mesh mesh : map core mesh . values ( ) ) {  <NL> for ( cal core submesh submesh : mesh . vector core submesh ) {  <NL> max thread id = math . max ( max thread id , submesh . core material thread id ) ;  <NL>  }  <NL>  }  <NL>  <NL> return 1 + max thread id ;  <NL>  }  COM: <s> counts the number of core materials needed for this model </s>