TDAT: public void run when next visible ( ) {  <NL>  / / if there is one already : toggling twice is the identity <NL> if ( f folding runner ! = null ) {  <NL> f folding runner . cancel ( ) ;  <NL> return ;  <NL>  }  <NL> i workbench part site site = get site ( ) ;  <NL> if ( site ! = null ) {  <NL> i workbench page page = site . get page ( ) ;  <NL> if ( ! page . is part visible ( jsc editor . this ) ) {  <NL>  / / if we ' re not visible - defer until visible <NL> f page = page ;  <NL> f folding runner = this ;  <NL> page . add part listener ( this ) ;  <NL> return ;  <NL>  }  <NL>  }  <NL>  / / we ' re visible - run now <NL> toggle folding ( ) ;  <NL>  }  COM: <s> makes sure that the editors folding state is correct the next time </s>