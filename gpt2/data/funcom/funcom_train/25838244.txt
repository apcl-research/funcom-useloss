TDAT: public void finalize ( ) {  <NL> if ( state ! = state _ finalized ) {  <NL> state = state _ finalized ;  <NL> for ( iterator iterator = groups . iterator ( ) ; iterator . has next ( ) ; ) {  <NL> group grp = ( group ) iterator . next ( ) ;  <NL> grp . finalize ( ) ;  <NL> grp . set material ( materials . get ( grp . get material name ( ) ) ) ;  <NL>  }  <NL> for ( iterator < material > iterator = materials . values ( ) . iterator ( ) ; iterator . has next ( ) ; ) {  <NL> material mtl = iterator . next ( ) ;  <NL> mtl . finalize ( ) ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> convert all dynamic arrays to final non alterable ones </s>