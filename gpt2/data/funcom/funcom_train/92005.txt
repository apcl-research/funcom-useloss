TDAT: public void close ( ) throws sql exception {  <NL>  / / jdk 1 . 4 javadoc indicates close on a closed connection is a no - op <NL> if ( is closed ( ) )  <NL> return ;  <NL>  <NL>  <NL> if ( root connection = = this )  <NL>  {  <NL>  / * throw error to match db2 / jdbc if a tran is pending in non - autocommit mode * /  <NL> if ( ! auto commit & & ! transaction is idle ( ) ) {  <NL> throw new sql exception ( sql state . lang _ invalid _ transaction _ state ) ;  <NL>  }  <NL>  <NL> close ( exception close ) ;  <NL>  }  <NL> else <NL> set inactive ( ) ; / / nested connection <NL>  }  COM: <s> in some cases it is desirable to immediately release a </s>