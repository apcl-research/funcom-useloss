TDAT: private void enter modal ( ) throws interrupted exception {  <NL>  _ mode = modal ;  <NL> smart update ( " mode " , mode to string ( _ mode ) ) ;  <NL>  <NL> boolean had vm = false ;  <NL> if ( vm . current vm ( ) . has vm ( ) )  <NL>  {  <NL> had vm = true ;  <NL> vm . current vm ( ) . unlock vm ( ) ;  <NL>  }  <NL>  / / no need to synchronized ( _ mutex ) because no racing is possible <NL> executions . wait ( _ mutex ) ;  <NL> if ( had vm )  <NL> vm . current vm ( ) . lock vm ( ) ;  <NL>  }  COM: <s> set mode to modal and suspend this thread </s>