TDAT: private void prepare ( ) throws io exception {  <NL>  <NL> if ( offset > 0 ) {  <NL> int bytes read = 0 ;  <NL> int skip attempts = 0 ;  <NL> long count ;  <NL> while ( bytes read < offset ) {  <NL> count = in . skip ( ( long ) ( offset - bytes read ) ) ;  <NL> skip attempts + + ;  <NL> if ( count = = - 1 || skip attempts > 5 ) break ;  <NL> bytes read + = count ;  <NL>  }  <NL>  }  <NL>  <NL> byte count = width * height * depth ;  <NL> n pixels = width * height ;  <NL> buffer size = byte count / 25 ;  <NL> if ( buffer size < 8192 )  <NL> buffer size = 8192 ;  <NL> else <NL> buffer size = ( buffer size / 8192 ) * 8192 ;  <NL>  }  COM: <s> prepare the stream for reading </s>