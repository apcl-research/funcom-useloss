TDAT: public string change password ( ) {  <NL>  <NL> ir user admin = user service . get user ( admin user id , false ) ;  <NL>  <NL> if ( ! admin . has role ( ir role . admin _ role ) )  <NL>  {  <NL> return " access denied " ;  <NL>  }  <NL>  <NL> ir user = user service . get user ( id , false ) ;  <NL>  <NL> user service . update password ( password , ir user ) ;  <NL>  <NL> ir user . set password change required ( true ) ;  <NL> user service . make user persistent ( ir user ) ;  <NL>  <NL> if ( email password ) {  <NL> user service . email new password ( ir user , password , email message ) ;  <NL>  }  <NL>  <NL> return success ;  <NL>  }  COM: <s> reset password and send email to the user </s>