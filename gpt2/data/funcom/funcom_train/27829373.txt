TDAT: public void on update ( event evt ) {  <NL>  _ currdate = _ model . get date ( ) ;  <NL>  _ updtcount + + ;  <NL> update market ( ) ;  <NL> update traders ( ) ;  <NL>  <NL>  / * if ( _ hide charts during sim ) {  <NL> bar panel . set visible ( true ) ;  <NL>  _ simulation progress bar . set value ( ( int ) ( ( ( double ) _ updtcount / ( double ) _ model . get data size ( ) ) * 1000 ) ) ;  <NL>  } * /  <NL>  <NL> if ( evt . is year event ( ) ) {  <NL> update yearly report ( false ) ;  <NL>  }  <NL>  <NL>  _ prevdate = _ currdate ;  <NL>  }  COM: <s> updates the market and trader charts </s>