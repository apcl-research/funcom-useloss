TDAT: public void purchase up to ( int limit ) throws sql exception {  <NL> int a = super . f1 . retrieve amountfrom fundstbl ( super . get customer number ( ) ) ;  <NL> int count = 0 ;  <NL> string contract id ;  <NL> super . d1 . retrieve for salefrom contracttbl ( a ) ;  <NL> iterator < string > i = super . d1 . for sale . list iterator ( ) ;  <NL> while ( i . has next ( ) & & limit > = 0 ) {  <NL> contract id = i . next ( ) ;  <NL> buy contract ( contract id ) ;  <NL> limit = limit - super . d1 . ret res ( contract id ) ;  <NL> system . out . println ( " contract bought . " ) ;  <NL> count + + ;  <NL>  }  <NL> set bought ( count ) ;  <NL> return ;  <NL>  }  COM: <s> searches the database for contracts with sale status flag set to yes </s>