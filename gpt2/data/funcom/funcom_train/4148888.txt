TDAT: public query create query ( entity manager em ) {  <NL>  <NL> try {  <NL>  / / create the query in the usual way <NL> query q = em . create query ( _ query string buf . to string ( ) ) ;  <NL>  <NL>  / / set its parameters <NL> int parameter number = 0 ;  <NL> for ( object parameter : _ parameters ) {  <NL> q . set parameter ( + + parameter number , parameter ) ;  <NL>  }  <NL>  <NL> return q ;  <NL>  }  <NL> catch ( runtime exception e ) {  <NL> log . error ( " exception creating query \ " " + _ query string buf + " \ " . " ) ;  <NL> throw e ;  <NL>  }  <NL>  <NL>  }  COM: <s> create the query </s>