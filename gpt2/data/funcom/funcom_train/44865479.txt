TDAT: protected measurement tool preferences get tool preferences ( measurement tool ref tool ref ) {  <NL> if ( tool prefs = = null )  <NL> tool prefs = new hash map < measurement tool ref , measurement tool preferences > ( ) ;  <NL> measurement tool preferences tool pref = tool prefs . get ( tool ref ) ;  <NL> if ( tool pref ! = null )  <NL> return tool pref ;  <NL>  <NL> tool pref = measurement tool prefs store . shared instance ( ) . get tool preferences ( tool ref . tool pref id ) ;  <NL> if ( tool pref ! = null )  <NL> tool prefs . put ( tool ref , tool pref ) ;  <NL> return tool pref ;  <NL>  }  COM: <s> returns the measurement tool prefernces for the given tool ref </s>