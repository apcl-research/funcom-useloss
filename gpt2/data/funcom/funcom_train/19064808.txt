TDAT: private int encode next character ( ) throws io exception {  <NL> int read = in . read ( ) ;  <NL>  <NL> if ( read = = - 1 ) return - 1 ;  <NL>  <NL> in bytes . clear ( ) ;  <NL> in bytes . put ( 0 , ( char ) read ) ;  <NL>  <NL> out bytes . clear ( ) ;  <NL> coder result result = encoder . encode ( in bytes , out bytes , in . available ( ) = = 0 ) ;  <NL>  <NL>  / / if the character cannot be encoded add a dummy character <NL> if ( result . is malformed ( ) || result . is unmappable ( ) ) {  <NL> out bytes . put ( ( byte ) 0 ) ;  <NL> return out bytes . limit ( ) ;  <NL>  }  <NL>  <NL> return out bytes . position ( ) ;  <NL>  }  COM: <s> read one character and encode it to the according charset </s>