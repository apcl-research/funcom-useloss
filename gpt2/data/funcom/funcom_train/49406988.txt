TDAT: public semantic node resolve ( final vertex vertex ) {  <NL> if ( vertex = = null ) {  <NL> return null ;  <NL>  } else if ( ! vertex . is persistent ( ) ) {  <NL> throw new illegal state exception ( " cannot resolve transient vertex : " + vertex ) ;  <NL>  }  <NL>  <NL> final long id = vertex . get id ( ) ;  <NL> if ( id map . contains key ( id ) ) {  <NL> return id map . get ( id ) ;  <NL>  } else {  <NL> final semantic node node = wrap ( vertex ) ;  <NL> id map . put ( id , node ) ;  <NL> invoke loading handler ( node ) ;  <NL> return node ;  <NL>  }  <NL>  }  COM: <s> looks first in cache than creates a new node based on vertex </s>