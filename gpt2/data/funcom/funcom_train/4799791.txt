TDAT: public string animate ( double speedmul ) {  <NL> string ret = get current frame ( ) ;  <NL> if ( running ) {  <NL> phase + = speed * speedmul ;  <NL> while ( phase > = 1 . 0 ) {  <NL> phase - = 1 . 0 ;  <NL> framenr + = increment ;  <NL> if ( ! pingpong ) {  <NL> if ( framenr > = frames . length ) framenr - = frames . length ;  <NL> if ( framenr < 0 ) framenr + = frames . length ;  <NL>  } else {  <NL> if ( framenr > = frames . length ) {  <NL> framenr - = 2 * increment ;  <NL> increment = - increment ;  <NL>  }  <NL> if ( framenr < 0 ) {  <NL> framenr - = 2 * increment ;  <NL> increment = - increment ;  <NL>  }  <NL>  }  <NL>  }  <NL>  }  <NL> return ret ;  <NL>  }  COM: <s> does one animation step and returns current image </s>