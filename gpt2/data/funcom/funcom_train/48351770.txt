TDAT: private void add non atomic blocks ( list < integer > context , set < integer > non atomic block set ) {  <NL> list iterator < integer > it = context . list iterator ( context . size ( ) ) ;  <NL> while ( it . has previous ( ) ) {  <NL> it . previous ( ) ; / / ignore count <NL> integer iid = it . previous ( ) ;  <NL>  / / do not mark it if we have previously marked it <NL> if ( all blocks . contains ( iid ) & & ! vc non atomic blocks . contains ( iid ) & & ! algo non atomic blocks . contains ( iid ) )  <NL> non atomic block set . add ( iid ) ;  <NL>  }  <NL>  }  COM: <s> marks all the blocks in the given context as </s>