TDAT: @ test public void test end of context auto commit level ( ) {  <NL> controller . immediate commit level = log entry . log4j _ fatal ;  <NL> controller . max un commited messages = 1000 ;  <NL> controller . end of context auto commit level = log entry . log4j _ warn ;  <NL>  <NL> context . checking ( new expectations ( ) { {  <NL> one ( publisher ) . publish ( with ( any ( list . class ) ) ) ;  <NL> ignoring ( persister ) ;  <NL>  } } ) ;  <NL>  <NL> controller . create context ( transaction _ token ,  <NL> new code block ( ) {  <NL> public void execute ( ) {  <NL> controller . add log message ( transaction _ token , entry _ w ) ;  <NL>  } }  <NL>  ) ;  <NL>  }  COM: <s> make sure we auto commit at the end of context by </s>