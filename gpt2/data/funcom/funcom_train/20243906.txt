TDAT: public void set capacity ( int capacity ) {  <NL> if ( capacity < 0 ) {  <NL> throw new illegal argument exception ( ) ;  <NL>  }  <NL>  <NL> eviction lock . lock ( ) ;  <NL> try {  <NL> this . capacity = math . min ( capacity , maximum _ capacity ) ;  <NL> drain buffers ( amortized _ drain _ threshold ) ;  <NL> evict ( ) ;  <NL>  } finally {  <NL> eviction lock . unlock ( ) ;  <NL>  }  <NL> notify listener ( ) ;  <NL>  }  COM: <s> sets the maximum weighted capacity of the map and eagerly evicts entries </s>