TDAT: private detached criteria get investigation geometry filter ( final geometry geometry ) {  <NL>  <NL> final detached criteria dc = detached criteria . for class ( event . class , " event " ) ;  <NL> dc . create criteria ( " event . investigations " ) . add ( restrictions . eq property ( " id " , " investigation . id " ) ) ;  <NL> dc . create criteria ( " event . geography " ) . add ( spatial restrictions . within or filter ( " geometry " , geometry , 1000 , true ) ) ;  <NL> dc . set projection ( projections . property ( " id " ) ) ;  <NL>  <NL>  / / dc . set comment ( " * / / * + ordered " ) ;  <NL> return dc ;  <NL>  }  COM: <s> get the subquery for filtering based on events </s>