TDAT: public map change attributes ( map change ) {  <NL> map undo = attributes . apply map ( change ) ;  <NL> object new value = graph constants . get value ( attributes ) ;  <NL>  / / check for inconsistencies <NL> if ( user object ! = null & & new value = = null )  <NL> graph constants . set value ( attributes , user object ) ;  <NL> else <NL> set user object ( new value ) ;  <NL>  / / ensure non - null bounds <NL> rectangle2d bounds = graph constants . get bounds ( attributes ) ;  <NL> if ( bounds = = null )  <NL> graph constants . set bounds ( attributes , default bounds ) ;  <NL> return undo ;  <NL>  }  COM: <s> apply code change code to the cell and sync user object </s>