TDAT: public void add document ( document doc , analyzer analyzer ) throws io exception {  <NL> document writer dw =  <NL> new document writer ( ram directory , analyzer , similarity , max field length ) ;  <NL> string segment name = new segment name ( ) ;  <NL> dw . add document ( segment name , doc ) ;  <NL> synchronized ( this ) {  <NL> segment infos . add element ( new segment info ( segment name , 1 , ram directory ) ) ;  <NL> maybe merge segments ( ) ;  <NL>  }  <NL>  }  COM: <s> adds a document to this index using the provided analyzer instead of the </s>