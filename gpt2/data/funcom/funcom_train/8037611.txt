TDAT: private void complete transaction ( ) throws vmcs exception {  <NL> try {  <NL> drink dispensed = this . dispense ctrl . dispense drink ( selection ) ;  <NL> if ( ! drink dispensed ) {  <NL> terminate transaction ( ) ;  <NL> return ;  <NL>  }  <NL>  <NL> int change required = this . total inserted - this . price ;  <NL> if ( change required > 0 ) {  <NL> change given = this . change giver . give change ( change required ) ;  <NL> if ( ! change given ) {  <NL> terminate transaction ( ) ;  <NL> return ;  <NL>  }  <NL>  }  <NL>  <NL> cash stored = this . coin receive . store cash ( ) ;  <NL> if ( ! cash stored ) {  <NL> terminate transaction ( ) ;  <NL> return ;  <NL>  }  <NL>  <NL> this . dispense ctrl . allow selection ( true ) ;  <NL>  <NL>  } catch ( vmcs exception ex ) {  <NL> terminate transaction ( ) ;  <NL> throw ex ;  <NL>  }  <NL>  }  COM: <s> this operation is performed when the transaction controller is informed that </s>