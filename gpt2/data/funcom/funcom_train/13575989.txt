TDAT: protected double calc plan weight ( final plan plan , final double max score ) {  <NL>  <NL> if ( plan . get score ( ) = = null ) {  <NL> return double . na n ;  <NL>  }  <NL> double score = plan . get score ( ) ;  <NL> if ( stay home plan . is a stay home plan ( plan ) ) {  <NL> score = stay home score ;  <NL>  }  <NL> double weight = math . exp ( beta brain * ( score - max score ) ) ;  <NL> if ( weight < min _ weight ) {  <NL> weight = min _ weight ;  <NL>  }  <NL> return weight ;  <NL>  }  COM: <s> calculates the weight of a single plan </s>