TDAT: public void undo command ( ) {  <NL> int index = _ command index - 1 ;  <NL> if ( index > = 0 ) {  <NL> i undoable command command = _ transaction commands . get ( index ) ;  <NL> if ( command . is executed ( ) ) {  <NL> command . undo ( ) ;  <NL>  / *  <NL>  * remove deferred events for the undone command . events <NL>  * which are posted while undo will hereby also removed ,  <NL>  * because they are added to the same queue since the <NL>  * command were still present at undo time .  <NL>  * /  <NL>  _ deferred events . remove ( command ) ;  <NL>  }  <NL>  _ command index - - ;  <NL>  }  <NL>  }  COM: <s> undoes the last not undone command of the transaction </s>