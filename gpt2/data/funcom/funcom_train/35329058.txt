TDAT: private void write metadata ( ) throws io exception {  <NL> if ( metadata = = null ) {  <NL> if ( write default jfif ) {  <NL> jfif marker segment . write default jfif ( ios ,  <NL> thumbnails ,  <NL> icc profile ,  <NL> this ) ;  <NL>  }  <NL> if ( write adobe ) {  <NL> adobe marker segment . write adobe segment ( ios , new adobe transform ) ;  <NL>  }  <NL>  } else {  <NL> metadata . write to stream ( ios ,  <NL> ignore jfif ,  <NL> force jfif ,  <NL> thumbnails ,  <NL> icc profile ,  <NL> ignore adobe ,  <NL> new adobe transform ,  <NL> this ) ;  <NL>  }  <NL>  }  COM: <s> writes the metadata out when called by the native code </s>