TDAT: public void shutdown ( ) {  <NL> final xmpp connection con = spark manager . get connection ( ) ;  <NL>  <NL> if ( con . is connected ( ) ) {  <NL>  / / send disconnect .  <NL> con . disconnect ( ) ;  <NL>  }  <NL>  <NL>  / / notify all main window listeners <NL> try {  <NL> fire window shutdown ( ) ;  <NL>  }  <NL> catch ( exception ex ) {  <NL> log . error ( ex ) ;  <NL>  }  <NL>  / / close application .  <NL> system . exit ( 1 ) ;  <NL>  }  COM: <s> prepares spark for shutting down by first calling all </s>