TDAT: public int diatonic pitch ( int pitch ) {  <NL> if ( contains ( pitch ) ) return pitch ;  <NL> for ( int disp = 1 ; disp < 3 ; disp + + ) {  <NL> if ( pitch - disp > 0 & & contains ( pitch - disp ) ) return pitch - disp ;  <NL> if ( pitch + disp < 128 & & contains ( pitch + disp ) ) return pitch + disp ;  <NL>  }  <NL> return pitch ; / / oh well , it ' s still accidental after all !  <NL>  }  COM: <s> returns the nearest diatonic pitch preference to lower </s>