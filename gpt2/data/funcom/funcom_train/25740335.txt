TDAT: public jpli exp peak list rank transform ( jpli exp peak list spectrum ) {  <NL> double [ ] intensities _ old = spectrum . get intensities ( ) ;  <NL> double [ ] intensities = new double [ intensities _ old . length ] ;  <NL>  <NL>  / * int [ ] ranks = new int [ intensities . length ] ;  <NL> for ( int i = 0 ; i < intensities . length ; i + + ) {  <NL> ranks [ i ] = i ;  <NL>  } * /  <NL> int [ ] idx = simple type array . sort indexes up ( intensities _ old ) ;  <NL>  <NL>  / / assign relative ranks <NL> for ( int i = 0 ; i < intensities _ old . length ; i + + ) {  <NL> intensities [ idx [ i ] ] = ( i + 1 . 0 ) / intensities _ old . length ;  <NL>  }  <NL>  <NL>  / / update spectrum <NL> spectrum . set intensities ( intensities ) ;  <NL>  <NL> return spectrum ;  <NL>  }  COM: <s> transform each intensity to its normalized rank n number of peaks </s>