TDAT: protected void do finalize ( ) {  <NL> if ( settings = = null ) {  <NL> set invalid ( ) ;  <NL> return ;  <NL>  }  <NL> if ( is valid ( ) ) {  <NL>  / / create the map <NL> system . out . println ( " creating the map . " ) ;  <NL> map = new map ( settings . get map width ( ) , settings . get map height ( ) , settings . get map type ( ) , player manager . get instance ( ) . get player count ( ) ) ;  <NL> system . out . println ( " map creation finished . sending the map . " ) ;  <NL> map . register ( ) ;  <NL> system . out . println ( " sending the map finished . " ) ;  <NL>  / / create a game engine using the collected information <NL> set next engine ( new server game engine ( map ) ) ;  <NL>  }  <NL>  }  COM: <s> this function is invoked when the engine ends after a call to </s>