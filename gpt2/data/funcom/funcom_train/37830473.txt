TDAT: protected int get maximal amount ( final string product name , final player player ) {  <NL> int max amount = integer . max _ value ;  <NL>  <NL> for ( final map . entry < string , integer > entry : get required resources per product ( product name ) . entry set ( ) ) {  <NL> final int limitation by this resource = player . get number of equipped ( entry . get key ( ) ) / entry . get value ( ) ;  <NL> max amount = math . min ( max amount , limitation by this resource ) ;  <NL>  }  <NL>  <NL> return max amount ;  <NL>  }  COM: <s> at the time the order is made </s>