TDAT: private lock lock _ get lock ( ) {  <NL> lock lock = null ;  <NL>  / * * get a lock * /  <NL>  / *  <NL> if ( free _ locks ! = null ) {  <NL> lock = free _ locks ;  <NL> free _ locks = free _ locks . links ;  <NL> lock . links = null ;  <NL> n locks + + ;  <NL>  } else * /  <NL> if ( n locks < max locks ) {  <NL> lock = new lock ( ) ;  <NL> n locks + + ;  <NL>  }  <NL> return lock ;  <NL>  }  COM: <s> get a lock from free lock list or new a lock </s>