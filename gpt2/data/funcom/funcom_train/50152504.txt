TDAT: private void add _ appt ( ) throws warning , exception {  <NL>  <NL>  / / get a new appt from the model and set it from the user data <NL> appointment model calmod _ = appointment model . get reference ( ) ;  <NL> appointment r = calmod _ . new appt ( ) ;  <NL> set appt ( r , true ) ;  <NL>  <NL>  / / encrypt it <NL> if ( encrypt box . is selected ( ) ) {  <NL> encrypt appt ( r ) ;  <NL>  }  <NL>  <NL>  / / save it <NL> calmod _ . save appt ( r ) ;  <NL>  <NL>  / / clear ui and show a new appt <NL> showapp ( - 1 , null ) ;  <NL>  }  COM: <s> add an appointment to the model based on the ui settings </s>