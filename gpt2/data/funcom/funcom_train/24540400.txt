TDAT: protected void image complete ( int status ) {  <NL> if ( os ! = null ) {  <NL>  / / not yet completed .  <NL> try {  <NL> os . write byte ( image data constants . cmd _ done ) ;  <NL> os . write int ( status ) ;  <NL> os . close ( ) ;  <NL> os = null ;  <NL>  } catch ( io exception e ) {  <NL> e . print stack trace ( ) ;  <NL>  } finally {  <NL> if ( os ! = null ) {  <NL> try {  <NL> os . close ( ) ; / / we had an error while terminating . just close it to be safe .  <NL>  } catch ( io exception e1 ) {  <NL>  }  <NL>  }  <NL>  }  <NL>  }  <NL>  <NL> synchronized ( this ) {  <NL> this . status = image data constants . not _ in _ progress ;  <NL> notify all ( ) ;  <NL>  }  <NL>  }  COM: <s> send image completion status to the host </s>