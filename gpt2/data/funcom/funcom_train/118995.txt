TDAT: public point snap ( point p ) {  <NL>  <NL> if ( grid enabled & & p ! = null ) {  <NL>  <NL> double sgs = ( double ) grid size * get scale ( ) ;  <NL>  <NL> p . x = ( int ) math . round ( math . round ( p . x / sgs ) * sgs ) ;  <NL> p . y = ( int ) math . round ( math . round ( p . y / sgs ) * sgs ) ;  <NL>  <NL>  }  <NL>  <NL> return p ;  <NL>  <NL>  }  COM: <s> returns the given point applied to the grid </s>