TDAT: protected void terminate all connections ( ) {  <NL> this . termination lock . lock ( ) ;  <NL> try {  <NL>  / / close off all connections .  <NL> for ( int i = 0 ; i < this . partition count ; i + + ) {  <NL> connection handle conn ;  <NL> while ( ( conn = this . partitions [ i ] . get free connections ( ) . poll ( ) ) ! = null ) {  <NL> post destroy connection ( conn ) ;  <NL>  <NL> try {  <NL> conn . internal close ( ) ;  <NL>  } catch ( sql exception e ) {  <NL> logger . error ( " error in attempting to close connection " , e ) ;  <NL>  }  <NL>  }  <NL>  <NL>  }  <NL>  } finally {  <NL> this . termination lock . unlock ( ) ;  <NL>  }  <NL>  }  COM: <s> closes off all connections in all partitions </s>