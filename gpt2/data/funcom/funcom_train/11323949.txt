TDAT: @ override public void on render ( ) {  <NL> if ( this . contents = = null ) {  <NL> throw new illegal state exception ( " json contents is not specified . " ) ;  <NL>  }  <NL>  <NL> http servlet response res = get context ( ) . get response ( ) ;  <NL> output stream out = null ;  <NL>  <NL> try {  <NL> res . set content type ( this . content type ) ;  <NL> out = res . get output stream ( ) ;  <NL> out . write ( json . encode ( this . contents ) . get bytes ( " utf - 8 " ) ) ;  <NL>  <NL> res . flush buffer ( ) ;  <NL>  <NL>  } catch ( exception ex ) {  <NL> throw new runtime exception ( ex ) ;  <NL>  } finally {  <NL> ext utils . close quietly ( out ) ;  <NL>  }  <NL>  }  COM: <s> writes json response in this method </s>