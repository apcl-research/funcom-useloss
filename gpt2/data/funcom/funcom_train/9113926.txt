TDAT: public void register ( user obj user obj ) throws ejb exception {  <NL> session factory hfactory = null ;  <NL> session msession = null ;  <NL>  <NL> try {  <NL> hfactory = ( session factory ) ctx . lookup ( hibernate session factory ) ;  <NL> msession = ( session ) ctx . lookup ( smtp session factory ) ;  <NL>  <NL> manager . register ( hfactory . open session ( ) , msession , user obj ,  <NL> default email domain ) ;  <NL>  } catch ( exception e ) {  <NL> throw new ejb exception ( e ) ;  <NL>  } finally {  <NL>  }  <NL>  }  COM: <s> register new user </s>