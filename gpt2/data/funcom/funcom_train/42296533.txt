TDAT: public fitness result fitness function ( board state [ ] sequence ) {  <NL> fitness result fr = new fitness result ( ) ;  <NL> double legality = grade legality ( sequence ) ;  <NL> double length = grade length ( sequence ) ;  <NL> double progress = grade progress ( sequence , fr ) ;  <NL> double repeatition = grade repetition ( sequence ) ;  <NL> double total = ( legality * _ legality _ weight ) +  <NL>  ( length * _ length _ weight ) +  <NL>  ( progress * _ progress _ weight ) +  <NL>  ( repeatition * _ repetitions _ weight ) ;  <NL> fr . total = math . max ( 1 , ( int ) total ) ;  <NL> fr . legal = ( legality * _ legality _ weight ) ;  <NL> fr . progress = ( progress * _ progress _ weight ) ;  <NL> fr . repeat = ( repeatition * _ repetitions _ weight ) ;  <NL> return fr ;  <NL>  }  COM: <s> this is the main function of this class </s>