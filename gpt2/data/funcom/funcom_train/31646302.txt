TDAT: public void write ( int b ) throws io exception {  <NL>  <NL>  / / check for cr <NL> if ( b = = ' \r ' ) {  <NL> out . write ( newline ) ;  <NL>  <NL>  / / check for lf <NL>  } else if ( b = = ' \n ' ) {  <NL>  <NL>  / / only output if not preceeded by cr <NL> if ( lastb ! = ' \r ' ) {  <NL> out . write ( newline ) ;  <NL>  }  <NL>  <NL>  / / otherwise , it ' s safe to write the byte <NL>  } else {  <NL> out . write ( b ) ;  <NL>  } / / if <NL>  <NL>  / / track the last byte <NL> lastb = b ;  <NL>  <NL>  } / / write ( )  COM: <s> write byte to filtered output stream </s>