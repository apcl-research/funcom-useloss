TDAT: public double get night length ( long time ) {  <NL>  <NL> cal . set time ( new date ( time ) ) ;  <NL> int doy = cal . get ( calendar . day _ of _ year ) ;  <NL>  <NL> double mm = 1 . 0 - math . tan ( site . get latitude ( ) ) * math . tan ( einc * math . cos ( ( doy + 10 ) * dyfrac ) ) ;  <NL>  / / if ( mm < 0 . 0 || mm > 2 . 0 )  <NL>  / / system . err . println ( " error mm " + mm ) ;  <NL>  <NL>  / / night length as fraction <NL> double b = 1 . 0 - math . to degrees ( math . acos ( 1 . 0 - mm ) ) / 180 . 0 ;  <NL>  <NL> return b * 86400000 . 0 ; / / in ms <NL>  <NL>  }  COM: <s> calculate the length of the night at specified time for the site </s>