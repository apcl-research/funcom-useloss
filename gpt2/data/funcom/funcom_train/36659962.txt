TDAT: public boolean shutdown ( ) {  <NL> synchronized ( state lock ) {  <NL> while ( state = = state . shutting _ down ) {  <NL> try {  <NL> state lock . wait ( ) ;  <NL>  } catch ( interrupted exception e ) {  <NL> return false ;  <NL>  }  <NL>  }  <NL> if ( state = = state . shutdown ) {  <NL> throw new illegal state exception (  <NL>  " service is already shut down " ) ;  <NL>  }  <NL> state = state . shutting _ down ;  <NL>  }  <NL> boolean done = false ;  <NL> try {  <NL> if ( store . shutdown ( ) ) {  <NL> synchronized ( state lock ) {  <NL> state = state . shutdown ;  <NL> state lock . notify all ( ) ;  <NL>  }  <NL> done = true ;  <NL> return true ;  <NL>  } else {  <NL> return false ;  <NL>  }  <NL>  } finally {  <NL> if ( ! done ) {  <NL> synchronized ( state lock ) {  <NL> state = state . running ;  <NL> state lock . notify all ( ) ;  <NL>  }  <NL>  }  <NL>  }  <NL>  }  COM: <s> attempts to shut down this service returning a value indicating whether </s>