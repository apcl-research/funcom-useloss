TDAT: protected bit set calc merge state ( bit set new session state , bit set old session state ) {  <NL> if ( old session state . get ( session state . is _ request ) ) {  <NL>  / / in a request , it is the start of processing . therefore , set bit .  <NL> new session state . or ( old session state ) ;  <NL>  } else {  <NL>  / / in a response , it is the end of processing . therefore , delete bit .  <NL> new session state . and not ( old session state ) ;  <NL>  }  <NL> return new session state ;  <NL>  }  COM: <s> bit calculate processing messages </s>