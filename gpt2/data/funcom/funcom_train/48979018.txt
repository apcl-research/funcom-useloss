TDAT: protected void set text ( xtext document document , string text ) {  <NL> document . set ( text ) ;  <NL> f resource = create resource ( text ) ;  <NL> document . set input ( f resource ) ;  <NL> annotation model annotation model = new annotation model ( ) ;  <NL> if ( document instanceof i synchronizable ) {  <NL> object lock = ( ( i synchronizable ) document ) . get lock object ( ) ;  <NL> if ( lock = = null ) {  <NL> lock = new object ( ) ;  <NL>  ( ( i synchronizable ) document ) . set lock object ( lock ) ;  <NL>  }  <NL>  ( ( i synchronizable ) annotation model ) . set lock object ( lock ) ;  <NL>  }  <NL> f source viewer . set document ( document , annotation model ) ;  <NL>  }  COM: <s> should be called only once during initialization </s>