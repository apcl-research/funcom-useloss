TDAT: protected void simulate direct revelation ( ) {  <NL> iterator < agent > traders = auction . get trader iterator ( ) ;  <NL> while ( traders . has next ( ) ) {  <NL> abstract trading agent trader = ( abstract trading agent ) traders . next ( ) ;  <NL> int quantity = trader . determine quantity ( auction ) ;  <NL> double value = trader . get valuation ( auction ) ;  <NL> boolean is bid = trader . is buyer ( ) ;  <NL> order shout = new order ( trader , quantity , value , is bid ) ;  <NL> shouts . add ( shout ) ;  <NL> enumerate truthful shout ( shout ) ;  <NL>  }  <NL>  }  COM: <s> update the market state with a truthful shout from each trader </s>