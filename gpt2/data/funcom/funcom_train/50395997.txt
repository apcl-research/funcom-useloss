TDAT: public string wait until done ( int timeout ) throws exception {  <NL> status type . enum status = status type . undefined ;  <NL> long start = system . current time millis ( ) ;  <NL> long elapsed = 0 ;  <NL> while ( true ) {  <NL> if ( timeout > 0 & & elapsed > timeout ) break ;  <NL> elapsed = system . current time millis ( ) - start ;  <NL> status = get status ( ) ;  <NL> if ( status . equals ( status type . successful ) ) break ;  <NL> else if ( status . equals ( status type . failed ) ) {  <NL> throw new exception ( " job failed " + ( status description ! = null ? " . the error was : " + status description : " " ) ) ;  <NL>  }  <NL> thread . sleep ( 500 ) ;  <NL>  }  <NL> return status . to string ( ) ;  <NL>  }  COM: <s> convenience method that waits until a job has finished </s>