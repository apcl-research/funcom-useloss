TDAT: public void end ( long ref ) {  <NL> long diff = system . current time millis ( ) - ref ;  <NL>  <NL> count + = diff ;  <NL> n samples + + ;  <NL>  <NL> if ( diff > max ) {  <NL> max = diff ;  <NL>  }  <NL>  <NL> if ( diff < min ) {  <NL> min = diff ;  <NL>  }  <NL>  <NL> running count - = running [ running idx ] ;  <NL> running count + = diff ;  <NL> running [ running idx + + ] = diff ;  <NL>  <NL> if ( running idx > = running . length ) {  <NL> running idx = 0 ;  <NL>  }  <NL>  }  COM: <s> commit a event using a reference from start </s>