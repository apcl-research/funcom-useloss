TDAT: public void message received ( message message , reply reply ) {  <NL> byte buffer buffer = message . get content buffer ( ) ;  <NL> int remaining = buffer . remaining ( ) ;  <NL>  <NL> while ( remaining > 0 ) {  <NL> message builder builder = create message builder ( ) ;  <NL> int size = math . min ( block size , remaining ) ;  <NL> buffer . limit ( buffer . position ( ) + size ) ;  <NL> builder . get content buffer ( size ) . put ( buffer ) ;  <NL> reply . send ans ( builder . get message ( ) ) ;  <NL> remaining - = size ;  <NL>  }  <NL>  <NL>  / / after all the ans replies have sent a nul must be sent <NL> reply . send nul ( ) ;  <NL>  }  COM: <s> echoes the received data back to the sender in ans </s>