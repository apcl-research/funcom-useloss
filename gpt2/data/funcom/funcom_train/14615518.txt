TDAT: public void add factory ( compileable factory c factory ) {  <NL> map < string , compileable factory > c new templates = ( map < string , compileable factory > ) ( ( hash map < string , compileable factory > ) m _ c templates ) . clone ( ) ;  <NL>  <NL> string a name = c factory . get name ( ) ;  <NL>  / / for thread - safety , we clone the old map before adding the <NL>  / / new template .  <NL> c new templates . put ( a name , c factory ) ;  <NL> m _ c templates = c new templates ;  <NL>  }  COM: <s> adds a prototype template to the registry </s>