TDAT: public rule apply to rule ( collection r ) {  <NL> cached to string = null ;  <NL> vector new body = new vector ( get body ( ) . size ( ) ) ;  <NL>  <NL> for ( iterator it = get body ( ) . iterator ( ) ; it . has next ( ) ; ) {  <NL> new body . add ( ( ( fact ) it . next ( ) ) . apply ( r ) ) ;  <NL>  }  <NL>  <NL> rule rule = new rule impl ( new body , ( fact ) get head ( ) . apply ( r ) ) ;  <NL> rule . set body or connected ( is body or connected ( ) ) ;  <NL> return rule ;  <NL>  }  COM: <s> apply a set of substitutions </s>