TDAT: public void draw trace and save it ( graphics2d g2d , int x , int y , float dx , float dy , agent < agent view properties , cell view properties > agent ) {  <NL> color color = agent . get additionnal property ( ) . get color ( ) ;  <NL>  <NL> draw trace with repaint ( g2d , x , y , dx , dy ) ;  <NL>  <NL> trace t = new trace ( dx , dy , color ) ;  <NL> synchronized ( traces ) {  <NL> traces [ x ] [ y ] . add ( t ) ;  <NL>  }  <NL> agent . get additionnal property ( ) . get traces ( ) . add ( new trace model ( x , y , agent , t ) ) ;  <NL>  }  COM: <s> it doesnt change the color of the g2d it must be initialized before </s>