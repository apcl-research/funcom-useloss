TDAT: public void incoming message ( message m ) {  <NL> listeners . nl message received ( protocol . signal to string ( m . signal ) ) ;  <NL> switch ( m . signal ) {  <NL> case protocol . echo _ req :  <NL> send message ( protocol . echo _ cfm , null ) ;  <NL> break ;  <NL> case protocol . echo _ cfm :  <NL> break ;  <NL> default :  <NL>  / / message queue . append ( m ) ;  <NL> if ( null ! = peer ) {  <NL> peer . process message ( m ) ;  <NL>  }  <NL>  }  <NL> m = null ;  <NL>  }  COM: <s> called when the connection has received a message on the socket </s>