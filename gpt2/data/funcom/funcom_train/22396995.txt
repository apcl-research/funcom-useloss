TDAT: public void shutdown ( boolean wait ) {  <NL> if ( ! connection thread . is alive ( ) ) {  <NL> return ;  <NL>  }  <NL> synchronized ( request queue ) {  <NL> shutdown in progress = true ;  <NL>  }  <NL> if ( wait ) {  <NL> object element ;  <NL> synchronized ( request queue ) {  <NL> element = request queue . element ( ) ;  <NL>  }  <NL> while ( element ! = null ) {  <NL> synchronized ( request queue ) {  <NL> element = request queue . element ( ) ;  <NL>  }  <NL> thread . yield ( ) ;  <NL>  }  <NL>  }  <NL> set connection state ( state _ closing ) ;  <NL> connection thread . shutdown ( ) ;  <NL> try {  <NL> connection thread . join ( ) ;  <NL>  } catch ( interrupted exception e ) { }  <NL>  <NL> synchronized ( request queue ) {  <NL> shutdown in progress = false ;  <NL>  }  <NL> mail connection manager . get instance ( ) . fire mail connection state changed (  <NL> client . get connection config ( ) ,  <NL> mail connection state event . state _ disconnected ) ;  <NL>  }  COM: <s> shutdown the mail connection handler thread </s>