TDAT: public void expand ( ) throws macro exception {  <NL> for ( string name : macros . key set ( ) ) {  <NL> if ( is used ( name ) )  <NL> macros . put ( name , expand macro ( name , get definition ( name ) ) ) ;  <NL>  / / this put doesn ' t get a new key , so only a new value <NL>  / / is set for the key " name "  <NL>  }  <NL>  }  COM: <s> expands all stored macros so that get definition always returns </s>