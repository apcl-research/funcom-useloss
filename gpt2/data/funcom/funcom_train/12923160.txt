TDAT: public void flush ( ) throws io exception {  <NL> stream . write ( buffer , 0 , index ) ;  <NL> stream . flush ( ) ;  <NL>  <NL> int diff ;  <NL> if ( offset = = 0 ) {  <NL> diff = 0 ;  <NL>  } else {  <NL> diff = 1 ;  <NL> buffer [ 0 ] = buffer [ index ] ;  <NL>  }  <NL>  <NL> for ( int i = diff ; i < buffer . length ; i + + ) {  <NL> buffer [ i ] = 0 ;  <NL>  }  <NL>  <NL> pos + = index ;  <NL> index = 0 ;  <NL>  }  COM: <s> write the data currently stored in the buffer to the underlying stream </s>