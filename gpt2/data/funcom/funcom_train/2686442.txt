TDAT: public void write to ( output stream os ) throws io exception , messaging exception {  <NL> if ( this . message = = null || ! is modified ( ) ) {  <NL>  / / we do not want to instantiate the message . . . just read from <NL>  / / source <NL>  / / and write to this outputstream <NL> input stream in = this . source . get input stream ( ) ;  <NL> try {  <NL> copy stream ( in , os ) ;  <NL>  } finally {  <NL>  }  <NL>  } else {  <NL> write to ( os , os ) ;  <NL>  }  <NL>  }  COM: <s> rewritten for optimization purposes </s>