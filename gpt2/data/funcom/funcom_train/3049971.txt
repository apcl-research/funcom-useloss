TDAT: public void post update ( object entity , object [ ] updated state , object next version ) {  <NL> this . loaded state = updated state ;  <NL>  <NL> set lock mode ( lock mode . write ) ;  <NL>  <NL> if ( get persister ( ) . is versioned ( ) ) {  <NL> this . version = next version ;  <NL> get persister ( ) . set property value (  <NL> entity ,  <NL> get persister ( ) . get version property ( ) ,  <NL> next version ,  <NL> entity mode <NL>  ) ;  <NL>  }  <NL>  <NL> field interception helper . clear dirty ( entity ) ;  <NL>  }  COM: <s> after actually updating the database update the snapshot information </s>