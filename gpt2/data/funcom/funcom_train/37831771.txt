TDAT: public void cancel trade ( ) {  <NL> if ( trade state = = trade state . no _ active _ trade ) {  <NL> return ;  <NL>  }  <NL>  <NL> player . send private text ( " you canceled the trade " ) ;  <NL> player partner = singleton repository . get rule processor ( ) . get player ( partner name ) ;  <NL> if ( partner ! = null ) {  <NL> partner . send private text ( player . get name ( ) + " canceled the trade with you . " ) ;  <NL> partner . cancel trade internally ( player . get name ( ) ) ;  <NL>  }  <NL> cancel trade internally ( partner name ) ;  <NL>  }  COM: <s> cancels a trade and tells the player and partner about it </s>