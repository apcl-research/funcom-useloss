TDAT: public void rewrite ( ) {  <NL> final string buffer nsb = new string buffer (  <NL> original tag text . length ( ) + 32 ) ;  <NL> nsb . append ( ' < ' ) ;  <NL> nsb . append ( name ) ;  <NL> final iterator < string > it = attr . key set ( ) . iterator ( ) ;  <NL> while ( it . has next ( ) ) {  <NL> final string k = ( string ) it . next ( ) ;  <NL> nsb . append ( ' ' ) ;  <NL> nsb . append ( k ) ;  <NL> final string v = ( string ) attr . get ( k ) ;  <NL> if ( v ! = null ) {  <NL> nsb . append ( ' = ' ) ;  <NL> nsb . append ( v ) ;  <NL>  }  <NL>  }  <NL> if ( original tag text . ends with ( " / > " ) )  <NL> nsb . append ( " / > " ) ;  <NL> else <NL> nsb . append ( ' > ' ) ;  <NL> new tag text = nsb . to string ( ) ;  <NL>  }  COM: <s> if changes have been made this rewrites the tags internal structure </s>