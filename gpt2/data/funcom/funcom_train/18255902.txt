TDAT: public void quit ( ) {  <NL> if ( in main loop ) {  <NL> quit requested = true ;  <NL>  / / running , so we have to allow current iteration to finish <NL> stop ( ) ;  <NL>  }  <NL>  / / only one chance a quit request , otherwise we assume that the scape is <NL>  / / allready fulfilling it .  <NL> else if ( ! quit requested ) {  <NL> quit finally ( ) ;  <NL>  }  <NL>  }  COM: <s> exits the application calling stop if running and allowing views to </s>