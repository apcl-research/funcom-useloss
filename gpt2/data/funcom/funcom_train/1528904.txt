TDAT: final public void rotate ( number value phi val , geo point q ) {  <NL> double phi = phi val . get double ( ) ;  <NL> double qx = q . inhom x ;  <NL> double qy = q . inhom y ;  <NL>  <NL>  / / first translate to new origin q <NL> do translate ( - qx , - qy ) ;  <NL>  / / rotate around new origin q <NL> rotate ( phi ) ;  <NL>  / / translate back to old origin ( 0 , 0 )  <NL> do translate ( qx , qy ) ;  <NL>  <NL> set affine transform ( ) ;  <NL> update degenerates ( ) ; / / for degenerate conics <NL>  }  COM: <s> rotate this conic by angle phi around q </s>