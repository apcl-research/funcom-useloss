TDAT: public void write and close connection ( byte buffer message ) {  <NL> try {  <NL>  / / write header :  <NL> byte buffer bb = byte buffer . allocate ( short . max _ value ) ;  <NL> bb . put ( send http response headers ( message . limit ( ) , null ) ) ;  <NL> bb . put ( message ) ;  <NL> bb . flip ( ) ;  <NL> write handler . write ( bb ) ;  <NL>  / / write handler . write ( send http response headers ( message . limit ( ) ,  <NL>  / / null ) ) ;  <NL>  <NL>  / / write body :  <NL>  / / write handler . write ( message ) ;  <NL>  <NL>  } catch ( runtime exception e ) {  <NL> if ( logger . is loggable ( level . warning ) ) {  <NL> logger . log throw ( level . warning , e , " write to write handler protocol : { 0 } throws " , this ) ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> writes a message to the write handler </s>