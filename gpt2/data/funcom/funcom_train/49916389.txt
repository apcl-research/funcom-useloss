TDAT: public boolean do update ( map map ) {  <NL> if ( check delay ( map . get delay ( ) ) ) {  <NL>  + + n anim loop ;  <NL> if ( n anim loop > = 8 )  <NL> n anim loop = 0 ;  <NL> if ( n anim loop > 3 )  <NL> n image id = frm _ crystal + 7 - n anim loop ;  <NL> else <NL> n image id = frm _ crystal + n anim loop ;  <NL>  }  <NL> return true ;  <NL>  }  COM: <s> performs marks actions if any for turn </s>