TDAT: protected void change buddy availability ( element bd , string avail , string reason ) {  <NL> if ( ! im monitor . going down ) {  <NL> bd . set attribute ( contact . presence , avail ) ;  <NL> bd . set attribute ( contact . reason , reason ) ;  <NL> bd . save ( ) ;  <NL> account . buddy state listener . buddy availability changed ( bd ) ; / * this needs to be externally synchronized * /  <NL>  }  <NL>  }  COM: <s> this is called by the implemented protocol </s>