TDAT: public void run ( ) {  <NL> long timeout ;  <NL> keeprunning = true ;  <NL>  <NL> while ( true ) {  <NL> synchronized ( this ) {  <NL> if ( ! keeprunning ) {  <NL> break ;  <NL>  }  <NL> if ( tasks . is empty ( ) & & selector . keys ( ) . is empty ( ) ) {  <NL> try {  <NL> wait ( ) ;  <NL>  } catch ( interrupted exception e ) {  <NL>  / / ignore <NL>  }  <NL>  }  <NL>  }  <NL>  <NL> if ( ! keeprunning ) {  <NL> break ;  <NL>  }  <NL>  <NL> timeout = process tasks ( ) ;  <NL>  <NL> try {  <NL> selector . select ( timeout ) ;  <NL>  } catch ( io exception e ) {  <NL>  / / just try again <NL>  }  <NL>  <NL> if ( ! keeprunning ) {  <NL> break ;  <NL>  }  <NL>  <NL> process sockets ( ) ;  <NL>  }  <NL>  }  COM: <s> the reactors main loop </s>