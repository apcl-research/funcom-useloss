TDAT: public void append ( string text ) {  <NL>  / / scroll to end after appending if cursor was at end of buffer .  <NL> final int old length = buffer . get text ( ) . length ( ) ;  <NL> final boolean was at end = ( buffer . get caret position ( ) = = old length ) ;  <NL>  <NL> buffer . append ( text ) ;  <NL>  <NL> if ( was at end ) {  <NL> buffer . set caret position ( old length + text . length ( ) ) ;  <NL>  }  <NL>  }  COM: <s> appends text to the chat messages buffer </s>