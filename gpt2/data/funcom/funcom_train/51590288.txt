TDAT: public void removed service ( service reference reference , object service ) {  <NL> object obj = context . get service ( reference ) ;  <NL> boolean service removed = false ;  <NL>  <NL> string [ ] obj class name = ( string [ ] ) reference . get property ( constants . objectclass ) ;  <NL>  <NL> if ( services map . get ( obj class name [ 0 ] ) . equals ( obj ) ) {  <NL> services map . remove ( obj class name [ 0 ] ) ;  <NL> service removed = true ;  <NL>  }  <NL>  <NL> if ( has started ( ) & & service removed ) {  <NL> try {  <NL> do stop ( ) ;  <NL>  } catch ( exception e ) {  <NL>  / / todo auto - generated catch block <NL> e . print stack trace ( ) ;  <NL>  }  <NL>  <NL> started = false ;  <NL>  }  <NL>  }  COM: <s> used by osgi to signal that a service was removed </s>