TDAT: public rule apply to rule ( replacement r ) {  <NL> cached to string = null ;  <NL> rule impl rule =  <NL> new rule impl ( new vector ( get body ( ) . size ( ) ) ,  <NL> get head ( ) . apply to fact ( r ) ) ;  <NL>  <NL> for ( iterator it = get body ( ) . iterator ( ) ; it . has next ( ) ; ) {  <NL> rule . get body ( ) . add ( ( ( fact ) it . next ( ) ) . apply to fact ( r ) ) ;  <NL>  }  <NL>  <NL> rule . set body or connected ( is body or connected ( ) ) ;  <NL> return rule ;  <NL>  }  COM: <s> apply a replacement to a rule </s>