TDAT: private string parenthesize ( expression expression , boolean left ) {  <NL> string s = expression . to string ( ) ;  <NL> if ( ! ( expression instanceof core operation ) ) {  <NL> return s ;  <NL>  }  <NL> int compared = get precedence ( ) - ( ( core operation ) expression ) . get precedence ( ) ;  <NL>  <NL> if ( compared < 0 ) {  <NL> return s ;  <NL>  }  <NL> if ( compared = = 0 & & ( is symmetric ( ) || left ) ) {  <NL> return s ;  <NL>  }  <NL> return ' ( ' + s + ' ) ' ;  <NL>  }  COM: <s> wrap an expression in parens if necessary </s>