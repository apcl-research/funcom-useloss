TDAT: private void wait for state ( final state expected state ) throws exception {  <NL>  <NL> condition condition = new condition ( ) {  <NL> public boolean test ( ) {  <NL> state state = get state ( ) ;  <NL> logger . log ( level . info , " detected : { 0 } " , state ) ;  <NL> return state . equals ( expected state ) ;  <NL>  }  <NL> public string to string ( ) {  <NL> return expected state . to string ( ) ;  <NL>  }  <NL>  } ;  <NL>  <NL> waiter waiter = new waiter ( ) ;  <NL> waiter . wait for ( condition ) ;  <NL>  }  COM: <s> waits for the current state of the system to become as expected </s>