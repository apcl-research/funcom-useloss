TDAT: public user get current user ( ) {  <NL> string username = ctx . get caller principal ( ) . get name ( ) ;  <NL> try {  <NL> user dao dao = get dao factory ( ) . get user dao ( ) ;  <NL> return dao . find by id ( username ) ;  <NL>  } catch ( data not found exception ex ) {  <NL> log . warn ( " could not obtain user record for user ' " + username + " ' " , ex ) ;  <NL> return new user ( ) ;  <NL>  }  <NL>  }  COM: <s> gets the current user logged in </s>