TDAT: public int hgetbits ( int n ) {  <NL> totbit + = n ;  <NL>  <NL> int val = 0 ;  <NL>  <NL> int pos = buf _ byte _ idx ;  <NL> if ( pos + n < bufsize ) {  <NL> while ( n - - > 0 ) {  <NL> val < < = 1 ;  <NL> val | = ( ( buf [ pos + + ] ! = 0 ) ? 1 : 0 ) ;  <NL>  }  <NL>  } else {  <NL> while ( n - - > 0 ) {  <NL> val < < = 1 ;  <NL> val | = ( ( buf [ pos ] ! = 0 ) ? 1 : 0 ) ;  <NL> pos = ( pos + 1 ) & bufsize _ mask ;  <NL>  }  <NL>  }  <NL> buf _ byte _ idx = pos ;  <NL> return val ;  <NL>  }  COM: <s> read a number bits from the bit stream </s>