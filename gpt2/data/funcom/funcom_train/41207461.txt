TDAT: private int calculate graident channel ( int source channel , int dest channel , int distance , int offset ) {  <NL> if ( source channel = = dest channel ) {  <NL> return source channel ;  <NL>  }  <NL> float ratio = ( ( float ) offset ) / ( ( float ) distance ) ;  <NL> int pos = ( int ) ( math . abs ( source channel - dest channel ) * ratio ) ;  <NL> if ( source channel > dest channel ) {  <NL> return source channel - pos ;  <NL>  } else {  <NL> return source channel + pos ;  <NL>  }  <NL>  }  COM: <s> converts the color channel value according to the offest within the distance </s>