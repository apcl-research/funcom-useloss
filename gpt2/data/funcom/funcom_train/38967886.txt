TDAT: public double map luminance ( double luminance , double bin width , double transition sharpness ) {  <NL> double calculated value = 0 ;  <NL>  <NL> double nearest bin = math . floor ( ( luminance + bin width / 2 ) / bin width ) * bin width ;  <NL> calculated value = nearest bin + bin width / 2 * math . tanh ( transition sharpness * ( luminance - nearest bin ) ) ;  <NL>  <NL> return calculated value ;  <NL>  }  COM: <s> map the luminance value to a quantitized value </s>