TDAT: private pastry node route to ( pastry id key ) {  <NL> pastry node next = null ;  <NL> if ( leaf set . is within range ( key ) ) {  <NL>  / / leaf - set <NL> next = route by leaf set ( key ) ;  <NL>  } else {  <NL>  / / routing - table <NL> next = route by routing table ( key ) ;  <NL> if ( next = = null ) {  <NL>  / / rare - case <NL> next = route by rare case ( key ) ;  <NL>  }  <NL>  }  <NL> return next ;  <NL>  }  COM: <s> pastry routing algorithm </s>