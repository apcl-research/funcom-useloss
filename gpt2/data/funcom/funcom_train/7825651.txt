TDAT: protected void add command ( command command ) {  <NL> for ( int i = commands . size ( ) - 1 ; i > position ; - - i ) / / remove all after position <NL> commands . remove ( i ) ;  <NL>  <NL> if ( position > = 0 & & commands . get ( position ) . can be combined ( command ) ) {  <NL> commands . get ( position ) . combine ( command ) ;  <NL>  } else {  <NL>  + + position ;  <NL> commands . add ( command ) ;  <NL>  }  <NL>  }  COM: <s> puts command on stack combines it with current top if possible </s>