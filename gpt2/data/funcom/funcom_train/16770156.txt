TDAT: public void compress ( ) {  <NL> io buffer tmp = io buffer . allocate ( 0 ) ;  <NL> tmp . set auto expand ( true ) ;  <NL> deflater output stream deflater = new deflater output stream ( tmp . as output stream ( ) , new deflater ( deflater . best _ compression ) ) ;  <NL> byte [ ] tmp data = new byte [ data . limit ( ) ] ;  <NL> data . position ( 0 ) ;  <NL> data . get ( tmp data ) ;  <NL> try {  <NL> deflater . write ( tmp data ) ;  <NL> deflater . finish ( ) ;  <NL>  } catch ( io exception e ) {  <NL>  / / docs state that free is optional <NL> tmp . free ( ) ;  <NL> throw new runtime exception ( " could not compress data " , e ) ;  <NL>  } finally {  <NL> if ( deflater ! = null ) {  <NL> try {  <NL> deflater . close ( ) ;  <NL>  } catch ( io exception e1 ) {  <NL>  }  <NL>  }  <NL>  }  <NL> data . free ( ) ;  <NL> data = tmp ;  <NL> data . flip ( ) ;  <NL> prepare io ( ) ;  <NL>  }  COM: <s> compress contents using zlib </s>