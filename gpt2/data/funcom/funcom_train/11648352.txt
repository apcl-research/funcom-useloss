TDAT: protected string get current username ( ) {  <NL> subject subject = security utils . get subject ( ) ;  <NL> if ( subject = = null || subject . get principal ( ) = = null || ! subject . is authenticated ( ) ) {  <NL> throw new illegal state exception ( " unable to retrieve the current authenticated subject " ) ;  <NL>  }  <NL> return security utils . get subject ( ) . get principal ( ) . to string ( ) ;  <NL>  }  COM: <s> internal utility method to retrieve the username of the current authenticated user </s>