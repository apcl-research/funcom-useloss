TDAT: private point get location ( ) {  <NL> styled text text = f viewer . get text widget ( ) ;  <NL> point selection = text . get selection ( ) ;  <NL> point p = text . get location at offset ( selection . x ) ;  <NL> p . x - = f proposal shell . get border width ( ) ;  <NL> if ( p . x < 0 ) p . x = 0 ;  <NL> if ( p . y < 0 ) p . y = 0 ;  <NL> p = new point ( p . x , p . y + text . get line height ( selection . x ) ) ;  <NL> p = text . to display ( p ) ;  <NL> return p ;  <NL>  }  COM: <s> returns the graphical location at which this popup should be made visible </s>