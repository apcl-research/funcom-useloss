TDAT: public void update user ( user p user ) throws database exception {  <NL> if ( p user . is stored ( ) ) {  <NL>  <NL> sql update user ( p user ) ;  <NL>  <NL>  } else {  <NL> sql insert user ( p user ) ;  <NL>  }  <NL>  <NL>  / / delete all moderator rights <NL> sql delete all moderator rights by user ( p user ) ;  <NL>  <NL>  / / insert moderator rights <NL> for ( category category : p user . get moderator rights ( ) ) {  <NL> sql insert moderator right ( p user , category ) ;  <NL>  }  <NL>  <NL>  } ;  COM: <s> this method either updates or inserts an intance of user in into the </s>