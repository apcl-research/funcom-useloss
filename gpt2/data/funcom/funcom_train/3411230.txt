TDAT: public void validate ( ) {  <NL>  / * avoid grabbing lock unless really necessary . * /  <NL> if ( ! valid ) {  <NL> boolean update cur = false ;  <NL> synchronized ( get tree lock ( ) ) {  <NL> if ( ! valid & & peer ! = null ) {  <NL> container peer p = null ;  <NL> if ( peer instanceof container peer ) {  <NL> p = ( container peer ) peer ;  <NL>  }  <NL> if ( p ! = null ) {  <NL> p . begin validate ( ) ;  <NL>  }  <NL> validate tree ( ) ;  <NL> valid = true ;  <NL> if ( p ! = null ) {  <NL> p . end validate ( ) ;  <NL> update cur = is visible ( ) ;  <NL>  }  <NL>  }  <NL>  }  <NL> if ( update cur ) {  <NL> update cursor immediately ( ) ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> validates this container and all of its subcomponents </s>