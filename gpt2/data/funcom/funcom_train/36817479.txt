TDAT: public long get bits ( int first bit , int num bits ) {  <NL>  <NL> long retval = 0 ;  <NL>  <NL> for ( int i = first bit ; i < first bit + num bits ; i + + ) {  <NL> int index = i / 8 ;  <NL> if ( index > = bitmask . length ) {  <NL> return 0 ;  <NL>  }  <NL> long bit = ( bitmask [ index ] > > ( 7 - ( i % 8 ) ) ) & 1 ;  <NL> retval = ( retval < < 1 ) | bit ;  <NL>  }  <NL>  <NL> return retval ;  <NL>  <NL>  }  COM: <s> retrieves data bits from the block </s>