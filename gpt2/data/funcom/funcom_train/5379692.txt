TDAT: protected void preserving selection ( runnable update code ) {  <NL>  <NL> i selection old selection = null ;  <NL> try {  <NL>  / / preserve selection <NL> old selection = get selection ( ) ;  <NL> in change = restore selection = true ;  <NL>  <NL>  / / perform the update <NL> update code . run ( ) ;  <NL>  <NL>  } finally {  <NL> in change = false ;  <NL>  <NL>  / / restore selection <NL> if ( restore selection )  <NL> set selection to widget ( old selection , false ) ;  <NL>  <NL>  / / send out notification if old and new differ <NL> i selection new selection = get selection ( ) ;  <NL> if ( ! new selection . equals ( old selection ) )  <NL> handle invalid selection ( old selection , new selection ) ;  <NL>  }  <NL>  }  COM: <s> attempts to preserves the current selection across a run of the given </s>