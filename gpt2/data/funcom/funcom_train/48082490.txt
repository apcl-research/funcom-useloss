TDAT: private packet next packet ( ) {  <NL> packet packet = null ;  <NL>  / / wait until there ' s a packet or we ' re done .  <NL> while ( ! done & & ( packet = ( packet ) queue . poll ( ) ) = = null ) {  <NL> try {  <NL> synchronized ( queue ) {  <NL> queue . wait ( ) ;  <NL>  }  <NL>  } catch ( interrupted exception ie ) {  <NL>  / / do nothing <NL>  }  <NL>  }  <NL> return packet ;  <NL>  }  COM: <s> returns the next available packet from the queue for writing </s>