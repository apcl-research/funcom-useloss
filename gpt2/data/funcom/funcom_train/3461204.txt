TDAT: protected file set get ref ( project p ) {  <NL> if ( ! is checked ( ) ) {  <NL> stack stk = new stack ( ) ;  <NL> stk . push ( this ) ;  <NL> die on circular reference ( stk , p ) ;  <NL>  }  <NL>  <NL> object o = get refid ( ) . get referenced object ( p ) ;  <NL> if ( ! ( o instanceof file set ) ) {  <NL> string msg = get refid ( ) . get ref id ( ) + " doesn\ ' t denote a fileset " ;  <NL> throw new build exception ( msg ) ;  <NL>  } else {  <NL> return ( file set ) o ;  <NL>  }  <NL>  }  COM: <s> performs the check for circular references and returns the </s>