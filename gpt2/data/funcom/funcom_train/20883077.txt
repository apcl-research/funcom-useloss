TDAT: protected void handle deallocate ( ) throws engine exception {  <NL> long [ ] states = set engine state ( clear _ all _ state , deallocated ) ;  <NL> output handler . cancel all items ( ) ;  <NL> output handler . terminate ( ) ;  <NL>  <NL>  / / close the audio . this should flush out any queued audio data <NL>  <NL> if ( audio ! = null ) {  <NL> audio . close ( ) ;  <NL>  }  <NL>  <NL> output queue . close ( ) ;  <NL>  <NL> post engine deallocated ( states [ 0 ] , states [ 1 ] ) ;  <NL>  }  COM: <s> handles a deallocation request </s>