TDAT: protected void do checkpoint ( ) {  <NL> hash seq foo = history . get top level entry ( ) ;  <NL> long top seq = foo . get seq ( ) ;  <NL> try {  <NL> long top idx = history . find seq ( top seq ) ;  <NL> if ( history . stat entry ( top idx ) . get type ( ) ! = evt _ checkpoint ) {  <NL> write checkpoint ( ) ;  <NL>  }  <NL>  } catch ( io exception ioe ) {  <NL> throw new runtime exception ( " error during checkpoint " , ioe ) ;  <NL>  }  <NL>  }  COM: <s> periodic timer for writing checkpoints </s>