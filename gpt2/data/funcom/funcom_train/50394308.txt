TDAT: public string wait until done ( int timeout ) throws exception {  <NL> activity state enumeration . enum status = activity state enumeration . pending ;  <NL> long start = system . current time millis ( ) ;  <NL> long elapsed = 0 ;  <NL> while ( true ) {  <NL> if ( timeout > 0 & & elapsed > timeout )  <NL> break ;  <NL> elapsed = system . current time millis ( ) - start ;  <NL> status = get status ( ) ;  <NL> if ( status = = activity state enumeration . finished )  <NL> break ;  <NL> else if ( status = = activity state enumeration . failed )  <NL> throw new exception ( " job failed " ) ;  <NL> thread . sleep ( 500 ) ;  <NL>  }  <NL> return status . to string ( ) ;  <NL>  }  COM: <s> convenience method that waits until a job has finished and returns the </s>