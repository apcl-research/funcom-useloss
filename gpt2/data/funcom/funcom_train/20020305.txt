TDAT: public void shutdown ( ) throws interrupted exception {  <NL> synchronized ( lock ) {  <NL> if ( shutting down )  <NL> return ;  <NL> shutting down = true ;  <NL>  }  <NL>  / / timer stop is also invoked from <NL>  / / idle state handler . release external resources ( ) if any channels are <NL>  / / created .  <NL> timer . stop ( ) ;  <NL> channel group all channels = new default channel group ( ) ;  <NL> synchronized ( pending registrations ) {  <NL> all channels . add all ( pending registrations . key set ( ) ) ;  <NL>  }  <NL> all channels . add all ( connections map . get all channels ( ) ) ;  <NL> await semi interruptibly ( all channels . close ( ) , 3 ) ;  <NL> bootstrap . release external resources ( ) ;  <NL>  }  COM: <s> shut downs this </s>