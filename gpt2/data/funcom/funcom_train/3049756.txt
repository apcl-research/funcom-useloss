TDAT: private void dirty ( persistent collection collection ) throws hibernate exception {  <NL>  <NL> boolean force dirty = collection . was initialized ( ) & &  <NL>  ! collection . is dirty ( ) & & / / optimization <NL> get loaded persister ( ) ! = null & &  <NL> get loaded persister ( ) . is mutable ( ) & & / / optimization <NL>  ( collection . is directly accessible ( ) || get loaded persister ( ) . get element type ( ) . is mutable ( ) ) & & / / optimization <NL>  ! collection . equals snapshot ( get loaded persister ( ) ) ;  <NL>  <NL> if ( force dirty ) {  <NL> collection . dirty ( ) ;  <NL>  }  <NL>  <NL>  }  COM: <s> determine if the collection is really dirty by checking dirtiness </s>