TDAT: public void update metadata ( ) {  <NL>  <NL>  / / we need to wipe out all entropy and scans as potentially we are redoing <NL>  / / subalignments that use metadata . this could be made a bit smarter . todo <NL> main . clear all analysis ( ) ;  <NL>  <NL> for ( string name : alignments . key set ( ) ) {  <NL> subset alignment alignment = alignments . get ( name ) ;  <NL> subset selection selection = alignment . get subset selection ( ) ;  <NL> if ( selection instanceof subset metadata selection ) {  <NL> remove subset alignment ( name ) ;  <NL> alignment = new subset alignment ( selection ) ;  <NL> if ( alignment . get sequence count ( ) > 0 ) {  <NL> put subset alignment ( alignment ) ;  <NL>  }  <NL>  } else {  <NL> alignment . update metadata ( ) ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> invoked when main alignment metadata has been updated </s>