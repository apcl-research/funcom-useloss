TDAT: public string get dtd ( string xml , boolean use element mapping ) {  <NL>  / / public identifier <NL> matcher matcher = pattern doctype public . matcher ( xml ) ;  <NL> if ( matcher . find ( ) ) {  <NL> return matcher . group ( 2 ) ;  <NL>  }  <NL>  / / system identifier <NL> matcher = pattern doctype system . matcher ( xml ) ;  <NL> if ( matcher . find ( ) ) {  <NL> return matcher . group ( 1 ) ;  <NL>  }  <NL>  <NL>  / / root element mappings <NL> if ( use element mapping ) {  <NL> string first tag = get first tag ( xml ) ;  <NL> if ( first tag ! = null ) {  <NL> for ( element schema mapping mapping : get schema mappings ( ) ) {  <NL> if ( mapping . get root element ( ) . equals ( first tag ) & & mapping . get file path ( ) . ends with ( " . dtd " ) ) {  <NL> return " file : " + mapping . get file path ( ) ;  <NL>  }  <NL>  }  <NL>  }  <NL>  }  <NL>  <NL> return null ;  <NL>  }  COM: <s> returns uri of dtd system id which is used in the document </s>