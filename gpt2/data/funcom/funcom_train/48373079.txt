TDAT: private void save data ( ) {  <NL> announcements _ an = announcements . get instance ( ) ;  <NL> switch ( shutdown mode ) {  <NL> case sigterm :  <NL> system . err . println ( " ★關閉伺服器★ " ) ;  <NL> break ;  <NL> case gm _ shutdown :  <NL> system . err . println ( " ★gm 關閉伺服器★ " ) ;  <NL> break ;  <NL> case gm _ restart :  <NL> system . err . println ( " ★gm 重新啟動伺服器★ " ) ;  <NL> break ;  <NL>  <NL>  }  <NL>  _ an . announce to all ( " 伺服器目前由 " + _ mode text [ shutdown mode ]  <NL>  + " now ! bye bye " ) ;  <NL>  <NL>  / / we cannt abort shutdown anymore , so i removed the " if "  <NL> game server . get instance ( ) . disconnect all characters ( ) ;  <NL>  <NL> system . err <NL>  . println ( " 【資料儲存完畢，所有玩家全部離線。】 " ) ;  <NL> try {  <NL> int delay = 500 ;  <NL> thread . sleep ( delay ) ;  <NL>  } catch ( interrupted exception e ) {  <NL>  / / never happens : p <NL>  }  <NL>  }  COM: <s> this sends a last byebye disconnects all players and saves data </s>