TDAT: private boolean update pi ( ) {  <NL> if ( get current route ( ) = = null )  <NL> return false ;  <NL>  <NL> if ( distance next pm < dist upi ) {  <NL>  <NL>  / / if it ' s the end <NL> if ( going to placemark index = = get current route ( ) . get placemarks ( ) . size ( ) - 1 ) {  <NL> if ( flag end ride ) {  <NL> going to placemark index = - 1 ;  <NL> flag end ride = false ;  <NL> finish current ride ( ) ;  <NL>  }  <NL> else <NL> flag end ride = true ;  <NL>  }  <NL> else {  <NL> going to placemark index = going to placemark index + 1 ;  <NL> distance next pm = get distance next placemark ( ) ;  <NL>  }  <NL>  }  <NL> else <NL> return false ;  <NL>  <NL> return true ;  <NL>  }  COM: <s> updates the next placemark index </s>