TDAT: public node to xml ( document doc ) {  <NL> node xml = doc . create element ( " violation " ) ;  <NL> node data node = doc . create element ( " data " ) ;  <NL> node location node = target . to xml ( doc ) ;  <NL> node message node = doc . create element ( " message " ) ;  <NL> message node . set text content ( this . message ) ;  <NL>  <NL> if ( data ! = null ) {  <NL> for ( string key : data . key set ( ) ) {  <NL> node d = doc . create element ( key ) ;  <NL> d . set text content ( " " + data . get ( key ) ) ;  <NL> data node . append child ( d ) ;  <NL>  }  <NL>  }  <NL>  <NL> xml . append child ( location node ) ;  <NL> xml . append child ( message node ) ;  <NL> xml . append child ( data node ) ;  <NL>  <NL> return xml ;  <NL>  }  COM: <s> serialises a violation to xml </s>