TDAT: protected int search for open bracket ( int start position , char open bracket , char close bracket , i document document ) throws bad location exception {  <NL> int stack = 1 ;  <NL> int open pos = start position - 1 ;  <NL> char next char ;  <NL>  <NL> while ( open pos > = 0 & & stack > 0 ) {  <NL> next char = document . get char ( open pos ) ;  <NL> if ( next char = = close bracket & & next char ! = open bracket )  <NL> stack + + ;  <NL> else if ( next char = = open bracket )  <NL> stack - - ;  <NL> open pos - - ;  <NL>  }  <NL>  <NL> if ( stack = = 0 )  <NL> return open pos + 1 ;  <NL> return - 1 ;  <NL>  }  COM: <s> returns the position of the open bracket before code start position code </s>