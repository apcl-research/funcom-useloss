TDAT: private string replace ( string source , string pattern , string s ) {  <NL> int pos = smart index of ( source , pattern ) ;  <NL> int last pos = 0 ;  <NL>  <NL> if ( pos ! = - 1 ) {  <NL> string str = " " ;  <NL>  <NL> do {  <NL> str + = source . substring ( last pos , pos ) + s ;  <NL> last pos = pos + pattern . length ( ) ;  <NL> pos = smart index of ( source , pattern , pos + 1 ) ;  <NL>  } while ( pos ! = - 1 ) ;  <NL>  <NL> str + = source . substring ( last pos ) ;  <NL> return str ;  <NL>  <NL>  } else {  <NL> return source ;  <NL>  }  <NL>  }  COM: <s> replace all occurences of pattern with s in the source </s>