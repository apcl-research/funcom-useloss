TDAT: protected void process state sync ( server object state map state map ) {  <NL> try {  <NL> set server states ( state map ) ;  <NL>  <NL> synchronized ( msg buffer ) {  <NL> msg buffer . clear ( ) ; / / no partial state - sync <NL>  }  <NL>  }  <NL> catch ( exception ex ) { / / keep the buffer <NL> if ( log . is error enabled ( ) ) log . error ( " set state event failed " , ex ) ;  <NL>  }  <NL>  }  COM: <s> invoked from process message </s>