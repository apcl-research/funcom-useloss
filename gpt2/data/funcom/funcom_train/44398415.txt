TDAT: public void send with confirmation ( user id user id , document message to send ) {  <NL> int id = get next message id ( ) ;  <NL> message to send . select single node ( " / / message / @ id " ) . set text ( string . value of (  <NL> id ) ) ;  <NL> server . send message ( user id , message to send ) ;  <NL> record message ( user id , id , message to send ) ;  <NL>  }  COM: <s> sends message and recods it to await for its confirmation </s>