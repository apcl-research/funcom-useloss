TDAT: protected string format ( string unformatted ) {  <NL> code formatter formatter = tool factory . create code formatter ( null ) ;  <NL> i document document = new document ( unformatted ) ;  <NL> text edit text edit = formatter . format ( code formatter . k _ compilation _ unit , unformatted , 0 ,  <NL> unformatted . length ( ) , 0 , null ) ;  <NL> if ( text edit = = null ) {  <NL> return unformatted ;  <NL>  }  <NL> try {  <NL> text edit . apply ( document ) ;  <NL> return document . get ( ) ;  <NL>  } catch ( malformed tree exception e ) {  <NL> return unformatted ;  <NL>  } catch ( bad location exception e ) {  <NL> return unformatted ;  <NL>  }  <NL>  }  COM: <s> format the source code using the default formatting options </s>