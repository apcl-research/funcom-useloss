TDAT: private void add ( long offset , byte buffer buffer ) {  <NL> if ( shutdown . get ( ) ) {  <NL> release ( buffer ) ;  <NL> return ;  <NL>  }  <NL>  <NL> assert offset > = read offset ;  <NL>  <NL> piece piece = new piece ( offset , buffer ) ;  <NL> synchronized ( this ) {  <NL> piece queue . add ( piece ) ;  <NL>  }  <NL>  <NL>  / / only notify the listener if the next call to next ( ) is guaranteed to <NL>  / / return a valid piece <NL> if ( offset = = read offset ) {  <NL> listener . read successful ( ) ;  <NL>  }  <NL>  }  COM: <s> invoked when data at code offset code has been read </s>