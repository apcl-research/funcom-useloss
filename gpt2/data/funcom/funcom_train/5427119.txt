TDAT: private void format segment ( term parser p ) {  <NL> start indented line ( ) ;  <NL> consume ( p , terms . segment _ start ) ;  <NL> while ( p . current ( ) . kind ( ) ! = terms . segment _ end ) {  <NL> term token tt = p . current ( ) ;  <NL> token tk = token ( tt ) ;  <NL> switch ( tt . kind ( ) ) {  <NL> case control :  <NL> p . advance ( ) ;  <NL> break ;  <NL> case ignorable :  <NL> process ignorable ( p , tk ) ;  <NL> break ;  <NL> case doc _ comment _ start :  <NL> format doc comments ( p ) ;  <NL> break ;  <NL> case attributes _ start :  <NL> format attributes ( p ) ;  <NL> break ;  <NL> default :  <NL> format segment content ( p ) ;  <NL>  }  <NL>  <NL>  }  <NL> print control ( " ; " ) ;  <NL> consume ( p , terms . segment _ end ) ;  <NL>  }  COM: <s> format the segment </s>