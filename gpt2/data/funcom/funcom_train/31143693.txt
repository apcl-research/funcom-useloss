TDAT: protected void fix state ( object object ) {  <NL> object = wrapper factory . singleton ( ) . unwrap ( object ) ;  <NL> if ( object instanceof service delegate ) {  <NL> service delegate delegate = ( service delegate ) object ;  <NL> if ( delegate . proxy is initialized ( ) ) {  <NL> service proxy tx proxy = delegate . get service proxy ( ) ;  <NL> tx proxy . set service delegate <NL>  ( ( service delegate ) wrapper factory . singleton ( ) .  <NL> unwrap ( jdo factory . singleton ( ) . find read only ( delegate ) ) ) ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> called when the pm for a transactional object is closed </s>