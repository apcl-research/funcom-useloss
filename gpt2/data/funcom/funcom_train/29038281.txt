TDAT: private item get visible ancestor of ( item item ) {  <NL> item result = item ;  <NL> final tree path path = get tree path from item ( item ) ;  <NL> if ( path . get segment count ( ) > 1 ) {  <NL> for ( int i = 0 ; i < path . get segment count ( ) ; i + + ) {  <NL> final tree item ancestor = ( tree item ) find item ( path . get segment ( i ) ) ;  <NL> if ( ! ancestor . get expanded ( ) ) {  <NL> result = ancestor ;  <NL> break ;  <NL>  }  <NL>  }  <NL>  }  <NL> return result ;  <NL>  }  COM: <s> returns a visible ancestor of the given item </s>