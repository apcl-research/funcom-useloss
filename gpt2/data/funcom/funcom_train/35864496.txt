TDAT: public void shutdown server ( boolean immediate ) {  <NL>  <NL>  / / set the shutdown flag <NL>  <NL> set shutdown ( true ) ;  <NL>  <NL>  / / close the ftp server listening socket to wakeup the main ftp server thread <NL>  <NL> try {  <NL> if ( get socket ( ) ! = null )  <NL> get socket ( ) . close ( ) ;  <NL>  }  <NL> catch ( io exception ex ) {  <NL>  }  <NL>  <NL>  / / wait for the main server thread to close <NL>  <NL> if ( m _ srv thread ! = null ) {  <NL>  <NL> try {  <NL> m _ srv thread . join ( 3000 ) ;  <NL>  }  <NL> catch ( exception ex ) {  <NL>  }  <NL>  }  <NL>  }  COM: <s> shutdown the ftp server </s>