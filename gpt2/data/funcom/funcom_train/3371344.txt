TDAT: private void update node sizes ( boolean update all ) {  <NL> int a y , counter , max counter ;  <NL> tree state node node ;  <NL>  <NL> update node sizes = false ;  <NL> for ( a y = counter = 0 , max counter = visible nodes . size ( ) ;  <NL> counter < max counter ; counter + + ) {  <NL> node = ( tree state node ) visible nodes . element at ( counter ) ;  <NL> node . set y origin ( a y ) ;  <NL> if ( update all || ! node . has valid size ( ) )  <NL> node . update preferred size ( counter ) ;  <NL> a y + = node . get preferred height ( ) ;  <NL>  }  <NL>  }  COM: <s> resets the y origin of all the visible nodes as well as messaging </s>