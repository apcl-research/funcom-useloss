TDAT: private double get avg phase ( ) {  <NL> gaps = the cavity . get nodes of type ( " rg " ) ;  <NL> double phase = 0 . ;  <NL> int sum = 0 ;  <NL> probe state state ;  <NL> iterator itr = gaps . iterator ( ) ;  <NL> while ( itr . has next ( ) ) {  <NL> rf gap gap = ( rf gap ) itr . next ( ) ;  <NL> list element gaps = the model . elements mapped to ( gap ) ;  <NL> ideal rf gap rfgap = ( ideal rf gap ) element gaps . get ( 0 ) ;  <NL> phase + = rfgap . get phase ( ) * rad2deg ;  <NL> sum + = 1 ;  <NL>  }  <NL> return phase / sum ;  <NL>  }  COM: <s> find the average phase in the cavity </s>