TDAT: public void stop ( ) {  <NL> super . stop ( ) ;  <NL> if ( get mode ( ) = = socket protocol . tcp ) {  <NL> socket connection = connect to tcp ( " localhost " , get port ( ) ) ;  <NL> if ( connection = = null ) {  <NL> system . err . println ( " warning : stop connection failed ! " ) ;  <NL>  } else {  <NL> try {  <NL> data output stream dos = new data output stream ( connection <NL>  . get output stream ( ) ) ;  <NL>  / * write length - 1 for stop signal * /  <NL> dos . write short ( - 1 ) ;  <NL> dos . flush ( ) ;  <NL>  / * close connection * /  <NL> dos . close ( ) ;  <NL> connection . close ( ) ;  <NL>  } catch ( io exception e ) {  <NL> e . print stack trace ( ) ;  <NL>  }  <NL>  }  <NL>  }  <NL>  }  COM: <s> send noop message to set the thread quit immediately </s>