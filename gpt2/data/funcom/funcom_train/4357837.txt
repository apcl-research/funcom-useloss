TDAT: protected void drain socket ( ) throws exception {  <NL> input stream in = socket . get input stream ( ) ;  <NL>  / / loop while data available , channel is non - blocking <NL> byte [ ] buf = new byte [ 1024 ] ;  <NL> int length = in . read ( buf ) ;  <NL> while ( length > = 0 ) {  <NL> int count = reader . append ( buf , 0 , length , true ) ;  <NL> if ( count > 0 ) execute ( reader ) ;  <NL> length = in . read ( buf ) ;  <NL>  }  <NL>  }  COM: <s> the actual code which drains the channel associated with </s>