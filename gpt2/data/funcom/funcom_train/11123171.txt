TDAT: public write future write packet ( buffer buffer ) throws io exception {  <NL>  / / synchronize all write requests as needed by the encoding algorithm <NL>  / / and also queue the write request in this synchronized block to ensure <NL>  / / packets are sent in the correct order <NL> synchronized ( encode lock ) {  <NL> encode ( buffer ) ;  <NL> io buffer bb = io buffer . wrap ( buffer . array ( ) , buffer . rpos ( ) , buffer . available ( ) ) ;  <NL> return io session . write ( bb ) ;  <NL>  }  <NL>  }  COM: <s> encode and send the given buffer </s>