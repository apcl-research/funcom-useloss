TDAT: public game state retrieve game state ( int gameinstanceid ) {  <NL>  <NL> game state gs = gameinteraction . get game state ( gameinstanceid ) ;  <NL> if ( gs . get messages ( ) . contains ( message . illegal _ game _ state . to string ( ) ) ) {  <NL> list < game state > l = gamepersistence . get game states ( ) ;  <NL> iterator < game state > iter = l . iterator ( ) ;  <NL> while ( iter . has next ( ) ) {  <NL> game state temp = iter . next ( ) ;  <NL> if ( temp . get game instance id ( ) = = gameinstanceid ) {  <NL> return temp ;  <NL>  }  <NL>  }  <NL> return gs ;  <NL>  }  <NL> else {  <NL> return gs ;  <NL>  }  <NL>  }  COM: <s> retrieve the gamestate </s>