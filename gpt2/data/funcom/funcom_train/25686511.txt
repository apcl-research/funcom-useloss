TDAT: public long diff with overflow check ( long new val , long old val ) {  <NL>  <NL> if ( new val > = old val ) {  <NL> return new val - old val ;  <NL>  } else {  <NL> long vmax ;  <NL> long p32 = 1l < < 32 ;  <NL> long p64 = 1l < < 64 ;  <NL> if ( old val < p32 )  <NL> vmax = p32 ; / / 32 bits <NL> else <NL> vmax = p64 ; / / 64 bits <NL>  <NL> return new val - old val + vmax ;  <NL>  }  <NL>  }  COM: <s> computes the difference between the new value and the old value of a </s>