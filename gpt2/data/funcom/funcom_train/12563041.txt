TDAT: public void completed ( thread thr , link message msg , throwable exc ) {  <NL> synchronized ( lock ) {  <NL> assert false ( " shouldn ' t be done already " ,  <NL> doneset . contains key ( thr ) ) ;  <NL> doneset . put ( thr , thr ) ;  <NL>  <NL> if ( msg ! = null ) {  <NL> messages . put ( thr , msg ) ;  <NL>  }  <NL>  <NL> if ( exc ! = null ) {  <NL> throwables . put ( thr , exc ) ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> common code for completion callbacks for logging receiver and </s>