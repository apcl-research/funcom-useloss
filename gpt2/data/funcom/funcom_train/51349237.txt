TDAT: protected void acquire lock and run ( ) throws exception {  <NL>  <NL>  / / note : we must request a valid zk connection here .  <NL> final zoo keeper zookeeper = fed . get zookeeper ( ) ;  <NL>  <NL> final z lock zlock = z lock impl . get lock ( zookeeper ,  <NL> lock z path , fed . get zoo config ( ) . acl ) ;  <NL>  <NL> zlock . lock ( ) ;  <NL>  <NL> try {  <NL>  <NL> run with lock ( zookeeper , zlock ) ;  <NL>  <NL>  } finally {  <NL>  <NL> zlock . unlock ( ) ;  <NL>  <NL>  }  <NL>  <NL>  }  COM: <s> waits until it acquires the lock and then </s>