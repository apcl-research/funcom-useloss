TDAT: public image create image ( ) {  <NL> image screenshot = new image ( get shell ( ) . get display ( ) ,  <NL> current selection ! = null ? current selection : work image . get bounds ( ) ) ;  <NL>  <NL> gc gc = new gc ( screenshot ) ;  <NL> if ( current selection ! = null ) {  <NL> gc . draw image ( work image , current selection . x , current selection . y , current selection . width ,  <NL> current selection . height , 0 , 0 , current selection . width , current selection . height ) ;  <NL>  } else {  <NL> gc . draw image ( work image , 0 , 0 ) ;  <NL>  }  <NL> gc . dispose ( ) ;  <NL> this . image dirty = false ;  <NL>  <NL> return screenshot ;  <NL>  }  COM: <s> creates the final screenshot </s>