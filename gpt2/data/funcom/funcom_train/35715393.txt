TDAT: private int get widget line number ( int line ) throws bad location exception {  <NL> if ( f source viewer instanceof i text viewer extension5 ) {  <NL> i text viewer extension5 extension = ( i text viewer extension5 ) f source viewer ;  <NL> return extension . model line2widget line ( line ) ;  <NL>  }  <NL>  <NL> i region region = f source viewer . get visible region ( ) ;  <NL> int first line = f source viewer . get document ( ) . get line of offset ( region . get offset ( ) ) ;  <NL> return line - first line ;  <NL>  }  COM: <s> returns for the widget line number for the given document line number </s>