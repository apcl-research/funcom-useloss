TDAT: public void connection closed ( ) {  <NL> if ( session . get session state ( ) = = session state . transaction ) {  <NL> session . get maildrop ( ) . rollback transaction ( ) ;  <NL> logger . debug ( " maildrop transaction is rolled back " ) ;  <NL>  }  <NL> if ( session . get maildrop ( ) ! = null )  <NL> session . get server ( ) . get maildrop repository ( )  <NL>  . release maildrop ( session . get maildrop ( ) ) ;  <NL>  }  COM: <s> processes both expected and unexpected disconnections </s>