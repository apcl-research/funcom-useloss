TDAT: public void send event ( final event event ) {  <NL> if ( security ! = null ) {  <NL>  / / todo : cache permissions <NL> security . check permission ( new topic permission ( event . get topic ( ) ,  <NL> topic permission . publish ) ) ;  <NL>  }  <NL>  <NL> final subscription [ ] subscriptions = ( subscription [ ] ) event handler subscriptions . values ( )  <NL>  . to array ( new subscription [ event handler subscriptions . size ( ) ] ) ;  <NL> for ( int i = 0 ; i < subscriptions . length ; i + + ) {  <NL> if ( subscriptions [ i ] . matches ( event ) ) {  <NL> subscriptions [ i ] . send event ( event ) ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> send an event synchronously </s>