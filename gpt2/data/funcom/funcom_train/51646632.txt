TDAT: private int line by offset ( final int offset ) throws bad location exception {  <NL>  / *  <NL>  * works for any binary search tree .  <NL>  * /  <NL> int remaining = offset ;  <NL> node node = f root ;  <NL> int line = 0 ;  <NL>  <NL> while ( true ) {  <NL> if ( node = = null )  <NL> fail ( offset ) ;  <NL>  <NL> if ( remaining < node . offset ) {  <NL> node = node . left ;  <NL>  } else {  <NL> remaining - = node . offset ;  <NL> line + = node . line ;  <NL> if ( remaining < node . length	|| remaining = = node . length & & node . right = = null ) / / last line <NL> return line ;  <NL>  <NL> remaining - = node . length ;  <NL> line + + ;  <NL> node = node . right ;  <NL>  }  <NL>  }  <NL>  }  COM: <s> returns the line number for the given offset </s>