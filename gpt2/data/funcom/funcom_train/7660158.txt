TDAT: public void test weak compare and set ( ) {  <NL> atomic long ai = new atomic long ( 1 ) ;  <NL> while ( ! ai . weak compare and set ( 1 , 2 ) ) ;  <NL> while ( ! ai . weak compare and set ( 2 , - 4 ) ) ;  <NL> assert equals ( - 4 , ai . get ( ) ) ;  <NL> while ( ! ai . weak compare and set ( - 4 , 7 ) ) ;  <NL> assert equals ( 7 , ai . get ( ) ) ;  <NL>  }  COM: <s> repeated weak compare and set succeeds in changing value when equal </s>