TDAT: protected void format partitions ( i document document , i region region ) {  <NL>  <NL> add partitioning updater ( document ) ;  <NL>  <NL> try {  <NL>  <NL> typed position [ ] ranges = get partitioning ( document , region ) ;  <NL> if ( ranges ! = null ) {  <NL> for ( int i = 0 ; i < ranges . length ; i + + ) {  <NL> typed position range = ranges [ i ] ;  <NL> i formatting strategy s = get formatting strategy ( range . get type ( ) ) ;  <NL> if ( s ! = null ) {  <NL> format region ( document , s , range ) ;  <NL>  }  <NL>  }  <NL>  }  <NL>  <NL>  } catch ( bad location exception x ) { }  <NL>  <NL> remove partitioning updater ( document ) ;  <NL>  }  COM: <s> determines the partitioning of the given region of the document </s>