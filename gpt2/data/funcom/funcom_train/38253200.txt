TDAT: protected int send ( ) throws io exception {  <NL> if ( ! channel . is open ( ) )  <NL> return 0 ;  <NL>  <NL> int count = 0 ;  <NL> byte buffer last = ( byte buffer ) w buffers . get ( w buffers . size ( ) - 1 ) ;  <NL> if ( last . has remaining ( ) ) {  <NL> byte buffer [ ] data = new byte buffer [ w buffers . size ( ) ] ;  <NL> w buffers . to array ( data ) ;  <NL> count = ( int ) channel . write ( data , 0 , data . length ) ;  <NL>  }  <NL> cleanup write buffers ( ) ;  <NL> if ( w buffers . size ( ) = = 0 )  <NL> write pending = false ;  <NL> return count ;  <NL>  }  COM: <s> send the data to the channel returning the number of bytes written </s>