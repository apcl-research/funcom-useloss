TDAT: public void test pi open single threaded ( ) throws exception {  <NL> inject command as if waiting ( " open " , " blah . html " , " " ) ;  <NL> expect command ( " open " , " blah . html " , " " ) ;  <NL> cq . handle command result without waiting for a command ( " ok " ) ;  <NL> cq . declare closed ( ) ;  <NL> assert equals ( " ok " , cq . peek at result ( ) ) ;  <NL>  }  COM: <s> in pi mode open replies ok but then we asynchronously receive closed </s>