TDAT: protected string read line ( input stream in ) throws io exception {  <NL> string buffer buf = new string buffer ( ) ;  <NL> int c , length = 0 ;  <NL>  <NL> while ( true ) {  <NL> c = in . read ( ) ;  <NL>  <NL> if ( c = = - 1 || c = = ' \n ' || length > 512 ) {  <NL> chars read + + ;  <NL> break ;  <NL>  } else if ( c = = ' \r ' ) {  <NL> in . read ( ) ;  <NL> chars read + = 2 ;  <NL> break ;  <NL>  } else {  <NL> buf . append ( ( char ) c ) ;  <NL> length + + ;  <NL>  }  <NL>  }  <NL>  <NL> chars read + = length ;  <NL> return buf . to string ( ) ;  <NL>  }  COM: <s> read a line of text from the given stream and return it </s>