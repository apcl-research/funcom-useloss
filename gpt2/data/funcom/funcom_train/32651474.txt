TDAT: public servlet output stream get output stream ( ) throws io exception {  <NL> if ( using writer ) {  <NL> throw new illegal state exception (  <NL>  " get portlet output stream can ' t be used "  <NL>  + " after get writer was invoked . " ) ;  <NL>  }  <NL> if ( wrapped writer = = null ) {  <NL> wrapped writer = new print writer servlet output stream (  <NL> get http servlet response ( ) . get writer ( ) ) ;  <NL>  }  <NL> using stream = true ;  <NL> return wrapped writer ;  <NL>  }  COM: <s> todo javadoc about why we are using a wrapped writer here </s>