TDAT: public void test bad reference ( ) throws exception {  <NL> test bean test bean = new test bean ( ) ;  <NL> test bean . set name ( test bean name ) ;  <NL> entity reference < test bean > test bean reference = null ;  <NL> try {  <NL> test bean reference = test bean mapper . get reference ( test bean ) ;  <NL>  } catch ( illegal state exception e ) {  <NL>  }  <NL> assert null ( " non - null reference obtained from transient test bean " , test bean reference ) ;  <NL>  }  COM: <s> test that an unpersisted entity cannot return a reference </s>