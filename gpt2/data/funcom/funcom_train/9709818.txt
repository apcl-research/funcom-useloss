TDAT: public void on message ( message context msg context ) {  <NL>  / / transport input stream gets closed after calling set complete <NL>  / / method . have to build the whole envelope including the <NL>  / / attachments at this stage . data might get lost if the input <NL>  / / stream gets closed before building the whole envelope .  <NL> this . envelope = msg context . get envelope ( ) ;  <NL> this . envelope . build with attachments ( ) ;  <NL>  }  COM: <s> this is called when we receive a message </s>