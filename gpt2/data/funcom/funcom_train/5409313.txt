TDAT: public boolean wait until idle ( long timeout ms ) {  <NL> long start at = system . current time millis ( ) ;  <NL> if ( ! wait until queue empty ( timeout ms ) )  <NL> return false ;  <NL>  <NL> long empty at = system . current time millis ( ) ;  <NL> if ( timeout ms > = 0 ) {  <NL> timeout ms = timeout ms - ( empty at - start at ) ;  <NL> if ( timeout ms < = 0 )  <NL> timeout ms = 1 ;  <NL>  }  <NL>  <NL> return m active threads counter . wait for zero ( timeout ms ) ;  <NL>  }  COM: <s> wait until thread pool has finished all tasks submitted to it </s>