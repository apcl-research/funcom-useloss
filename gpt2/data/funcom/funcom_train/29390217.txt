TDAT: private int wait for echo ( inet address address , int reply ) {  <NL> long time = system . current time millis ( ) ;  <NL> while ( time + timeout > system . current time millis ( ) ) {  <NL> integer i = responses . get ( address ) ;  <NL> if ( i ! = null ) {  <NL> int res = ( i . int value ( ) & reply ) ;  <NL> if ( res ! = 0 ) {  <NL>  / / we got a response <NL> i = i & ~ reply ;  <NL> responses . put ( address , i ) ;  <NL> return ( res ) ;  <NL>  }  <NL>  }  <NL> try {  <NL> thread . sleep ( 10 ) ;  <NL>  } catch ( interrupted exception e ) { }  <NL>  }  <NL> return ( 0 ) ;  <NL>  }  COM: <s> waits until the specified reply came from address </s>