TDAT: public void run ( ) {  <NL> message msg ;  <NL> for ( ; ; ) {  <NL> synchronized ( message queue ) {  <NL> while ( message queue . is empty ( ) ) {  <NL> try {  <NL> message queue . wait ( ) ;  <NL>  } catch ( interrupted exception e ) {  <NL> logg . error ( " exception message " , e ) ;  <NL>  }  <NL>  }  <NL> msg = message queue . poll ( ) ;  <NL> logg . debug ( " new message in the queue . " + msg ) ;  <NL>  }  <NL> if ( msg . is control message ( ) )  <NL> router . process ( ( control message impl ) msg ) ;  <NL>  <NL> if ( msg . is query message ( ) )  <NL> router . process ( ( query message impl ) msg ) ;  <NL>  <NL>  }  <NL>  <NL>  }  COM: <s> waits on the message queue </s>