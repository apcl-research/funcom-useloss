TDAT: protected i region widget region2model region ( text event e ) {  <NL>  <NL> string text = e . get text ( ) ;  <NL> int length = text = = null ? 0 : text . length ( ) ;  <NL>  <NL> if ( f viewer instanceof i text viewer extension5 ) {  <NL> i text viewer extension5 extension = ( i text viewer extension5 ) f viewer ;  <NL> return extension . widget range2model range ( new region ( e . get offset ( ) , length ) ) ;  <NL>  }  <NL>  <NL> i region visible = f viewer . get visible region ( ) ;  <NL> i region region = new region ( e . get offset ( ) + visible . get offset ( ) , length ) ;  <NL> return region ;  <NL>  }  COM: <s> translates the given text event into the corresponding range of the viewers document </s>