TDAT: protected int compare ruler line ( position position , i document document , int line ) {  <NL>  <NL> if ( position . get offset ( ) > - 1 & & position . get length ( ) > - 1 ) {  <NL> try {  <NL> int annotation line = document . get line of offset ( position . get offset ( ) ) ;  <NL> if ( line = = annotation line )  <NL> return 1 ;  <NL> if ( annotation line < = line <NL>  & & line < = document . get line of offset ( position . get offset ( ) + position . get length ( ) ) )  <NL> return 2 ;  <NL>  } catch ( bad location exception x ) {  <NL>  }  <NL>  }  <NL>  <NL> return 0 ;  <NL>  }  COM: <s> returns the distance to the ruler line </s>