TDAT: private void write message ( final byte buffer buffer ) {  <NL> boolean thread should write = false ;  <NL>  <NL> synchronized ( queue ) {  <NL> queue . add ( buffer ) ;  <NL>  / / currently no thread writing , make this thread dispatch a write <NL> if ( ! writing ) {  <NL> writing = true ;  <NL> thread should write = true ;  <NL>  }  <NL>  }  <NL>  <NL> if ( thread should write ) {  <NL> write from queue ( ) ;  <NL>  }  <NL>  }  COM: <s> enqueues a write of the buffer to the channel </s>