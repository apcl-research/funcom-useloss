TDAT: public void set valve ( boolean valve open ) throws io exception {  <NL>  <NL> if ( valve pulse time < 0 )  <NL> return ;  <NL>  <NL> if ( ! was available ( ) )  <NL>  {  <NL> debug . d ( " attempting to control or interrogate non - existent extruder for " + material ) ;  <NL> return ;  <NL>  }  <NL>  <NL> if ( valve open )  <NL> debug . d ( " opening valve . " ) ;  <NL> else <NL> debug . d ( " closing valve . " ) ;  <NL>  <NL> wait till not busy ( ) ;  <NL> communicator . lock ( ) ;  <NL> try {  <NL> outgoing message request =  <NL> new outgoing byte message ( valve open ? msg _ valve open : msg _ valve closed ,  <NL>  ( byte ) valve pulse time ) ;  <NL> communicator . send message ( snap , request ) ;  <NL>  }  <NL> finally {  <NL> communicator . unlock ( ) ;  <NL>  }  <NL>  }  COM: <s> open or close the valve </s>