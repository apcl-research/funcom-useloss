TDAT: public void visit ( leaf node ln ) {  <NL> pub sub affiliation affil = ln . get affiliation ( bare jid ) ;  <NL> if ( ! affil . equals ( pub sub affiliation . none ) ) {  <NL> affiliation item ai = new affiliation item ( ln . get name ( ) , bare jid , affil ) ;  <NL> affiliations . add ( ai ) ;  <NL>  }  <NL>  }  COM: <s> visit all nodes and get the affiliation of the requesting user </s>