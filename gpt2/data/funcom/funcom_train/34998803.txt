TDAT: public string ensure all attributes are safe ( string contents ) {  <NL> string builder sb = new string builder ( contents . length ( ) ) ;  <NL>  <NL> try {  <NL> lexer lexer = new lexer ( contents ) ;  <NL> node node ;  <NL>  <NL> while ( ( node = lexer . next node ( ) ) ! = null ) {  <NL> if ( node instanceof tag ) {  <NL> tag tag = ( tag ) node ;  <NL>  <NL> this . check and validate attributes ( tag , false ) ;  <NL>  <NL> sb . append ( tag . to html ( ) ) ;  <NL>  }  <NL> else {  <NL> sb . append ( node . to html ( ) ) ;  <NL>  }  <NL>  }  <NL>  }  <NL> catch ( exception e ) {  <NL> throw new forum exception ( " problems while parsing html : " + e , e ) ;  <NL>  }  <NL>  <NL> return sb . to string ( ) ;  <NL>  }  COM: <s> given an input analyze each html tag and remove unsecure attributes from them </s>