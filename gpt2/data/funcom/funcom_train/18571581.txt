TDAT: public int update ( int bytes ) {  <NL>  / / update total bytes downloaded for this thread <NL> total bytes + = bytes ;  <NL>  <NL> long now = system . current time millis ( ) ;  <NL> if ( now - last sample time > = ms btw samples ) {  <NL> last sample time = now ;  <NL>  <NL> last sample = new sample ( now , total bytes ) ;  <NL> thread samples . add last ( last sample ) ;  <NL>  <NL>  / / slide window <NL> first sample = thread samples . size ( ) > max samples ? thread samples . remove first ( ) : thread samples . peek first ( ) ;  <NL>  <NL> throttle ms = get throttle ms ( ) ;  <NL>  }  <NL>  <NL> return throttle ms ;  <NL>  }  COM: <s> update with bytes </s>