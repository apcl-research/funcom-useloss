TDAT: public void finish block ( ) throws io exception {  <NL> if ( out mode = = out mode . header ) {  <NL> out . flush ( ) ;  <NL> out . close ( ) ;  <NL> header = ( ( byte array output stream ) out ) . to byte array ( ) ;  <NL>  } else if ( out mode = = out mode . footer ) {  <NL> out . flush ( ) ;  <NL> out . close ( ) ;  <NL> footer = ( ( byte array output stream ) out ) . to byte array ( ) ;  <NL>  } else {  <NL> throw new illegal state exception ( ) ;  <NL>  }  <NL> out mode = out mode . start ;  <NL> out = null ;  <NL>  }  COM: <s> finish a header or footer block </s>