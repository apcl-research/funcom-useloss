TDAT: public void test piped streams flush immediately ( ) throws io exception {  <NL> piped output stream piped out = new piped output stream ( ) ;  <NL> piped input stream piped in = new piped input stream ( piped out ) ;  <NL> assert equals ( 0 , piped in . available ( ) ) ;  <NL> piped out . write ( 1 ) ;  <NL> assert equals ( 1 , piped in . available ( ) ) ;  <NL> piped out . write ( 2 ) ;  <NL> assert equals ( 2 , piped in . available ( ) ) ;  <NL> assert equals ( 1 , piped in . read ( ) ) ;  <NL> piped out . close ( ) ;  <NL> assert equals ( 1 , piped in . available ( ) ) ;  <NL> assert equals ( 2 , piped in . read ( ) ) ;  <NL> assert equals ( 0 , piped in . available ( ) ) ;  <NL> assert equals ( - 1 , piped in . read ( ) ) ;  <NL>  }  COM: <s> internal test this functionality is needed to test streaming </s>