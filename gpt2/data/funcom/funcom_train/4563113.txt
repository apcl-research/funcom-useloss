TDAT: protected void handle exception ( http request request , http response response , exception e ) {  <NL> string html = null ;  <NL> if ( e instanceof http exception ) {  <NL> html = error page . get error page ( request , response , ( http exception ) e ) ;  <NL>  } else {  <NL> if ( log . is warn enabled ( ) ) {  <NL> log . warn ( exception utils . get stack trace ( e , 500 ) ) ;  <NL>  }  <NL> html = error page . get error page ( request , response ,  <NL> new service unavailable exception ( e ) ) ;  <NL>  }  <NL> http entity entity = get entity ( html ) ;  <NL> response utils . set entity ( response , entity ) ;  <NL>  }  COM: <s> p when the exception is generated by processing </s>