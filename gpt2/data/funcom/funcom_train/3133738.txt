TDAT: public packet build ( byte buffer buffer ) throws io exception {  <NL> int ready = buffer . remaining ( ) ;  <NL>  <NL> if ( packet ! = null ) {  <NL> return build ( buffer , packet ) ;  <NL>  }  <NL> if ( ready > size ) {  <NL> return allocator . allocate ( buffer ) ;  <NL>  }  <NL> if ( ready > 0 ) {  <NL> if ( packet = = null ) {  <NL> packet = allocator . allocate ( ) ;  <NL>  }  <NL> return build ( buffer , packet ) ;  <NL>  }  <NL> return null ;  <NL>  }  COM: <s> this is used to build the a code packet code within the </s>