TDAT: public int get detuning ( string tuning ) {  <NL> if ( tuning . equals ( tuning _ types [ tuning _ in _ tune ] ) ) {  <NL>  / / unison ;  <NL> return 0 ;  <NL>  }  <NL>  <NL>  / / get a random integer based on the possible detunings <NL> int possibilities = get max deviation ( ) / get granularity ( ) ;  <NL> int value = settings . random . next int ( possibilities ) ;  <NL> if ( value = = 0 ) value = 1 ;  <NL> int detuning = value * get granularity ( ) ;  <NL>  <NL> if ( tuning . equals ( tuning _ types [ tuning _ flat ] ) ) {  <NL>  / / put it in a negative direction <NL> detuning * = - 1 ;  <NL>  }  <NL> return detuning ;  <NL>  }  COM: <s> randomly generates a detuning in the direction passed in </s>