TDAT: public void test abort when ready ( ) {  <NL> message m1 = new message ( h2 , h1 , msg id2 , 1 ) ;  <NL> h2 . create new message ( m1 ) ;  <NL> check creates ( 1 ) ;  <NL>  <NL> h2 . connect ( h1 ) ;  <NL> update all nodes ( ) ; / / should start transfer <NL>  <NL> assert true ( mc . next ( ) ) ;  <NL> assert equals ( mc . type _ start , mc . get last type ( ) ) ;  <NL> assert false ( mc . next ( ) ) ;  <NL>  <NL> clock . advance ( 10 ) ;  <NL> h2 . set location ( far away ) ;  <NL>  / / transfer should have been finished even if nodes disconnected <NL> update all nodes ( ) ;  <NL>  <NL> assert true ( mc . next ( ) ) ;  <NL> assert equals ( mc . type _ relay , mc . get last type ( ) ) ;  <NL> assert equals ( h2 , mc . get last from ( ) ) ;  <NL> assert false ( mc . next ( ) ) ;  <NL>  }  COM: <s> try disconnecting on the same update interval when a transfer should </s>