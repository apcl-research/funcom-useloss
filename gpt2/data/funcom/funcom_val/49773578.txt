TDAT: protected report report from controls ( ) {  <NL> string text = content text . get text ( ) . trim ( ) ;  <NL> string ref = ref text . get text ( ) ;  <NL> report type type = ( report type ) report type choice . get selected item ( ) ;  <NL>  <NL> report report = new report ( text ) ;  <NL> report . set sender id ( name . value of ( ( string ) agent . get agent ipc name ( ) ) ) ;  <NL> report . set priority ( priority from controls ( ) ) ;  <NL> if ( ! ref . equals ( " " ) )  <NL> report . set ref ( name . value of ( ref ) ) ;  <NL> if ( ! type . equals ( " " ) )  <NL> report . set report type ( type ) ;  <NL>  <NL> return report ;  <NL>  }  COM: <s> construct a report from the current state of the gui </s>