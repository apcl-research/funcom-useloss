TDAT: protected void layout ( ) {  <NL> int w hint = context . get remaining line width ( ) ;  <NL> if ( w hint = = integer . max _ value )  <NL> w hint = - 1 ;  <NL> dimension pref size = get preferred size _ 1 ( w hint , - 1 ) ;  <NL> if ( context . is current line occupied ( )  <NL>  & & pref size . width > context . get remaining line width ( ) ) {  <NL> context . end line ( ) ;  <NL> pref size = get preferred size _ 1 ( context . get remaining line width ( ) , - 1 ) ;  <NL>  }  <NL> box . set size ( pref size ) ;  <NL> context . add to current line ( box ) ;  <NL>  }  COM: <s> sizes the content box to be big enough to display all figures </s>