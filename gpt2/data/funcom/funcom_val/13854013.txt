TDAT: public position get previous position ( int offset ) {  <NL> position [ ] positions = get positions ( f document ) ;  <NL> if ( positions = = null )  <NL> return null ;  <NL>  <NL> position last position = null ;  <NL> position position = get first position ( ) ;  <NL>  <NL> while ( ( position ! = null ) & & ( position . get offset ( ) < offset ) ) {  <NL> last position = position ;  <NL> position = find next position ( positions , position . get offset ( ) ) ;  <NL>  }  <NL>  <NL> return last position ;  <NL>  }  COM: <s> returns the position with the greatest offset smaller than code offset code </s>