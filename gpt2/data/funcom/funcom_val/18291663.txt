TDAT: protected void write packet with body ( output stream os , byte [ ] bs , int max packet size , boolean more to send ) throws io exception {  <NL> write head ( os , max packet size ) ;  <NL> byte array output stream baos = new byte array output stream ( ) ;  <NL> data output stream out = new data output stream ( baos ) ;  <NL> out . write int ( bs . length * ( more to send ? - 1 : 1 ) ) ; / / toggle " more packets " bit <NL> baos . write to ( os ) ;  <NL> os . write ( bs ) ;  <NL>  }  COM: <s> actual packet writing code for packets with body that calls </s>