TDAT: public int calc check sum ( byte read buffer [ ] ) {  <NL> int n , i = 3 ;  <NL> int c = 0 ;  <NL> n = read buffer [ 2 ] & 0x ff ;  <NL> n - = 2 ;  <NL> while ( n > 1 ) {  <NL> c + = to short local ( read buffer [ i ] , read buffer [ i + 1 ] ) ;  <NL> c = ( c & 0xffff ) ;  <NL> n - = 2 ;  <NL> i + = 2 ;  <NL>  }  <NL> if ( n > 0 )  <NL> c = ( c ^ ( read buffer [ i ] & 0x ff ) ) ;  <NL> return c ;  <NL>  }  COM: <s> calculates the checksum for the given buffer </s>