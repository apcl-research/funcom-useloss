TDAT: protected collection passivate beans in commands ( collection commands ) {  <NL> iterator commands iterator = commands . iterator ( ) ;  <NL> int command index = 0 ;  <NL> while ( commands iterator . has next ( ) ) {  <NL> command command = ( command ) commands iterator . next ( ) ;  <NL> command . set index ( command index + + ) ;  <NL> if ( is command which expects non pooled bean ( command ) ) passivate entity bean ( command . get entity bean ( ) ) ;  <NL>  }  <NL> return commands ;  <NL>  }  COM: <s> before beans are sent to the server they are passivated </s>