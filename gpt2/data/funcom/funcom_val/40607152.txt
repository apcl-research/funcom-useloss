TDAT: private void do shutdown ( ) throws interrupted exception {  <NL>  / / force the shutdown to finish after 5 seconds <NL> unit write queue . add ( unit write message . shutdown _ thread ) ;  <NL>  / / wait for shutdown <NL> shut down latch . await ( 5000 , time unit . milliseconds ) ;  <NL> try {  <NL> runtime . get runtime ( ) . remove shutdown hook ( shutdown hook ) ;  <NL>  } catch ( illegal state exception ex ) {  <NL>  / / ignore .  <NL>  }  <NL>  }  COM: <s> shutdown the thread and wait for it </s>