TDAT: protected image get thumbnail image ( ) {  <NL> dimension old size = target size ;  <NL> target size = get preferred size _ 0 ( ) ;  <NL> target size . expand ( get insets ( ) . get width ( ) , get insets ( ) . get height ( ) ) . negate ( ) ;  <NL> set scales ( target size . width / ( float ) get source rectangle ( ) . width ,  <NL> target size . height / ( float ) get source rectangle ( ) . height ) ;  <NL> if ( ( is dirty ( ) ) & & ! updater . is running ( ) )  <NL> updater . start ( ) ;  <NL> else if ( old size ! = null & & ! target size . equals ( old size ) ) {  <NL> revalidate ( ) ;  <NL> updater . restart ( ) ;  <NL>  }  <NL>  <NL> return thumbnail image ;  <NL>  }  COM: <s> returns the scaled image of the source figure </s>