TDAT: static public segment get next segment ( datum datum , int segment size , int segment number ) {  <NL> int start = 0 ;  <NL> int end = 0 ;  <NL> int length = 0 ;  <NL>  <NL> start = segment number * segment size ;  <NL> end = start + segment size ;  <NL> length = datum . length ( ) ;  <NL>  <NL> if ( end > length ) {  <NL> end = length ;  <NL>  }  <NL>  <NL> segment segment = new standard segment ( ) ;  <NL> segment . set contents with byte array ( datum . get contents sub array ( start , end - start ) ) ;  <NL>  <NL> return segment ;  <NL>  }  COM: <s> returns the segment number </s>