TDAT: public void finish ( ) throws io exception {  <NL> ensure open ( ) ;  <NL> if ( state ! = states . finished ) {  <NL> if ( img width = = - 1 || img height = = - 1 ) {  <NL> throw new illegal state exception ( " image width and height must be specified " ) ;  <NL>  }  <NL>  <NL> movi chunk . finish ( ) ;  <NL> write epilog ( ) ;  <NL> state = states . finished ;  <NL> img width = img height = - 1 ;  <NL>  }  <NL>  }  COM: <s> finishes writing the contents of the avi output stream without closing </s>