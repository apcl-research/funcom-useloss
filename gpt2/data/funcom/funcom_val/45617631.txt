TDAT: private command processor ifc create command processor ( game mode game mode ) {  <NL> command processors com procs = new command processors ( ) ;  <NL> com procs . add ( new undo processor ( ) ) ;  <NL> com procs . add ( new server state processor ( ) ) ;  <NL> com procs . add ( new teams processor ( ) ) ;  <NL> try {  <NL> for ( command processor cp : new command processors ( game mode . get logic ( ) ) ) {  <NL> com procs . add all ( cp . explode ( ) . values ( ) ) ;  <NL>  }  <NL>  } catch ( json exception e ) {  <NL> throw new runtime exception ( " failed instantiating game logic . " , e ) ;  <NL>  }  <NL> command processor composite result = new command processor composite (  <NL> com procs ) ;  <NL> log . debug ( result ) ;  <NL> return result ;  <NL>  }  COM: <s> builds the appropriate command processor for the active game </s>