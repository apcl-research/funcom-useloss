TDAT: synchronized public boolean take ( long timeout ) {  <NL> long exp ms = system . current time millis ( ) + timeout ;  <NL>  <NL> while ( ! state ) {  <NL> long now ms = system . current time millis ( ) ;  <NL> if ( now ms > = exp ms ) {  <NL> break ;  <NL>  }  <NL> try {  <NL> this . wait ( exp ms - now ms ) ;  <NL>  } catch ( interrupted exception e ) {  <NL> break ;  <NL>  }  <NL>  }  <NL> if ( state ) {  <NL> state = false ;  <NL> return true ;  <NL>  } else {  <NL> return false ;  <NL>  }  <NL>  }  COM: <s> wait until the semaphore is full or the timeout elapses </s>