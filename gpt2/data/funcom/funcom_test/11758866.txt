TDAT: public global state get global state ( ) {  <NL> if ( main configuration . get singleton ( ) . static global state ) {  <NL> return global state server . get statically shared global state ( ) ;  <NL>  } else {  <NL>  / / check if you are server first <NL> global state server server = ( global state server ) get peerlet of type ( global state server . class ) ;  <NL> if ( server ! = null ) {  <NL> return server . get global state ( ) ;  <NL>  }  <NL> global state client client = ( global state client ) get peerlet of type ( global state client . class ) ;  <NL> if ( client ! = null ) {  <NL> return client . get global state ( ) ;  <NL>  }  <NL> return null ;  <NL>  }  <NL>  }  COM: <s> a convenience method returns an instance of the code global state code </s>