TDAT: private void register undo redo action ( string action id , history action action ) {  <NL> final i action old action = get action ( action id ) ;  <NL> if ( old action instanceof operation history action handler )  <NL>  ( ( operation history action handler ) old action ) . dispose ( ) ;  <NL> if ( action = = null )  <NL> return ;  <NL> set action ( action id , action ) ;  <NL> final i action bars action bars = get editor site ( ) . get action bars ( ) ;  <NL> if ( action bars ! = null )  <NL> action bars . set global action handler ( action id , action ) ;  <NL> action . set enabled ( false ) ;  <NL>  }  COM: <s> pushed down from abstract text editor </s>