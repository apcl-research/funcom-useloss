TDAT: private endpoint reference get url ( ) {  <NL> string host = connection . get hostname ( ) ;  <NL> int port = connection . get port ( ) ;  <NL> boolean is secure = connection . is secure ( ) ;  <NL> string url = " http : / / " ;  <NL> if ( is secure ) {  <NL> url = " https : / / " ;  <NL>  / / todo : handle protocol multiple invocations <NL> protocol . register protocol ( " https " , new protocol ( " https " ,  <NL> new secure socket factory ( ( secure connection description ) connection ) , connection . get port ( ) ) ) ;  <NL>  }  <NL>  <NL> url + = host + " : " + port + connection . get url path ( ) ;  <NL> return new endpoint reference ( url ) ;  <NL>  }  COM: <s> get the endpoint of this soap message </s>