TDAT: public void add diagram ( final diagram2d diagram ) {  <NL> diagrams . add ( diagram ) ;  <NL> if ( diagram instanceof writeable diagram2d ) {  <NL> final writeable diagram2d wd2d = ( writeable diagram2d ) diagram ;  <NL> wd2d . set event broker ( this . event broker ) ;  <NL>  }  <NL> mark data dirty ( ) ;  <NL> event broker . process event ( new diagram list change event ( this ) ) ;  <NL>  }  COM: <s> adds a diagram to the schema </s>