TDAT: private void flush write ( ) throws io exception , bad descriptor exception {  <NL> if ( reading || ! modes . is writable ( ) || buffer . position ( ) = = 0 ) return ; / / don ' t bother <NL>  <NL> int len = buffer . position ( ) ;  <NL> buffer . flip ( ) ;  <NL> int n = descriptor . write ( buffer ) ;  <NL>  <NL> if ( n ! = len ) {  <NL>  / / todo : check the return value here <NL>  }  <NL>  <NL> buffer . clear ( ) ;  <NL>  }  COM: <s> flush the write buffer to the channel if needed </s>