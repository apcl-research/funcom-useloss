TDAT: public int row ( cursor cursor ) {  <NL> int ret ;  <NL>  <NL> ret = sort . bsearch ( this , cursor ) ;  <NL>  / / handle line transition , the search returns the index if it matches <NL>  / / exactly one of the line end positions , so we advance one line if <NL>  / / it ' s equal to the offset at the row index , since that position is <NL>  / / actually the beginning of the next line <NL> if ( ( ret < m count ) & & ( cursor . get position ( ) = = m indices [ ret ] ) )  <NL> ret + + ;  <NL>  <NL> return ( ret ) ;  <NL>  }  COM: <s> get the line number for a cursor </s>