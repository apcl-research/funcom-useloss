TDAT: protected void set state ( state new state ) {  <NL> boolean proceed = true ;  <NL> state old = get state ( ) ;  <NL>  <NL> for ( jingle session state listener listener : state listeners )  <NL> try {  <NL> listener . before change ( old , new state ) ;  <NL>  }  <NL> catch ( jingle exception e ) {  <NL> proceed = false ;  <NL>  }  <NL>  <NL> if ( proceed )  <NL> super . set state ( new state ) ;  <NL>  <NL> for ( jingle session state listener listener : state listeners )  <NL> listener . after changed ( old , get state ( ) ) ;  <NL>  }  COM: <s> overides jingle negiociator method to add listener capabilities </s>