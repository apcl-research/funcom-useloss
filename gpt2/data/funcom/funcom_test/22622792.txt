TDAT: private map get user roles map ( user user , list set infos ) {  <NL>  <NL> hash map map = new hash map ( ) ;  <NL> for ( iterator i = set infos . iterator ( ) ; i . has next ( ) ; ) {  <NL> set info set info = ( set info ) i . next ( ) ;  <NL> string collection = set info . get set spec ( ) ;  <NL> if ( user = = null )  <NL> map . put ( collection , " < i > roles disabled < / i > " ) ;  <NL> else <NL> map . put ( collection , user . get role ( collection ) ) ;  <NL>  }  <NL> return map ;  <NL>  }  COM: <s> return mapping from collection key to permission for authorized sets </s>