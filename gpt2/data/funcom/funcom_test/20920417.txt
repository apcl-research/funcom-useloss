TDAT: public void update logical layer ( final read only timer timer ) {  <NL> final s current state before update = internal state machine . get current state ( ) ;  <NL> scheduler . update ( previous state , current state before update , timer . get time per frame ( ) ) ;  <NL>  / / obviously the current state may change during the update <NL> final s current state after update = internal state machine . get current state ( ) ;  <NL> previous state = current state after update ;  <NL>  }  COM: <s> updates the logical layer by running the scheduler </s>