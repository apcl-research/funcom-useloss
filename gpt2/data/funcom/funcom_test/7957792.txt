TDAT: private block copy block ( final block block ) {  <NL> final block copy = new block ( ) ;  <NL>  <NL>  / / copy the stack from the end of the old block .  <NL>  / / but don ' t change it when instructions are added .  <NL>  <NL> final tree tree = new tree ( copy , block . tree ( ) . stack ( ) ) ;  <NL> copy . set tree ( tree ) ;  <NL>  <NL>  / / fill the tree .  <NL> final iterator stmts = block . tree ( ) . stmts ( ) . iterator ( ) ;  <NL>  <NL> while ( stmts . has next ( ) ) {  <NL> final stmt stmt = ( stmt ) stmts . next ( ) ;  <NL>  <NL> if ( stmt instanceof label stmt ) {  <NL> continue ;  <NL>  }  <NL>  <NL> tree . add stmt ( ( stmt ) stmt . clone ( ) ) ;  <NL>  }  <NL>  <NL> return copy ;  <NL>  }  COM: <s> creates a copy of a block including its expression tree </s>