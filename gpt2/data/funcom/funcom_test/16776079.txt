TDAT: public int wait until free thread ( ) {  <NL>  <NL> int thread id = - 1 ;  <NL> boolean waiting = true ;  <NL>  <NL> while ( waiting ) {  <NL> synchronized ( lock1 ) {  <NL> if ( num active threads < max threads ) {  <NL> thread id = allocate new id ( ) ;  <NL> waiting = false ;  <NL>  }  <NL>  }  <NL> clean admin ( ) ;  <NL>  <NL>  / * try {  <NL> wait ( ) ;  <NL>  } catch ( interrupted exception e ) {  <NL> e . print stack trace ( ) ;  <NL>  } * /  <NL>  }  <NL> return thread id ;  <NL>  }  COM: <s> wait until a free thread is available </s>