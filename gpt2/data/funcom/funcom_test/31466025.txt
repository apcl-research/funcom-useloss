TDAT: public void save map ( tile set manager manager , java . io . output stream out ) throws io exception {  <NL> data output stream dout = new data output stream ( out ) ;  <NL> dout . write utf ( " mapper " ) ;  <NL> dout . write int ( 3 ) ;  <NL> dout . write int ( width ) ;  <NL> dout . write int ( height ) ;  <NL> dout . write int ( floors . length ) ;  <NL> dout . write int ( cur floor ) ;  <NL> manager . save tileset ( out , set ) ;  <NL> hash map hmap = set . save set map ( out ) ;  <NL> for ( int i = 0 ; i < floors . length ; i + + )  <NL> floors [ i ] . save map floor ( dout , hmap ) ;  <NL>  }  COM: <s> saves a map to an output stream </s>