TDAT: public void run ( ) {  <NL> server map map = null ;  <NL> random random = new random ( ) ;  <NL> while ( true ) {  <NL> while ( map = = null ) {  <NL> map = this . get map ( random . next int ( 99 ) - 50 , random . next int ( 99 ) - 50 ) ;  <NL> try {  <NL> thread . sleep ( 25 ) ;  <NL>  } catch ( exception e ) { }  <NL>  }  <NL> non player char npc = map . get random npc ( ) ;  <NL> if ( npc ! = null )  <NL> while ( ! npc . move ( game server . get mechanics ( ) . get random direction ( ) ) ) ;  <NL> try {  <NL> thread . sleep ( 500 ) ;  <NL>  } catch ( exception e ) { }  <NL> map = null ;  <NL>  }  <NL>  }  COM: <s> handles npc movements </s>